define(["exports","./analysis-tool-settings2-45a16996","./analysis-tool-standard-settings2-bf6d5f8e","./index2-4d04e6a0","./shared-components-ab646707","./store-6b2974ed","./analysis-tool-context-b1931181","./popover-utils-2688c7fd"],(function(t,e,n,r,a,o,i,s){"use strict";var c,l,u,d=Date.now,f=n.defineProperty$1?function(t,e){return n.defineProperty$1(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:function(t){return t},p=(c=f,l=0,u=0,function(){var t=d(),e=16-(t-u);if(u=t,e>0){if(++l>=800)return arguments[0]}else l=0;return c.apply(void 0,arguments)});const v=p;var h=Math.max;function y(t,e){for(var r=0,a=(e=n.castPath(e,t)).length;null!=t&&r<a;)t=t[n.toKey(e[r++])];return r&&r==a?t:void 0}var g=n.Symbol$1?n.Symbol$1.isConcatSpreadable:void 0;function b(t){return n.isArray$1(t)||e.isArguments$1(t)||!!(g&&t&&t[g])}function m(t,n,r,a,o){var i=-1,s=t.length;for(r||(r=b),o||(o=[]);++i<s;){var c=t[i];n>0&&r(c)?n>1?m(c,n-1,r,a,o):e.arrayPush(o,c):a||(o[o.length]=c)}return o}function S(t){return null!=t&&t.length?m(t,1):[]}function O(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n.MapCache;++e<r;)this.add(t[e])}function x(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}O.prototype.add=O.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},O.prototype.has=function(t){return this.__data__.has(t)};var E=1,_=2;function A(t,e,n,r,a,o){var i=n&E,s=t.length,c=e.length;if(s!=c&&!(i&&c>s))return!1;var l=o.get(t),u=o.get(e);if(l&&u)return l==e&&u==t;var d=-1,f=!0,p=n&_?new O:void 0;for(o.set(t,e),o.set(e,t);++d<s;){var v=t[d],h=e[d];if(r)var y=i?r(h,v,d,e,t,o):r(v,h,d,t,e,o);if(void 0!==y){if(y)continue;f=!1;break}if(p){if(!x(e,(function(t,e){if(i=e,!p.has(i)&&(v===t||a(v,t,n,r,o)))return p.push(e);var i}))){f=!1;break}}else if(v!==h&&!a(v,h,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function C(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function j(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var w=1,k=2,$="[object Boolean]",L="[object Date]",R="[object Error]",P="[object Map]",D="[object Number]",I="[object RegExp]",K="[object Set]",M="[object String]",T="[object Symbol]",B="[object ArrayBuffer]",z="[object DataView]",q=n.Symbol$1?n.Symbol$1.prototype:void 0,F=q?q.valueOf:void 0,U=1,H=Object.prototype.hasOwnProperty,N=1,V="[object Arguments]",G="[object Array]",J="[object Object]",Q=Object.prototype.hasOwnProperty;function W(t,r,a,o,i){return t===r||(null==t||null==r||!n.isObjectLike(t)&&!n.isObjectLike(r)?t!=t&&r!=r:function(t,r,a,o,i,s){var c=n.isArray$1(t),l=n.isArray$1(r),u=c?G:e.getTag$1(t),d=l?G:e.getTag$1(r),f=(u=u==V?J:u)==J,p=(d=d==V?J:d)==J,v=u==d;if(v&&e.isBuffer$1(t)){if(!e.isBuffer$1(r))return!1;c=!0,f=!1}if(v&&!f)return s||(s=new e.Stack),c||e.isTypedArray$1(t)?A(t,r,a,o,i,s):function(t,r,a,o,i,s,c){switch(a){case z:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case B:return!(t.byteLength!=r.byteLength||!s(new e.Uint8Array$1(t),new e.Uint8Array$1(r)));case $:case L:case D:return n.eq(+t,+r);case R:return t.name==r.name&&t.message==r.message;case I:case M:return t==r+"";case P:var l=C;case K:var u=o&w;if(l||(l=j),t.size!=r.size&&!u)return!1;var d=c.get(t);if(d)return d==r;o|=k,c.set(t,r);var f=A(l(t),l(r),o,i,s,c);return c.delete(t),f;case T:if(F)return F.call(t)==F.call(r)}return!1}(t,r,u,a,o,i,s);if(!(a&N)){var h=f&&Q.call(t,"__wrapped__"),y=p&&Q.call(r,"__wrapped__");if(h||y){var g=h?t.value():t,b=y?r.value():r;return s||(s=new e.Stack),i(g,b,a,o,s)}}return!!v&&(s||(s=new e.Stack),function(t,n,r,a,o,i){var s=r&U,c=e.getAllKeys(t),l=c.length;if(l!=e.getAllKeys(n).length&&!s)return!1;for(var u=l;u--;){var d=c[u];if(!(s?d in n:H.call(n,d)))return!1}var f=i.get(t),p=i.get(n);if(f&&p)return f==n&&p==t;var v=!0;i.set(t,n),i.set(n,t);for(var h=s;++u<l;){var y=t[d=c[u]],g=n[d];if(a)var b=s?a(g,y,d,n,t,i):a(y,g,d,t,n,i);if(!(void 0===b?y===g||o(y,g,r,a,i):b)){v=!1;break}h||(h="constructor"==d)}if(v&&!h){var m=t.constructor,S=n.constructor;m==S||!("constructor"in t)||!("constructor"in n)||"function"==typeof m&&m instanceof m&&"function"==typeof S&&S instanceof S||(v=!1)}return i.delete(t),i.delete(n),v}(t,r,a,o,i,s))}(t,r,a,o,W,i))}function X(t,e){return null!=t&&e in Object(t)}function Y(t,r){return function(t,e,r){for(var a=-1,o=e.length,i={};++a<o;){var s=e[a],c=y(t,s);r(0,s)&&n.baseSet(i,n.castPath(s,t),c)}return i}(t,r,(function(r,a){return function(t,r){return null!=t&&function(t,r,a){for(var o=-1,i=(r=n.castPath(r,t)).length,s=!1;++o<i;){var c=n.toKey(r[o]);if(!(s=null!=t&&a(t,c)))break;t=t[c]}return s||++o!=i?s:!!(i=null==t?0:t.length)&&e.isLength(i)&&n.isIndex(c,i)&&(n.isArray$1(t)||e.isArguments$1(t))}(t,r,X)}(t,a)}))}var Z=function(t){return v(function(t,e,n){return e=h(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,o=h(r.length-e,0),i=Array(o);++a<o;)i[a]=r[e+a];a=-1;for(var s=Array(e+1);++a<e;)s[a]=r[a];return s[e]=n(i),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,s)}}(t,void 0,S),t+"")}((function(t,e){return null==t?{}:Y(t,e)}));const tt=Z,et={modal:{width:"s",kind:"warning"},buttonPrimary:{slot:"primary"},buttonSecondary:{slot:"secondary",appearance:"outline"},header:{slot:"header",style:"\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n    "},headerIcon:{icon:"exclamation-mark-triangle-f",style:"\n      margin: 0 1rem;\n      --calcite-ui-icon-color: var(--calcite-color-status-warning);\n    "},content:{slot:"content"}},nt=(t,e,n)=>{const r=document.createElement(t);var a,o;return a=r,o=n,Object.keys(o).forEach((t=>{a.setAttribute(t,o[t])})),r.innerText=e,r};t.cloneDeep=function(t){return e.baseClone(t,5)},t.createCreditThresholdModalElement=function(t,e){const{modal:n,buttonPrimary:r,buttonSecondary:a,header:o,headerIcon:i,content:c}=et,{continueRun:l,cancelRun:u,thresholdExceeded:d,creditEstimate:f,creditThreshold:p,confirmationPrompt:v,learnMore:h,heading:y}=t,g=nt("calcite-modal","",n),b=nt("div","",o),m=nt("div",y,{}),S=nt("calcite-icon","",i);b.appendChild(S),b.appendChild(m);const O=nt("calcite-button",l,r),x=nt("calcite-button",u,a),E=nt("div","",c);E.appendChild(nt("p",d,{})),E.appendChild(nt("p",f+"\n"+p,{})),E.appendChild(nt("p",v,{}));const _=nt("calcite-link",h,{href:e,target:"_blank"});E.appendChild(_),g.appendChild(b),g.appendChild(E),g.appendChild(O),g.appendChild(x);const A=new Promise((t=>{const e=n=>{let r=!1;r=n.target.getAttribute("slot")===et.buttonPrimary.slot,g.removeEventListener("calciteModalClose",e),O.removeEventListener("click",e),x.removeEventListener("click",e),g.open=!1,s.removeOpenableDomElement(g),t(r)};g.addEventListener("calciteModalClose",e),O.addEventListener("click",e),x.addEventListener("click",e)}));return{modalElement:g,modalResult:A}},t.isEqual=function(t,e){return W(t,e)},t.setContextFromHistory=function(t){r.isEmptyDataItem(t)?(o.state.context={},o.state.settingsSelectedOutSpatialRefOption=a.OutSROptions.SameAsInput,o.state.settingsSelectedExtentOption=a.ExtentOptions.Default):(r.isEmptyDataItem(t?.outSR)?o.state.settingsSelectedOutSpatialRefOption=a.OutSROptions.SameAsInput:o.state.settingsSelectedOutSpatialRefOption=a.OutSROptions.BrowseCS,r.isEmptyDataItem(t?.extent)?o.state.settingsSelectedExtentOption=a.ExtentOptions.Default:o.state.settingsSelectedExtentOption=a.ExtentOptions.Coordinates,o.state.context=t??{})},t.setContextFromMapLevel=function(t,e,n){void 0!==n&&(o.state.mapLevelContext=n);const{settingsSelectedExtentOption:r,settingsSelectedOutSpatialRefOption:a,context:s}=o.state.mapLevelContext;void 0!==r&&(o.state.settingsSelectedExtentOption=r),void 0!==a&&(o.state.settingsSelectedOutSpatialRefOption=a);const c=t?.environmentSettings,l=[];void 0!==c?(void 0!==c.standard?l.push(...c.standard):l.push(...i.AnalysisStandardContextKeys),void 0!==c.raster?l.push(...c.raster):"raster"===e&&l.push(...i.AnalysisRasterContextKeys)):(l.push(...i.AnalysisStandardContextKeys),"raster"===e&&l.push(...i.AnalysisRasterContextKeys)),o.state.context=tt(s??{},l)}}));