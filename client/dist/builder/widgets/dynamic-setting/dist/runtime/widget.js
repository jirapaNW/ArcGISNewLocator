System.register(["jimu-core","jimu-for-builder","jimu-for-builder/templates","jimu-layouts/layout-builder","jimu-layouts/layout-runtime","jimu-theme","jimu-ui","jimu-ui/advanced/resource-selector","jimu-ui/advanced/setting-components","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker","jimu-ui/basic/list-tree","jimu-ui/basic/sql-expression-runtime"],(function(e,t){var i={},o={},s={},n={},a={},r={},l={},c={},p={},d={},g={},h={},u={};return{setters:[function(e){i.APP_FRAME_NAME_IN_BUILDER=e.APP_FRAME_NAME_IN_BUILDER,i.AnimationPlayMode=e.AnimationPlayMode,i.AnimationType=e.AnimationType,i.AppMode=e.AppMode,i.BrowserSizeMode=e.BrowserSizeMode,i.DataActionManager=e.DataActionManager,i.DialogInteractionType=e.DialogInteractionType,i.DialogMode=e.DialogMode,i.ECookieBannerLayout=e.ECookieBannerLayout,i.ErrorBoundary=e.ErrorBoundary,i.FixedPosition=e.FixedPosition,i.Immutable=e.Immutable,i.LayoutItemType=e.LayoutItemType,i.LayoutParentType=e.LayoutParentType,i.LayoutType=e.LayoutType,i.LinkType=e.LinkType,i.PageMode=e.PageMode,i.PagePart=e.PagePart,i.PageType=e.PageType,i.React=e.React,i.ReactRedux=e.ReactRedux,i.SessionManager=e.SessionManager,i.WidgetType=e.WidgetType,i.appActions=e.appActions,i.appConfigUtils=e.appConfigUtils,i.classNames=e.classNames,i.css=e.css,i.defaultMessages=e.defaultMessages,i.esri=e.esri,i.getAppStore=e.getAppStore,i.getMessageTypeLabel=e.getMessageTypeLabel,i.getNextAnimationId=e.getNextAnimationId,i.hooks=e.hooks,i.i18n=e.i18n,i.injectIntl=e.injectIntl,i.jsx=e.jsx,i.lodash=e.lodash,i.moduleLoader=e.moduleLoader,i.polished=e.polished,i.urlUtils=e.urlUtils,i.utils=e.utils,i.version=e.version},function(e){o.AppDataActionManager=e.AppDataActionManager,o.AppMessageManager=e.AppMessageManager,o.WidgetSettingManager=e.WidgetSettingManager,o.appConfigUtils=e.appConfigUtils,o.builderAppSync=e.builderAppSync,o.getAppConfigAction=e.getAppConfigAction,o.helpUtils=e.helpUtils,o.utils=e.utils},function(e){s.getScreenTemplates=e.getScreenTemplates},function(e){n.ColumnLayoutItemSetting=e.ColumnLayoutItemSetting,n.FixedLayoutItemSetting=e.FixedLayoutItemSetting,n.FlowLayoutItemSetting=e.FlowLayoutItemSetting,n.FlowLayoutSetting=e.FlowLayoutSetting,n.GridLayoutItemSetting=e.GridLayoutItemSetting,n.GridLayoutSetting=e.GridLayoutSetting,n.RowLayoutItemSetting=e.RowLayoutItemSetting,n.getLabelOfGridTab=e.getLabelOfGridTab},function(e){a.DEFAULT_AUTOPLAY_INTERVAL=e.DEFAULT_AUTOPLAY_INTERVAL,a.searchUtils=e.searchUtils,a.utils=e.utils},function(e){r.getTheme=e.getTheme,r.styled=e.styled,r.withTheme=e.withTheme},function(e){l.Button=e.Button,l.ButtonGroup=e.ButtonGroup,l.Checkbox=e.Checkbox,l.CollapsableCheckbox=e.CollapsableCheckbox,l.CollapsablePanel=e.CollapsablePanel,l.CollapsableRadio=e.CollapsableRadio,l.Collapse=e.Collapse,l.DEFAULT_FIXED_POSITION_SIZE_JSON=e.DEFAULT_FIXED_POSITION_SIZE_JSON,l.DistanceUnits=e.DistanceUnits,l.Dropdown=e.Dropdown,l.DropdownButton=e.DropdownButton,l.DropdownItem=e.DropdownItem,l.DropdownMenu=e.DropdownMenu,l.FillType=e.FillType,l.Icon=e.Icon,l.Label=e.Label,l.Link=e.Link,l.Loading=e.Loading,l.LoadingType=e.LoadingType,l.MultiSelect=e.MultiSelect,l.NumericInput=e.NumericInput,l.PanelHeader=e.PanelHeader,l.Radio=e.Radio,l.Select=e.Select,l.Slider=e.Slider,l.Switch=e.Switch,l.Tab=e.Tab,l.Tabs=e.Tabs,l.TextArea=e.TextArea,l.TextInput=e.TextInput,l.Tooltip=e.Tooltip,l.defaultMessages=e.defaultMessages,l.utils=e.utils},function(e){c.IconPicker=e.IconPicker},function(e){p.DirectionSelector=e.DirectionSelector,p.LinkSelectorSidePopper=e.LinkSelectorSidePopper,p.OpenTypes=e.OpenTypes,p.SettingCollapse=e.SettingCollapse,p.SettingRow=e.SettingRow,p.SettingSection=e.SettingSection,p.SidePopper=e.SidePopper,p.TemplateSelector=e.TemplateSelector},function(e){d.AnimationSettingComponent=e.AnimationSettingComponent,d.BackgroundSetting=e.BackgroundSetting,d.FixedPositionSize=e.FixedPositionSize,d.InputUnit=e.InputUnit,d.Padding=e.Padding,d.ThemeBackgroundSection=e.ThemeBackgroundSection,d.ThemeBorderSection=e.ThemeBorderSection,d.ThemeBoxShadowSection=e.ThemeBoxShadowSection},function(e){g.ThemeColorPicker=e.ThemeColorPicker},function(e){h.List=e.List,h.TreeItemActionType=e.TreeItemActionType},function(e){u.getJimuFieldNamesBySqlExpression=e.getJimuFieldNamesBySqlExpression}],execute:function(){e((()=>{var e={6499:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m6.036 12.157 8.01-8.01a.5.5 0 1 1 .707.707l-8.01 8.01a1 1 0 0 1-1.415 0L1.146 8.682a.5.5 0 1 1 .708-.707z"></path></svg>'},1027:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5c0 .527-.074 1.036-.212 1.518l.912.438a6.5 6.5 0 1 0-6.586 4.533l-.077-1.008A5.5 5.5 0 1 1 12 6.5m-9 0a3.5 3.5 0 0 0 2.88 3.445L5.8 8.901a2.501 2.501 0 1 1 3.194-2.224l.949.456A3.5 3.5 0 1 0 3 6.5M15.5 11l-5 1-3 4-1-9.5zm-5.57.094-1.702 2.269-.542-5.152 4.76 2.38z" clip-rule="evenodd"></path></svg>'},5879:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M5 13H1a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1h-4l.78 2.342a.5.5 0 0 1-.474.658H4.694a.5.5 0 0 1-.475-.658zM1 3h14v9H1zm5.054 10-.667 2h5.226l-.667-2z" clip-rule="evenodd"></path></svg>'},8739:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.5 13a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z"></path><path fill="#000" fill-rule="evenodd" d="M4 5a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1zm1 0h6v10H5z" clip-rule="evenodd"></path></svg>'},4651:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0" clip-rule="evenodd"></path></svg>'},3303:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35q.227 1.084.316 1.852.562.242 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 22 22 0 0 1-1.49 1.194q.03.27.03.552 0 .32-.038.63l1.465 1.12a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 23 23 0 0 1-1.807-.66q-.49.35-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21 21 0 0 1-.317-1.853 5.3 5.3 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546q.85-.735 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196q1.078.35 1.807.66c.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994zm-.365 1H6.985l-.28 1.866-.467.19q-.353.144-.672.34l-.207.136-.42.293-.476-.197q-.492-.205-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4 4 0 0 0-.021.816l.014.144.058.492-.419.294q-.433.304-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29q.307.219.645.384l.228.103.474.199.059.49q.06.507.19 1.177l.043.219h2.088l.282-1.867.466-.19q.354-.144.672-.34l.207-.136.419-.293.476.198q.495.204 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4 4 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18 18 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.5 4.5 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49q-.049-.405-.14-.916zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4" clip-rule="evenodd"></path></svg>'},7781:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M3.04 2a.24.24 0 0 0-.04.143v12.714c0 .073.023.12.04.143h9.92a.24.24 0 0 0 .04-.143V2.143A.24.24 0 0 0 12.96 2zM3 1c-.552 0-1 .512-1 1.143v12.714C2 15.488 2.448 16 3 16h10c.552 0 1-.512 1-1.143V2.143C14 1.512 13.552 1 13 1z" clip-rule="evenodd"></path></svg>'},5549:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6 5H2v6h4zM1 4v8h6V4zM14 5h-4v6h4zM9 4v8h6V4z" clip-rule="evenodd"></path></svg>'},6371:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#fff" d="M2.5 6.4h15v1.2h-15zM11.25 8.8H2.5V10h8.75zM6.25 12.4c0-.663.56-1.2 1.25-1.2H10c.69 0 1.25.537 1.25 1.2s-.56 1.2-1.25 1.2H7.5c-.69 0-1.25-.537-1.25-1.2M13.75 11.2c-.69 0-1.25.537-1.25 1.2s.56 1.2 1.25 1.2h2.5c.69 0 1.25-.537 1.25-1.2s-.56-1.2-1.25-1.2z"></path><path fill="#fff" fill-rule="evenodd" d="M0 4v12h20V4zm18.75 1.2H1.25v9.6h17.5z" clip-rule="evenodd"></path></svg>'},7528:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2 2h12v4H2zM1 7V1h14v6zm1 3h12v4H2zm-1 5V9h14v6z" clip-rule="evenodd"></path></svg>'},9027:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" d="M13.5 3a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1M15.5 3a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1M18 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0M17 10.5a.5.5 0 0 0-.5-.5h-13a.5.5 0 0 0 0 1h13a.5.5 0 0 0 .5-.5M17 14.5a.5.5 0 0 0-.5-.5h-7a.5.5 0 0 0 0 1h7a.5.5 0 0 0 .5-.5"></path><path fill="#000" fill-rule="evenodd" d="M18 0a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1H2a1 1 0 0 0-.993.883L1 2v2h18V2a1 1 0 0 0-.883-.993zm1 4H1v13a1 1 0 0 0 .883.993L2 19h16a1 1 0 0 0 .993-.883L19 18z" clip-rule="evenodd"></path></svg>'},8485:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" d="M2.5 3a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1M4.5 3a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1M7 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0M3 10.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5M3 14.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M18 0a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1H2a1 1 0 0 0-.993.883L1 2v2h18V2a1 1 0 0 0-.883-.993zm1 4H1v13a1 1 0 0 0 .883.993L2 19h16a1 1 0 0 0 .993-.883L19 18z" clip-rule="evenodd"></path></svg>'},2606:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M1.25 2.5h17.5v11.25H1.25zM0 2.5c0-.69.56-1.25 1.25-1.25h17.5c.69 0 1.25.56 1.25 1.25v11.25c0 .69-.56 1.25-1.25 1.25H1.25C.56 15 0 14.44 0 13.75zm3.75 16.25h2.5V17.5h-2.5zm7.5 0h-2.5V17.5h2.5zm2.5 0h2.5V17.5h-2.5z" clip-rule="evenodd"></path></svg>'},6490:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m1.373 8 2.07-2.071.83.828L2.2 8.828a3.515 3.515 0 0 0 4.97 4.971l2.072-2.071.828.828L8 14.627A4.686 4.686 0 1 1 1.373 8M13.799 7.172l-2.071 2.07.828.83L14.627 8A4.686 4.686 0 1 0 8 1.373l-2.071 2.07.828.83L8.828 2.2a3.515 3.515 0 0 1 4.971 4.97"></path><path fill="#000" d="M5.515 9.657a.586.586 0 0 0 .828.828l4.142-4.142a.586.586 0 0 0-.828-.828z"></path></svg>'},6300:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527"></path></svg>'},655:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .54.54 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.54.54 0 0 1 0-.738" clip-rule="evenodd"></path></svg>'},8081:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M13.5 14a.5.5 0 0 0 0-1h-6l3.953-3.459a.5.5 0 0 0-.658-.752L8 11.234V1.5a.5.5 0 0 0-1 0v9.734L4.206 8.789a.5.5 0 0 0-.659.752L7.5 13h-6a.5.5 0 0 0 0 1z" clip-rule="evenodd"></path></svg>'},8710:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M7.5 0a.5.5 0 0 0-.5.5v14a.5.5 0 0 0 1 0V.5a.5.5 0 0 0-.5-.5M0 7.5c0 .291.231.527.516.527h3.508L2.527 9.6a.535.535 0 0 0 0 .746.51.51 0 0 0 .73 0L6 7.5 3.257 4.654a.51.51 0 0 0-.73 0 .535.535 0 0 0 0 .746l1.497 1.573H.516A.52.52 0 0 0 0 7.5m15 0a.52.52 0 0 1-.516.527h-3.508L12.473 9.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L9 7.5l2.743-2.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746l-1.497 1.573h3.508c.285 0 .516.236.516.527" clip-rule="evenodd"></path></svg>'},2491:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1 13.5a.5.5 0 0 0 1 0v-6l3.459 3.953a.5.5 0 0 0 .752-.658L3.766 8H13.5a.5.5 0 0 0 0-1H3.766l2.445-2.794a.5.5 0 1 0-.752-.659L2 7.5v-6a.5.5 0 0 0-1 0z" clip-rule="evenodd"></path></svg>'},9566:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M14 1.5a.5.5 0 0 0-1 0v6L9.541 3.547a.5.5 0 1 0-.752.658L11.234 7H1.5a.5.5 0 0 0 0 1h9.734l-2.445 2.794a.5.5 0 1 0 .752.659L13 7.5v6a.5.5 0 0 0 1 0z" clip-rule="evenodd"></path></svg>'},3593:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1.5 1a.5.5 0 0 0 0 1h6L3.547 5.459a.5.5 0 1 0 .658.752L7 3.766V13.5a.5.5 0 0 0 1 0V3.766l2.794 2.445a.5.5 0 1 0 .659-.752L7.5 2h6a.5.5 0 0 0 0-1z" clip-rule="evenodd"></path></svg>'},5356:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2 2h4v4H2zM1 7V1h6v6zm1 3h4v4H2zm-1 5V9h6v6zM14 2h-4v4h4zM9 1v6h6V1zm2.5 14v-2.5H9v-1h2.5V9h1v2.5H15v1h-2.5V15z" clip-rule="evenodd"></path></svg>'},2838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},2046:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M11.227 1.312c-.404-.404-1.045-.417-1.432-.03L2.49 8.587l-.48 2.674a.637.637 0 0 0 .73.73l2.673-.48 7.305-7.306c.387-.387.374-1.028-.03-1.431zm-8.114 9.575.32-1.781 4.991-4.992 1.462 1.462-4.992 4.991zm7.473-6.012 1.402-1.4-1.462-1.463-1.401 1.402z" clip-rule="evenodd"></path><path fill="#000" d="M1.5 14a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1z"></path></svg>'},6420:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6.973 11.484c0 .285.236.516.527.516a.52.52 0 0 0 .527-.516V1.976L10.6 4.473c.206.202.54.202.746 0a.51.51 0 0 0 0-.73L7.5 0 3.654 3.743a.51.51 0 0 0 0 .73c.206.202.54.202.746 0l2.573-2.497zM1 8v7h13V8h1v8H0V8z" clip-rule="evenodd"></path></svg>'},7408:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="m2 1 12 7-12 7zm9.983 6.999L3 2.723v10.553z" clip-rule="evenodd"></path></svg>'},3662:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5"></path></svg>'},170:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707z" clip-rule="evenodd"></path></svg>'},6745:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0m1 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-7.676 2.228H7.34c-.213-1.138.621-2.13 1.375-3.025C9.28 6.532 9.8 5.914 9.8 5.328 9.8 4.5 9.2 3.9 7.976 3.9c-.816 0-1.572.36-2.268 1.092l-.648-.6C5.852 3.552 6.788 3 8.096 3c1.692 0 2.772.864 2.772 2.244 0 .864-.652 1.628-1.3 2.387-.71.831-1.413 1.655-1.244 2.597m.3 2.172c0 .48-.348.792-.768.792-.432 0-.78-.312-.78-.792s.348-.804.78-.804c.42 0 .768.324.768.804" clip-rule="evenodd"></path></svg>'},5508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},4189:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjEwN3B4IiBoZWlnaHQ9IjY4cHgiIHZpZXdCb3g9IjAgMCAxMDcgNjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA2MS4xICg4OTY1MCkgLSBodHRwczovL3NrZXRjaC5jb20gLS0+DQogICAgPHRpdGxlPkF1dG88L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNTA2LjAwMDAwMCwgLTMwOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwNS4wMDAwMDAsIDMwNy4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjAwMDAwMCwgMS4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEwNyIgaGVpZ2h0PSI2OCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjNTI1MjUyIiB4PSI2IiB5PSIxNCIgd2lkdGg9IjkwIiBoZWlnaHQ9IjQwIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiM2QTZBNkEiIHg9IjEwMSIgeT0iMyIgd2lkdGg9IjMiIGhlaWdodD0iNDAiIHJ4PSIxLjUiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},2113:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjEwN3B4IiBoZWlnaHQ9IjY4cHgiIHZpZXdCb3g9IjAgMCAxMDcgNjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA2MS4xICg4OTY1MCkgLSBodHRwczovL3NrZXRjaC5jb20gLS0+DQogICAgPHRpdGxlPkN1c3RvbTwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODcuMDAwMDAwLCAtMzA4LjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzg2LjAwMDAwMCwgMzA3LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCAxLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjNTI1MjUyIiB4PSIyOCIgeT0iMTQiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0MCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjMjgyODI4IiB4PSI4NyIgeT0iMCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjY4Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxsaW5lIHgxPSI4NyIgeTE9IjAiIHgyPSI4NyIgeTI9IjY4IiBzdHJva2U9IiM1MjUyNTIiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1kYXNoYXJyYXk9IjQsNCI+PC9saW5lPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjMjgyODI4IiB4PSIwIiB5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iNjgiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPGxpbmUgeDE9IjIwIiB5MT0iMCIgeDI9IjIwIiB5Mj0iNjgiIHN0cm9rZT0iIzUyNTI1MiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLWRhc2hhcnJheT0iNCw0Ij48L2xpbmU+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiM2QTZBNkEiIHg9IjEwMSIgeT0iMyIgd2lkdGg9IjMiIGhlaWdodD0iNDAiIHJ4PSIxLjUiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},4142:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABQCAYAAAD83pAbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHCSURBVHgB7duxisJAFIXhu4uCha2FoIWFYOv7v4O2goWFgi9gEUhglxsIbLUmd7KZnM3/1V4DOZNMclAzAAAAAAAAAAAAAAAiPt594HA4fBkGc7lcfs3k0yCFwMQQmBgCE0NgYghMDIGJITAxBCZmZkHr9dr2+73NZuGvGFxRFHa73ez5fJqq8Nne7XZSYbnFYlEvsj4Cm8/nttls6oXr3/uOLxY/7uPxsLIsLSp8xtXCalRVZak8rOPxaMvlsvWMh+qLfLVa2fl8DocW3sOu12u9apR4WH5LTOVXVpewfvI5n48KXyZ+eSvvBSn8Npg6H104PCUGtNmz/mqewAJSt4KUeQILSN0KUuYJLOB+v9vr9bIIn/P5KM1n88z8afN0Otl2u+38HuZhpbxa0HQENa8IfbwmdBG+JSo3HcrCgU256ciJpkMMTYcYnhKD5Nr6KZNs66csZ1tPYAF9tPVRBBaQs62Xbzpy/E7Dj5ly0rO09WNpOnK0F5Jt/ZiajqHbi5xtvXzTkaO9aNp6P27bc9Dcun0uZYHxD8yR4R+Y/wyBiSEwMQQmhsDEEJgYAhNDYGIIDAAAAAAAAAAAAACASfgGhL/ln9+em+EAAAAASUVORK5CYII="},2384:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABQCAYAAAD83pAbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHXSURBVHgB7d2xisJAFIXhu4uChS8gaGEh2Pr+D2ErWFgo+AIWgsIuN7CwsK7J7J3Jeib/V8stcsw4noTEDAAAAADQp7e2D6zX6w9Db3a73dNM3g1SCEwMgYkhMDEEJobAxIwsYDab2Wq1stEoNGYwrterHQ4HO5/P9lehM2y5XBJWgslk0nzBI0KBEVa6+/1uEaHA9vt9c5qjGw/Ll8SI0Cnia3FkPUY6doliCEwMgYkhMDEEJoamo0c0HWJoOgTRdAih6RggdoliCEwMgYkhMDEEJoamo0c0HWJoOgTRdAih6RggdoliCEwMgYkhMDEEJoamo0WOdiInmo4WOdqJnGg6Ooi2EznRdLTI0U7kRNMhhl2iGAITQ2BiCEwMgYkhMDEEJobAxFTTLY3HY5vP500h7f1fCm9rvAA4nU52u93+ZX5XVTxC1g/mZrOx6XRqEZfLxbbb7Y+DWnr+d4N4hKx/86MH0/kMn9X3/BRVBObLVMlZpeenqCKw1N+U1Fml56eoIrCcl3gezSo9P0UVgeW8xPNoVun5KaoI7Hg8NjuwKJ/hs/qen6KaN0P47QqLxSL0P8kP5m+3A5Se/6VtW8+rPF4Mr/KoDIGJITAxBAYAAAAAwBOfNFL4K95cNL0AAAAASUVORK5CYII="},92:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjgiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCA2OCAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxyZWN0IHg9IjQiIHk9IjkiIHdpZHRoPSI2IiBoZWlnaHQ9IjYiIHJ4PSIyIiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSIxNCIgeT0iMTAiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0IiBmaWxsPSIjNkE2QTZBIi8+DQo8L3N2Zz4NCg=="},9119:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjgiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCA2OCAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxyZWN0IHg9IjQiIHk9IjkiIHdpZHRoPSI2IiBoZWlnaHQ9IjYiIHJ4PSIyIiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSI1MSIgeT0iOSIgd2lkdGg9IjEzIiBoZWlnaHQ9IjYiIHJ4PSIyIiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSIxNCIgeT0iMTAiIHdpZHRoPSIzMyIgaGVpZ2h0PSI0IiBmaWxsPSIjNkE2QTZBIi8+DQo8L3N2Zz4NCg=="},6542:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjgiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCA2OCAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxyZWN0IHg9IjQiIHk9IjkiIHdpZHRoPSI2IiBoZWlnaHQ9IjYiIHJ4PSIyIiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSI1MSIgeT0iMTYiIHdpZHRoPSIxMyIgaGVpZ2h0PSI2IiByeD0iMiIgZmlsbD0iIzZBNkE2QSIvPg0KPHJlY3QgeD0iMTQiIHk9IjEwIiB3aWR0aD0iMzMiIGhlaWdodD0iNCIgZmlsbD0iIzZBNkE2QSIvPg0KPC9zdmc+DQo="},9244:e=>{"use strict";e.exports=i},4108:e=>{"use strict";e.exports=o},6884:e=>{"use strict";e.exports=s},6055:e=>{"use strict";e.exports=n},1496:e=>{"use strict";e.exports=a},1888:e=>{"use strict";e.exports=r},4321:e=>{"use strict";e.exports=l},5809:e=>{"use strict";e.exports=c},9298:e=>{"use strict";e.exports=p},5562:e=>{"use strict";e.exports=d},4337:e=>{"use strict";e.exports=g},8640:e=>{"use strict";e.exports=h},6117:e=>{"use strict";e.exports=u}},t={};function m(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,m),s.exports}m.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return m.d(t,{a:t}),t},m.d=(e,t)=>{for(var i in t)m.o(t,i)&&!m.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},m.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),m.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},m.p="";var f={};return m.p=window.jimuConfig.baseUrl,(()=>{"use strict";m.r(f),m.d(f,{__set_webpack_public_path__:()=>Mo,default:()=>jo});var e={};m.r(e),m.d(e,{checkItemVersion:()=>qi,importItem:()=>Xi});var t=m(9244);var i=m(4108),o=m(4321);class s extends t.React.PureComponent{constructor(){super(...arguments),this.formatMessage=e=>this.props.formatMessage(e),this.onSettingChange=(e,t)=>{const o=(0,i.getAppConfigAction)();if(o.appConfig)return o.editWidget(e,t).exec()},this.renderWidgetSetting=e=>{const s=this.props.widgetsSettingRuntimeInfo[e]&&this.props.widgetsSettingRuntimeInfo[e].isClassLoaded?i.WidgetSettingManager.getInstance().getWidgetSettingClass(e):null;return s&&this.props.widgetJson.config?t.React.createElement(t.ErrorBoundary,null,t.React.createElement(s,{key:e,widgetId:e,onSettingChange:this.onSettingChange})):t.React.createElement(o.Loading,{type:o.LoadingType.Secondary})}}componentDidUpdate(){this.loadWidgetSettingClass()}componentDidMount(){this.loadWidgetSettingClass()}loadWidgetSettingClass(){const{widgetId:e}=this.props;e&&!i.WidgetSettingManager.getInstance().getWidgetSettingClass(e)&&i.WidgetSettingManager.getInstance().loadWidgetSettingClass(e)}render(){if(!this.props.widgetJson)return t.React.createElement(o.Loading,{type:o.LoadingType.Secondary});const{widgetId:e}=this.props;return t.React.createElement("div",{className:"setting-container"},e?this.renderWidgetSetting(e):t.React.createElement("div",null,"\xa0\xa0",this.formatMessage("noWidget")))}}const n=t.ReactRedux.connect(((e,t)=>({widgetJson:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.widgets[t.widgetId]})))(s);var a=m(9298),r=m(4337),l=m(5562);const c={width:110};class p extends t.React.PureComponent{constructor(e){super(e),this.isOpen=()=>{const{pagePart:e,pageId:t}=this.props,i=this.getAppConfig();return"body"===e||!!(i&&i.pages[t]&&i[e]&&i.pages[t][e])},this.formatMessage=e=>this.props.formatMessage(e),this.onSwitchChange=()=>{const{pageId:e,pagePart:o}=this.props,s=this.getAppConfig(),n=s.pages[e],a=s[o],r=(0,i.getAppConfigAction)();a||("header"===o?r.initHeaderLayout().editHeaderProperty(`height.${t.BrowserSizeMode.Large}`,75):r.initFooterLayout().editFooterProperty(`height.${t.BrowserSizeMode.Large}`,75));const l=n.set(o,!n[o]);r.editPageProperty(e,o,!n[o]).exec(),"body"===o||l[o]||i.builderAppSync.publichActivePagePartChangeToApp(t.PagePart.Body),this.setState({isOpen:l[o]})},this.onHeightChange=e=>{const t=o.utils.stringOfLinearUnit(e),{pagePart:s,browserSizeMode:n}=this.props;"header"===s?(0,i.getAppConfigAction)().editHeaderProperty(`height.${n}`,t).exec():(0,i.getAppConfigAction)().editFooterProperty(`height.${n}`,t).exec()},this.onStickHeaderChange=e=>{(0,i.getAppConfigAction)().editHeaderProperty("sticky",e.target.checked).exec()},this.onBackgroundColorChange=e=>{const{pageId:t,pagePart:o}=this.props;"body"===o?(0,i.getAppConfigAction)().editPageProperty(t,"bodyBackgroundColor",e).exec():"header"===o?(0,i.getAppConfigAction)().editHeaderProperty("backgroundColor",e).exec():(0,i.getAppConfigAction)().editFooterProperty("backgroundColor",e).exec()},this.state={isOpen:this.isOpen()}}getAppConfig(){return(0,t.getAppStore)().getState().appStateInBuilder&&(0,t.getAppStore)().getState().appStateInBuilder.appConfig||{pages:{empty:{}}}}componentDidUpdate(e){if(this.props.pageId!==e.pageId){const{pageJson:e,pagePart:t}=this.props;this.setState({isOpen:"body"===t||e&&e[t]})}}render(){var e,i,s,n,p,d,g,h,u,m,f;const v={body:this.formatMessage("body"),header:this.formatMessage("header"),footer:this.formatMessage("footer")},{pageId:x,pagePart:w,browserSizeMode:I,theme:y,header:b}=this.props,S=this.getAppConfig(),C=S.pages[x];let A;A="body"===w?C.bodyBackgroundColor:null===(e=S[w])||void 0===e?void 0:e.backgroundColor,!A&&y&&(A="header"===w?null===(s=null===(i=y.comp)||void 0===i?void 0:i.Header.root.vars)||void 0===s?void 0:s.bg:"footer"===w?null===(p=null===(n=y.comp)||void 0===n?void 0:n.Footer.root.vars)||void 0===p?void 0:p.bg:null===(d=y.sys.color.surface)||void 0===d?void 0:d.background);const j=t.React.createElement("div",{className:"setting-title d-flex justify-content-between"},t.React.createElement("div",null,t.React.createElement("span",null,v[this.props.pagePart])),t.React.createElement("div",{className:"d-flex align-items-center"},"body"===w?null:t.React.createElement(o.Switch,{checked:this.isOpen(),onChange:this.onSwitchChange,"aria-label":v[this.props.pagePart]}))),M=S.mainSizeMode,T=null===(h=null===(g=S[w])||void 0===g?void 0:g.height)||void 0===h?void 0:h[I],N=null===(m=null===(u=S[w])||void 0===u?void 0:u.height)||void 0===m?void 0:m[M],P=o.utils.stringOfLinearUnit(null!==(f=null!=T?T:N)&&void 0!==f?f:75);return t.React.createElement(a.SettingSection,{title:j,role:"group","aria-label":v[this.props.pagePart]},t.React.createElement(o.Collapse,{isOpen:this.state.isOpen},"body"===w?null:t.React.createElement(a.SettingRow,{label:`${this.formatMessage("dynamicHeight")}`},t.React.createElement(l.InputUnit,{value:P,min:0,onChange:this.onHeightChange,style:c,"aria-label":`${this.formatMessage("dynamicHeight")}`})),t.React.createElement(a.SettingRow,{"aria-label":this.formatMessage("dsFill"),label:this.formatMessage("dsFill")},t.React.createElement(r.ThemeColorPicker,{specificTheme:y,value:A,onChange:this.onBackgroundColorChange})),"header"===w&&C.mode===t.PageMode.AutoScroll&&t.React.createElement(a.SettingRow,{flow:"wrap"},t.React.createElement(o.Label,{centric:!0},t.React.createElement(o.Checkbox,{className:"mr-2",checked:Boolean(null==b?void 0:b.sticky),onChange:this.onStickHeaderChange}),this.formatMessage("keepFixedOnScroll")))))}}var d=m(6055),g=m(1496),h=m(5508),u=m.n(h),v=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const x=e=>{const i=window.SVG,{className:o}=e,s=v(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:u()},s)):t.React.createElement("svg",Object.assign({className:n},s))},w={};class I extends t.React.PureComponent{constructor(e){super(e),this.onMaxWidthChange=e=>{const t=this.props.pageJson;(0,i.getAppConfigAction)().editPageProperty(t.id,"maxWidth",e).exec()},this.formatMessage=e=>this.props.formatMessage(e),this.setPageWidthModeAuto=()=>{let e=this.props.pageJson;e=e.without("maxWidth"),(0,i.getAppConfigAction)().editPageProperty(e.id,"maxWidth",void 0).exec()},this.setPageWidthModeFixed=()=>{const e=this.props.pageJson;(0,i.getAppConfigAction)().editPageProperty(e.id,"maxWidth",1024).exec()},this.openWithDialogChanged=e=>{const t=this.props.pageJson;(0,i.getAppConfigAction)().editPageProperty(t.id,"autoOpenDialogId",e.target.value).exec()},this.onEffectSettingChange=(e,o)=>{const{pageJson:s}=this.props;(0,i.getAppConfigAction)().editPageProperty(s.id,"oneByOneEffect",o).exec(),(null==o?void 0:o.type)!==t.AnimationType.None&&i.builderAppSync.publishAnimationPreviewToApp({pageId:s.id,playMode:e,id:(0,t.getNextAnimationId)()})},this.previewAnimation=e=>{const{pageJson:o}=this.props;o.oneByOneEffect&&o.oneByOneEffect.type!==t.AnimationType.None&&i.builderAppSync.publishAnimationPreviewToApp({pageId:o.id,playMode:e,id:(0,t.getNextAnimationId)()})},this.state={isSetImageUrl:!1,currentImgUrlInput:""},this.fileInput=t.React.createRef()}getAppConfig(){return(0,t.getAppStore)().getState().appStateInBuilder&&(0,t.getAppStore)().getState().appStateInBuilder.appConfig||{pages:{empty:{}}}}layoutSetting(){var e;const{pageId:i,appTheme:o}=this.props,s=this.getAppConfig(),n=s.pages[i];if(n&&n.layout){const i=g.searchUtils.findLayoutId(n.layout,null===(e=(0,t.getAppStore)().getState().appStateInBuilder)||void 0===e?void 0:e.browserSizeMode,s.mainSizeMode),a=s.layouts[i];if((null==a?void 0:a.type)===t.LayoutType.FlowLayout)return(0,t.jsx)(d.FlowLayoutSetting,{layoutId:i,formatMessage:this.props.formatMessage});if((null==a?void 0:a.type)===t.LayoutType.GridLayout)return(0,t.jsx)(d.GridLayoutSetting,{layouts:n.layout,appTheme:o,formatMessage:this.props.formatMessage})}}getDialogList(){const e=[{value:"",index:-1,label:this.formatMessage("none")}],i=this.props.dialogs;return i&&(Object.keys(i).forEach((o=>{i[o].isSplash||i[o].mode!==t.DialogMode.Fixed||e.push({value:o,index:i[o].index,label:i[o].label})})),e.sort(((e,t)=>e.index-t.index))),e}getStyle(){const{theme:e}=this.props;return t.css`
    .image-setting-input {
      opacity: 0;
      position: absolute;
      left: 88px;
      width: 70px !important;
      height: 30px !important;
    }
    input, select {
      width: 130px;
      max-width: 130px;
    }
    .setting-row-label{
      line-height: 30px;
      font-size: 0.8125rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
      color: ${e.ref.palette.neutral[900]};
    }
    .content-width-item {
      width: calc(50% - 4px);
      .img-container {
        width: auto;
        height: auto;
        cursor: pointer;
        outline: 1px solid ${e.ref.palette.neutral[700]};
        background-color: ${e.ref.palette.white} !important;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 8px;
        &.active {
          outline: 2px solid ${e.sys.color.primary.light};
        }
      }
      span {
        overflow: hidden;
        text-overflow: ellipsis;
        width: 100%;
      }
    }

    `}render(){const{pageMode:e,maxWidth:i,pageJson:s}=this.props;if(!s)return null;const n=this.props.pageJson.autoOpenDialogId||"",r=s.oneByOneEffect,c=s.maxWidth>0?0:1;return(0,t.jsx)("div",{className:"setting-pane widget-builder-page-setting",css:this.getStyle()},(0,t.jsx)(a.SettingSection,null,(0,t.jsx)("div",{className:"setting-row-label d-flex justify-content-between"},(0,t.jsx)("span",null,this.formatMessage("openWithWindow")),(0,t.jsx)(o.Tooltip,{title:this.formatMessage("openWithWindowTip"),placement:"bottom"},(0,t.jsx)(o.Button,{icon:!0,type:"tertiary",className:"d-inline jimu-outline-inside"},(0,t.jsx)(x,null)))),(0,t.jsx)(a.SettingRow,null,(0,t.jsx)(o.Select,{size:"sm",value:n,onChange:this.openWithDialogChanged,"aria-label":this.formatMessage("openWithWindow")},this.getDialogList().map(((e,i)=>(0,t.jsx)("option",{value:e.value,key:i,selected:e.value===n},e.label)))))),e===t.PageMode.AutoScroll&&(0,t.jsx)(a.SettingSection,{role:"group",title:this.formatMessage("contentWidth"),"aria-label":this.formatMessage("contentWidth")},(0,t.jsx)(a.SettingRow,null,(0,t.jsx)("div",{className:"d-flex w-100 justify-content-between"},(0,t.jsx)("div",{className:"d-flex flex-column align-items-center content-width-item"},(0,t.jsx)(o.Button,{icon:!0,type:"tertiary",className:"img-container p-0 "+(0===c?"active":""),"aria-label":this.formatMessage("dsCustom"),"aria-pressed":0===c,onClick:this.setPageWidthModeFixed},(0,t.jsx)(o.Icon,{autoFlip:!0,width:0===c?105:107,height:0===c?66:68,icon:m(2113)})),(0,t.jsx)("span",{title:this.formatMessage("dsCustom"),className:"text-center"},this.formatMessage("dsCustom"))),(0,t.jsx)("div",{className:"d-flex flex-column align-items-center content-width-item"},(0,t.jsx)(o.Button,{icon:!0,type:"tertiary",className:"img-container p-0 "+(1===c?"active":""),"aria-label":this.formatMessage("dsAuto"),"aria-pressed":1===c,onClick:this.setPageWidthModeAuto},(0,t.jsx)(o.Icon,{autoFlip:!0,width:1===c?105:107,height:1===c?66:68,icon:m(4189)})),(0,t.jsx)("span",{title:this.formatMessage("dsAuto"),className:"text-center"},this.formatMessage("dsAuto"))))),0===c&&(0,t.jsx)(a.SettingRow,{label:this.formatMessage("maxWidth")},(0,t.jsx)(o.NumericInput,{"aria-label":this.formatMessage("maxWidth"),className:"setting-input-select",min:300,onChange:this.onMaxWidthChange,value:isNaN(i)?"":i,style:{width:"110px"}}))),(0,t.jsx)(a.SettingSection,{role:"group","aria-label":this.formatMessage("animation"),title:this.formatMessage("animation")},(0,t.jsx)(a.SettingRow,null,(0,t.jsx)(l.AnimationSettingComponent,{contentId:s.id,oneByOneSetting:r,onSettingChange:this.onEffectSettingChange,previewEnabled:!0,supportAsOne:!1,supportOneByOne:!0,isRoot:!0,onPreviewClicked:this.previewAnimation,formatMessage:this.formatMessage}))),(0,t.jsx)(p,{formatMessage:this.formatMessage,emptyLayout:w,dispatch:this.props.dispatch,pageId:this.props.pageId,pagePart:"body",pageJson:this.props.pageJson,theme:this.props.appTheme,browserSizeMode:this.props.browserSizeMode}),(0,t.jsx)(p,{formatMessage:this.formatMessage,emptyLayout:w,dispatch:this.props.dispatch,pageId:this.props.pageId,pagePart:"header",pageJson:this.props.pageJson,header:this.props.header,theme:this.props.appTheme,browserSizeMode:this.props.browserSizeMode}),(0,t.jsx)(p,{formatMessage:this.formatMessage,emptyLayout:w,dispatch:this.props.dispatch,pageJson:this.props.pageJson,pageId:this.props.pageId,pagePart:"footer",footer:this.props.footer,theme:this.props.appTheme,browserSizeMode:this.props.browserSizeMode}),this.layoutSetting())}}const y=t.ReactRedux.connect(((e,t)=>{var i,o,s,n,a,r,l,c;return{pageJson:null===(o=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===o?void 0:o.pages[t.pageId],dialogs:null===(n=null===(s=e.appStateInBuilder)||void 0===s?void 0:s.appConfig)||void 0===n?void 0:n.dialogs,header:null===(r=null===(a=e.appStateInBuilder)||void 0===a?void 0:a.appConfig)||void 0===r?void 0:r.header,footer:null===(c=null===(l=e.appStateInBuilder)||void 0===l?void 0:l.appConfig)||void 0===c?void 0:c.footer}}))(I);var b=m(5879),S=m.n(b),C=m(7781),A=m.n(C),j=m(8739),M=m.n(j),T=m(92),N=m.n(T),P=m(9119),k=m.n(P),R=m(6542),O=m.n(R);const B="var(--light)",L="var(--dark-900)";class D extends t.React.PureComponent{constructor(e){var s,n;super(e),this.getDefaultText=(e=this.props.dialogJson.confirmBeforeClose)=>{let t="";return this.props.dialogJson.interactionType&&(t=this.formatMessage(e?"dialogConfirmationDefaultText":"dialogPreventDisplayAgainDefaultText")),t},this.formatMessage=e=>this.props.formatMessage(e),this.onTextChanged=e=>{this.setState({text:e.target.value})},this.onButtonTextChanged=e=>{this.setState({buttonText:e.target.value})},this.onTextBLur=e=>{const t=this.defaultText;this.textBlur("text",e,t)},this.onButtonTextBLur=e=>{const t=this.formatMessage("ok");this.textBlur("buttonText",e,t)},this.textBlur=(e,t,i)=>{if(i===(t=t.trim())&&(t=""),this.interactionStyles[e]!==t&&this.updateInteractionStyles(e,t),""===t){const t={};t[e]=i,this.setState(t)}},this.updateDialogMask=e=>{e=e||L,this.editDialogProperty("overlayColor",e)},this.getDialogBackgroud=()=>{var e;const{dialogJson:t}=this.props;return(null===(e=t.dialogBackground)||void 0===e?void 0:e.color)===B?t.dialogBackground.set("color",""):t.dialogBackground},this.updateDialogQuickBackgroud=e=>{var t,i;const{dialogJson:o}=this.props;(null===(t=o.dialogBackground)||void 0===t?void 0:t.image)&&(e.image=null===(i=o.dialogBackground)||void 0===i?void 0:i.image),this.editDialogProperty("dialogBackground",e)},this.updateDialogBackgroud=e=>{""===e.color?this.editDialogProperty("dialogBackground.color",B):this.editDialogProperty("dialogBackground",e)},this.updateBorder=e=>{this.editDialogProperty("border",e)},this.updateBorderRadius=e=>{this.editDialogProperty("borderRadius",e)},this.updateShadow=e=>{this.editDialogProperty("boxShadow",e)},this.onEffectSettingChange=(e,o)=>{const{dialogJson:s}=this.props,n=e===t.AnimationPlayMode.OneByOne?"oneByOneEffect":"effect";(0,i.getAppConfigAction)().editDialogProperty(s.id,n,o).exec(),i.builderAppSync.publishAnimationPreviewToApp({dialogId:s.id,playMode:e,id:(0,t.getNextAnimationId)()})},this.previewAnimation=e=>{const{dialogJson:o}=this.props;(o.effect||o.oneByOneEffect)&&i.builderAppSync.publishAnimationPreviewToApp({dialogId:o.id,playMode:e,id:(0,t.getNextAnimationId)()})},this.getBrowserIcons=e=>{const i=!this.props.dialogJson.layout[t.BrowserSizeMode.Medium],s=!this.props.dialogJson.layout[t.BrowserSizeMode.Small],n=this.props.browserSizeMode===t.BrowserSizeMode.Large||!this.props.dialogJson.layout[this.props.browserSizeMode],a=this.props.browserSizeMode===t.BrowserSizeMode.Large&&i||this.props.browserSizeMode===t.BrowserSizeMode.Medium||this.props.browserSizeMode===t.BrowserSizeMode.Small&&i&&s,r=this.props.browserSizeMode===t.BrowserSizeMode.Large&&s||this.props.browserSizeMode===t.BrowserSizeMode.Medium&&i&&s||this.props.browserSizeMode===t.BrowserSizeMode.Small,l=this.props.theme.ref.palette.neutral[800],c=this.props.formatMessage("applyToLargeScreen"),p=this.props.formatMessage("applyToMediumScreen"),d=this.props.formatMessage("applyToSmallScreen");return(0,t.jsx)("div",{className:"d-flex justify-content-between align-items-center"},n&&(0,t.jsx)(o.Tooltip,{title:c},(0,t.jsx)(o.Button,{icon:!0,size:"sm",type:"tertiary",className:"p-0 border-0"},(0,t.jsx)(o.Icon,{size:e,icon:S(),color:l,className:"border-0"}))),a&&(0,t.jsx)(o.Tooltip,{title:p},(0,t.jsx)(o.Button,{icon:!0,size:"sm",type:"tertiary",className:"p-0 border-0"},(0,t.jsx)(o.Icon,{size:e,icon:A(),color:l,className:"border-0"}))),r&&(0,t.jsx)(o.Tooltip,{title:d},(0,t.jsx)(o.Button,{icon:!0,size:"sm",type:"tertiary",className:"p-0 border-0"},(0,t.jsx)(o.Icon,{size:e,icon:M(),color:l,className:"border-0"}))))},this.getConfirmationDOMs=e=>(0,t.jsx)("div",{className:"confirmation-container mt-4"},(0,t.jsx)(a.SettingRow,{className:"confirmation-item",label:this.formatMessage("checkboxText")}),(0,t.jsx)("div",{className:"confirmation-item"},(0,t.jsx)(o.TextArea,{className:"w-100",height:60,spellCheck:!1,placeholder:this.formatMessage("confirmationRequiredText"),value:this.state.text,"aria-label":this.formatMessage("checkboxText"),onChange:this.onTextChanged,onAcceptValue:this.onTextBLur})),(0,t.jsx)(a.SettingRow,{label:this.formatMessage("fontSize")},(0,t.jsx)(l.InputUnit,{style:{width:"80px"},units:[o.DistanceUnits.PIXEL,o.DistanceUnits.REM],value:this.getFontSize("textSize"),"aria-label":this.formatMessage("fontSize"),onChange:e=>{this.updateCheckboxTextSize("textSize",e.distance+e.unit)}})),e.interactionType!==t.DialogInteractionType.NoButton&&(0,t.jsx)("div",null,(0,t.jsx)(a.SettingRow,{className:"confirmation-item",label:this.formatMessage("checkboxButtonText")}),(0,t.jsx)(a.SettingRow,{className:"confirmation-item"},(0,t.jsx)(o.TextInput,{type:"text",size:"sm",className:"w-100",spellCheck:!1,placeholder:this.formatMessage("confirmationRequiredText"),value:this.state.buttonText,"aria-label":this.formatMessage("checkboxButtonText"),onChange:this.onButtonTextChanged,onAcceptValue:this.onButtonTextBLur})),(0,t.jsx)(a.SettingRow,{label:this.formatMessage("fontSize")},(0,t.jsx)(l.InputUnit,{style:{width:"80px"},units:[o.DistanceUnits.PIXEL,o.DistanceUnits.REM],value:this.getFontSize("buttonTextSize"),"aria-label":this.formatMessage("fontSize"),onChange:e=>{this.updateCheckboxTextSize("buttonTextSize",e.distance+e.unit)}})))),this.defaultText=this.getDefaultText(),this.state={interactionPanel:e.dialogJson.confirmBeforeClose?"confirmation":"prevent",text:(null===(s=this.interactionStyles)||void 0===s?void 0:s.text)||this.defaultText,buttonText:(null===(n=this.interactionStyles)||void 0===n?void 0:n.buttonText)||this.formatMessage("ok")},this.isRTL=(0,t.getAppStore)().getState().appContext.isRTL}componentDidUpdate(e){var t,i,o,s,n,a;const{dialogJson:r}=this.props;r.interactionStyles&&((null===(t=r.interactionStyles)||void 0===t?void 0:t.text)===(null===(i=e.dialogJson.interactionStyles)||void 0===i?void 0:i.text)&&(null===(o=r.interactionStyles)||void 0===o?void 0:o.buttonText)===(null===(s=e.dialogJson.interactionStyles)||void 0===s?void 0:s.buttonText)||(this.defaultText=this.getDefaultText(),this.setState({text:(null===(n=this.interactionStyles)||void 0===n?void 0:n.text)||this.defaultText,buttonText:(null===(a=this.interactionStyles)||void 0===a?void 0:a.buttonText)||this.formatMessage("ok")})),r.confirmBeforeClose!==e.dialogJson.confirmBeforeClose&&this.setState({interactionPanel:r.confirmBeforeClose?"confirmation":"prevent"}))}getDialogBrowserSizeMode(){return this.props.dialogJson.layout[this.props.browserSizeMode]?this.props.browserSizeMode:t.BrowserSizeMode.Large}defaultInteractionStyles(){return{text:"",textSize:"13px",buttonText:"",buttonTextSize:"16px"}}getAppConfig(){return(0,t.getAppStore)().getState().appStateInBuilder&&(0,t.getAppStore)().getState().appStateInBuilder.appConfig||{dialogs:{empty:{}}}}editDialogProperty(e,t){(0,i.getAppConfigAction)().editDialogProperty(this.props.dialogId,e,t).exec()}editDialog(e){(0,i.getAppConfigAction)().editDialog(e).exec()}getPixelFromPercentage(e){return e*parseFloat(e.split("%")[0])/100}getPixelValue(e="0px",t){return e.includes(o.DistanceUnits.PIXEL)?parseFloat(e.split("px")[0]):t*parseFloat(e.split("%")[0])/100}getPixelSizeFromFixedToAnchored(e,i){const o=e.sizeMode[i],s=t.utils.findViewportSize(this.getAppConfig(),this.props.browserSizeMode);let n,a;return n="CUSTOM"===o.widthMode?this.getPixelValue(o.width,s.width):s.width-this.getPixelValue(o.left,s.width)-this.getPixelValue(o.right,s.width),a="CUSTOM"===o.heightMode?this.getPixelValue(o.height,s.height):s.height-this.getPixelValue(o.top,s.height)-this.getPixelValue(o.bottom,s.height),{width:n,height:a}}setDialogMode(e){let i=this.props.dialogJson;if(e===i.mode)return;const o=this.getDialogBrowserSizeMode();if(e===t.DialogMode.Anchored){const{width:e,height:t}=this.getPixelSizeFromFixedToAnchored(i,o);i=i.setIn(["sizeMode",o],{width:e+"px",height:t+"px"}).set("overlayColor",null)}else{const e=i.sizeMode[o];i=i.setIn(["sizeMode",o],{position:t.FixedPosition.MiddleCenter,widthMode:"CUSTOM",heightMode:"CUSTOM",width:e.width,height:e.height}).set("overlayColor",L)}i=i.set("mode",e).set("interactionType",null).set("interactionStyles",null).set("confirmBeforeClose",!0).set("alwaysShowConfirmation",!1).set("blockPage",!0),this.editDialog(i)}handlePositionSizeChangeForFixed(e){const t=this.getDialogBrowserSizeMode(),i=this.props.dialogJson.setIn(["sizeMode",t],e);this.editDialog(i)}handleSizeChangeForAnchored(e,t){const i=this.getDialogBrowserSizeMode(),o=this.props.dialogJson.setIn(["sizeMode",i,e],t.distance.toFixed(2)+t.unit);this.editDialog(o)}getDialogSizeForAnchored(e){const t=this.props.dialogJson.sizeMode[this.getDialogBrowserSizeMode()][e];if(!t)return null;const i=t.indexOf(o.DistanceUnits.PIXEL)>=0?o.DistanceUnits.PIXEL:o.DistanceUnits.PERCENTAGE;return{distance:t.split(i)[0],unit:i}}getFontSize(e){const t=this.interactionStyles[e],i=t.indexOf(o.DistanceUnits.PIXEL)>=0?o.DistanceUnits.PIXEL:o.DistanceUnits.REM;return{distance:t.split(i)[0],unit:i}}setBlockPage(e){let t=this.props.dialogJson;t=t.set("blockPage",e).set("overlayColor",e?L:null).set("closeWhenClickOverlay",!1),this.editDialog(t)}setInteraction(e){let i=this.props.dialogJson;i=i.set("interactionType",e?t.DialogInteractionType.NoButton:null).set("interactionStyles",e?this.defaultInteractionStyles():null).set("confirmBeforeClose",!0).set("alwaysShowConfirmation",!1),this.editDialog(i),this.setState({interactionPanel:e?"confirmation":""})}changeInteractionType(e){let t=this.props.dialogJson;e!==t.interactionType&&(t=t.set("interactionType",e),this.editDialog(t))}setConfirmationType(e){this.defaultText=this.getDefaultText(e),""===this.props.dialogJson.interactionStyles.text&&this.setState({text:this.defaultText});let t=this.props.dialogJson;t=t.set("confirmBeforeClose",e).set("alwaysShowConfirmation",!e),this.editDialog(t),this.setState({interactionPanel:e?"confirmation":"prevent"})}updateInteractionStyles(e,t){this.editDialogProperty("interactionStyles",this.interactionStyles.set(e,t))}updateCheckboxTextSize(e,t){this.interactionStyles[e]!==t&&this.updateInteractionStyles(e,t)}getStyle(){return t.css`
      .mode-radio {
        cursor: pointer;
        &.mode-label-disabled {
          cursor: inherit;
        }
      }
      .mode-label {
        margin-left: 0.5rem;
        cursor: pointer;
        &.mode-label-disabled {
          cursor: inherit;
          color: var(--ref-palette-neutral-800);
        }
      }
      .confirmation-container {
        .confirmation-item{
          margin-top: 0.5rem;
          margin-bottom: 0.5rem;
        }
      }

      .size-setting {
        width: 100%;
        .size-container {
          height: 26px;
          display: flex;
          justify-content: space-between;
          .unit-container {
            display: flex;
            align-items: center;
            width: calc(50% - 10px);

            .size-label{
              color: var(--ref-palette-neutral-900);
              align-items: center;
              margin-bottom: 0;
            }
            .size-input {
              margin-left: 6px;
            }
          }
        }
      }

      .interaction-container {
        .interaction-type-container {
          display: flex;
          justify-content: space-between;
          .jimu-btn {
            padding: 0;
            background-color: var(--ref-palette-neutral-300);
            border: 2px solid transparent;
            &.active{
              border: 2px solid var(--sys-color-primary-main);
            }
          }
        }
      }

    `}render(){const{dialogJson:e}=this.props,s=e.isSplash||i.utils.getPageListByDialogId(this.getAppConfig().pages,e.id).length>0;if(!e.id)return null;const n=e.mode===t.DialogMode.Anchored?[o.DistanceUnits.PIXEL]:[o.DistanceUnits.PIXEL,o.DistanceUnits.PERCENTAGE];this.interactionStyles=e.interactionStyles?e.interactionStyles:this.defaultInteractionStyles();const c=e.sizeMode[this.getDialogBrowserSizeMode()],p=this.formatMessage(e.mode===t.DialogMode.Fixed?"positionAndSize":"size");return(0,t.jsx)("div",{className:"setting-pane widget-builder-page-setting",css:this.getStyle()},(0,t.jsx)(a.SettingSection,{role:"group",title:this.formatMessage("mode"),"aria-label":this.formatMessage("mode")},(0,t.jsx)(a.SettingRow,null,(0,t.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},(0,t.jsx)(o.Tooltip,{placement:"bottom",title:this.formatMessage("fixedModeTip")},(0,t.jsx)("div",{className:"align-items-center d-flex"},(0,t.jsx)(o.Radio,{className:"mode-radio",onChange:()=>{this.setDialogMode(t.DialogMode.Fixed)},name:"dialogMode",checked:e.mode===t.DialogMode.Fixed}),(0,t.jsx)("label",{className:"mode-label",onClick:()=>{this.setDialogMode(t.DialogMode.Fixed)}},this.formatMessage("fixedMode")))))),(0,t.jsx)(a.SettingRow,null,(0,t.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},(0,t.jsx)(o.Tooltip,{placement:"bottom",title:s?this.formatMessage(e.isSplash?"splashDlgWarning":"pageDlgWarning"):this.formatMessage("anchoredModeTip")},(0,t.jsx)("div",{className:"align-items-center d-flex"},(0,t.jsx)(o.Radio,{className:(0,t.classNames)("mode-radio",s?"mode-radio-disabled":""),onChange:()=>{this.setDialogMode(t.DialogMode.Anchored)},name:"dialogMode",checked:e.mode===t.DialogMode.Anchored,disabled:s}),(0,t.jsx)("label",{className:(0,t.classNames)("mode-label",s?"mode-label-disabled":""),onClick:()=>{!s&&this.setDialogMode(t.DialogMode.Anchored)}},this.formatMessage("anchoredMode"))))))),!this.props.lockLayout&&(0,t.jsx)(a.SettingSection,{role:"group","aria-label":p},(0,t.jsx)("div",{className:"d-flex mb-4"},(0,t.jsx)("h6",{className:"flex-lg-grow-1 mb-0 text-truncate title2 hint-paper"},p),this.getBrowserIcons(12)),e.mode===t.DialogMode.Fixed?(0,t.jsx)(l.FixedPositionSize,{fixedPositionSizeJson:c,onChange:e=>{this.handlePositionSizeChangeForFixed(e)}}):(0,t.jsx)("div",{className:"size-setting"},(0,t.jsx)("div",{className:"size-container"},(0,t.jsx)("div",{className:"unit-container",role:"group"},(0,t.jsx)(o.Tooltip,{placement:"bottom",title:this.formatMessage("width")},(0,t.jsx)("label",{className:"size-label"},"W")),(0,t.jsx)(l.InputUnit,{className:"size-input",units:n,value:this.getDialogSizeForAnchored("width"),"aria-label":this.formatMessage("width"),min:0,onChange:e=>{this.handleSizeChangeForAnchored("width",e)}})),(0,t.jsx)("div",{className:"unit-container"},(0,t.jsx)(o.Tooltip,{placement:"bottom",title:this.formatMessage("height")},(0,t.jsx)("label",{className:"size-label"},"H")),(0,t.jsx)(l.InputUnit,{className:"size-input",units:n,value:this.getDialogSizeForAnchored("height"),"aria-label":this.formatMessage("height"),min:0,onChange:e=>{this.handleSizeChangeForAnchored("height",e)}}))))),e.mode===t.DialogMode.Fixed&&(0,t.jsx)(a.SettingSection,{title:(0,t.jsx)("div",{className:"d-flex w-100 align-items-center justify-content-between"},(0,t.jsx)("div",{className:"text-truncate title2 hint-paper"},this.formatMessage("blockPage")),(0,t.jsx)(o.Switch,{"aria-label":this.formatMessage("blockPage"),checked:e.blockPage,onChange:(e,t)=>{this.setBlockPage(t)}}))},e.blockPage&&(0,t.jsx)(a.SettingRow,{label:this.formatMessage("maskColor")},(0,t.jsx)(r.ThemeColorPicker,{specificTheme:this.props.appTheme,value:e.overlayColor,"aria-label":this.formatMessage("maskColor"),onChange:this.updateDialogMask}))),(0,t.jsx)(a.SettingSection,{role:"group",title:this.formatMessage("closeOptions"),"aria-label":this.formatMessage("closeOptions")},(0,t.jsx)(a.SettingRow,null,(0,t.jsx)(o.Label,{check:!0,centric:!0},(0,t.jsx)(o.Checkbox,{style:{cursor:"pointer"},className:"mr-2",checked:e.closeWhenClickOverlay,disabled:e.mode===t.DialogMode.Fixed&&!e.blockPage,onChange:()=>{this.editDialogProperty("closeWhenClickOverlay",!e.closeWhenClickOverlay)}}),this.formatMessage("clickOutside"))),e.mode===t.DialogMode.Fixed&&(0,t.jsx)("div",{className:"mt-4"},(0,t.jsx)(a.SettingRow,{label:this.formatMessage("interaction")},(0,t.jsx)(o.Switch,{"aria-label":this.formatMessage("interaction"),checked:!!e.interactionType,onChange:(e,t)=>{this.setInteraction(t)}})),e.interactionType&&(0,t.jsx)("div",{className:"interaction-container mt-4",role:"group","aria-label":this.formatMessage("style")},(0,t.jsx)(a.SettingRow,{className:"confirmation-item",label:this.formatMessage("style")}),(0,t.jsx)("div",{className:"interaction-type-container mt-4 mb-4"},(0,t.jsx)(o.Tooltip,{title:this.formatMessage("interactionStyle1"),placement:"bottom"},(0,t.jsx)(o.Button,{icon:!0,size:"sm",type:"tertiary","aria-pressed":e.interactionType===t.DialogInteractionType.NoButton,onClick:()=>{this.changeInteractionType(t.DialogInteractionType.NoButton)},active:e.interactionType===t.DialogInteractionType.NoButton},(0,t.jsx)(o.Icon,{width:65,height:26,icon:N(),flip:this.isRTL?"horizontal":null}))),(0,t.jsx)(o.Tooltip,{title:this.formatMessage("interactionStyle2"),placement:"bottom"},(0,t.jsx)(o.Button,{icon:!0,size:"sm",type:"tertiary","aria-pressed":e.interactionType===t.DialogInteractionType.ButtonInline,onClick:()=>{this.changeInteractionType(t.DialogInteractionType.ButtonInline)},active:e.interactionType===t.DialogInteractionType.ButtonInline},(0,t.jsx)(o.Icon,{width:65,height:26,icon:k(),flip:this.isRTL?"horizontal":null}))),(0,t.jsx)(o.Tooltip,{title:this.formatMessage("interactionStyle3"),placement:"bottom"},(0,t.jsx)(o.Button,{icon:!0,size:"sm",type:"tertiary","aria-pressed":e.interactionType===t.DialogInteractionType.ButtonBlock,onClick:()=>{this.changeInteractionType(t.DialogInteractionType.ButtonBlock)},active:e.interactionType===t.DialogInteractionType.ButtonBlock},(0,t.jsx)(o.Icon,{width:65,height:26,icon:O(),flip:this.isRTL?"horizontal":null})))),(0,t.jsx)("div",{className:"p-0 m-0",role:"group","aria-label":this.formatMessage("type")},(0,t.jsx)(a.SettingRow,{className:"confirmation-item",label:this.formatMessage("type")}),(0,t.jsx)("div",{role:"radiogroup",className:"mt-2"},(0,t.jsx)(o.CollapsableRadio,{name:"collapsable-confirmation-radio",label:this.formatMessage("confirmation"),role:"group","aria-label":this.formatMessage("confirmation"),wrapLabel:!0,disableActionForUnchecked:!0,checked:e.confirmBeforeClose,isOpen:"confirmation"===this.state.interactionPanel,onRequestOpen:()=>{this.setState({interactionPanel:"confirmation"})},onRequestClose:()=>{this.setState({interactionPanel:""})},onCheckedChange:()=>{this.setConfirmationType(!0)}},(0,t.jsx)("div",{className:"pl-1 pr-1 mb-2"},this.getConfirmationDOMs(e),(0,t.jsx)(a.SettingRow,{className:"mt-2 mb-4"},(0,t.jsx)(o.Label,{check:!0,centric:!0},(0,t.jsx)(o.Checkbox,{style:{cursor:"pointer"},className:"mr-2",checked:e.alwaysShowConfirmation,onChange:()=>{this.editDialogProperty("alwaysShowConfirmation",!e.alwaysShowConfirmation)}}),this.formatMessage("alwaysShow"))))),(0,t.jsx)(o.CollapsableRadio,{name:"collapsable-confirmation-radio",label:this.formatMessage("preventDisplayAgain"),role:"group","aria-label":this.formatMessage("preventDisplayAgain"),wrapLabel:!0,disableActionForUnchecked:!0,checked:!e.confirmBeforeClose,isOpen:"prevent"===this.state.interactionPanel,onRequestOpen:()=>{this.setState({interactionPanel:"prevent"})},onRequestClose:()=>{this.setState({interactionPanel:""})},onCheckedChange:()=>{this.setConfirmationType(!1)}},(0,t.jsx)("div",{className:"pl-1 pr-1 mb-2"},this.getConfirmationDOMs(e)))))))),(0,t.jsx)(a.SettingSection,{role:"group",title:this.formatMessage("animation"),"aria-label":this.formatMessage("animation")},(0,t.jsx)(a.SettingRow,null,(0,t.jsx)(l.AnimationSettingComponent,{contentId:e.id,effectSetting:e.effect,oneByOneSetting:e.oneByOneEffect,onSettingChange:this.onEffectSettingChange,previewEnabled:!0,supportAsOne:!0,supportOneByOne:!0,onPreviewClicked:this.previewAnimation,formatMessage:this.formatMessage}))),(0,t.jsx)(l.ThemeBackgroundSection,{background:this.getDialogBackgroud(),onChange:this.updateDialogBackgroud}),(0,t.jsx)(l.ThemeBorderSection,{border:e.border,borderRadius:e.borderRadius,onBorderChange:this.updateBorder,onBorderRasiusChange:this.updateBorderRadius}),(0,t.jsx)(l.ThemeBoxShadowSection,{value:e.boxShadow,onChange:this.updateShadow}))}}const E=t.ReactRedux.connect(((e,t)=>{var i,o,s;return{lockLayout:null===(s=null===(o=null===(i=null==e?void 0:e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===o?void 0:o.forBuilderAttributes)||void 0===s?void 0:s.lockLayout,dialogJson:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.dialogs[t.dialogId]||{}}}))(D);var z=m(1888),_=m(2838),U=m.n(_),W=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const F=e=>{const i=window.SVG,{className:o}=e,s=W(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:U()},s)):t.React.createElement("svg",Object.assign({className:n},s))};var V=m(6499),H=m.n(V),G=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const $=e=>{const i=window.SVG,{className:o}=e,s=G(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:H()},s)):t.React.createElement("svg",Object.assign({className:n},s))};var Z=m(6490),J=m.n(Z),Q=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const Y=e=>{const i=window.SVG,{className:o}=e,s=Q(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:J()},s)):t.React.createElement("svg",Object.assign({className:n},s))},K={value:"",openType:a.OpenTypes.NewWindow,linkType:t.LinkType.WebAddress};class X extends t.React.PureComponent{constructor(e){super(e),this.linkSettingTrigger=t.React.createRef(),this.getCurrentPageName=e=>{const{appConfig:t,pageId:i}=e;return t.pages[i].label||""},this.openBrowseImage=()=>{const e=this.fileInput.current.files;if(!e||!e[0])return;const t=new FileReader;t.readAsDataURL(e[0]),t.onload=e=>{const t=e.target;this.changeIcon(t.result)}},this.setImageUrl=()=>{const{currentImgUrlInput:e}=this.state;""!==e&&(this.setState({isSetImageUrl:!1}),this.changeIcon(e))},this.getPageType=e=>{const{pages:t}=this.props.appConfig;for(const i in t){const o=t[i];if(o.id===e)return o}return{}},this.settingLinkConfirm=e=>{this.setState({isShowLinkSetting:!1}),(e.value||""===e.value)&&this.setState({currentUrl:e.value}),this.changeUrl(e.value,e.openType)},this.changeUrl=(e,t)=>{(0,i.getAppConfigAction)().editPageProperty(this.props.pageId,"linkUrl",e||"#").editPageProperty(this.props.pageId,"openTarget",t).exec(),K.value=e,K.openType=t},this.changeIcon=e=>{(0,i.getAppConfigAction)().editPageProperty(this.props.pageId,"icon",e).exec()},this.formatMessage=e=>this.props.formatMessage(e),this.state={isSetImageUrl:!1,currentImgUrlInput:"",isShowLinkSetting:!1,currentUrl:this.props.currentUrl||""},this.fileInput=t.React.createRef()}resetLinkParam(){K.value="",K.openType=a.OpenTypes.NewWindow;const e=this.props.appConfig.pages[this.props.pageId];e&&e.linkUrl&&"#"!==e.linkUrl&&(K.value=e.linkUrl),e&&e.openTarget&&(K.openType=e.openTarget)}getStyle(e){return t.css`
    .image-setting-input {
      opacity: 0;
      position: absolute;
      left: 88px;
      width: 70px !important;
      height: 30px !important;
    }
    `}render(){var e;const{isSetImageUrl:i,currentImgUrlInput:s,isShowLinkSetting:n}=this.state;return this.resetLinkParam(),(0,t.jsx)("div",{className:"setting-pane widget-builder-page-setting widget-setting-image"},(0,t.jsx)(a.SettingSection,null,i&&(0,t.jsx)(a.SettingRow,null,(0,t.jsx)("div",{className:"d-flex flex-row justify-content-around border w-100 align-items-center"},(0,t.jsx)(o.TextInput,{className:"border-0 w-100",value:s,placeholder:`${this.formatMessage("urlIsHere")}...`,onChange:e=>{this.setState({currentImgUrlInput:e.target.value})},onKeyUp:this.setImageUrl}),(0,t.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:this.setImageUrl},(0,t.jsx)($,{className:"float-right"})),(0,t.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:()=>{this.setState({isSetImageUrl:!1})}},(0,t.jsx)(F,{className:"float-right"})))),(0,t.jsx)(a.SettingRow,null,(0,t.jsx)(o.Button,{className:"w-100 text-default set-link-btn",onClick:()=>{this.setState({isShowLinkSetting:!n})},ref:this.linkSettingTrigger},(0,t.jsx)(Y,{className:"mr-4"}),"Set link"))),n&&(0,t.jsx)(a.LinkSelectorSidePopper,{isOpen:n,isLinkPageSetting:!0,linkParam:(0,t.Immutable)(K),onSettingCancel:()=>{this.setState({isShowLinkSetting:!1})},onSettingConfirm:this.settingLinkConfirm,trigger:null===(e=this.linkSettingTrigger)||void 0===e?void 0:e.current}))}}X.mapExtraStateProps=e=>({pageId:e.appRuntimeInfo.currentPageId});const q=(0,z.withTheme)(X);class ee extends t.React.PureComponent{constructor(e){super(e),this.getCurrentPageName=e=>{const{appConfig:t,pageId:i}=e;return t.pages[i].label||""},this.openBrowseImage=()=>{const e=this.fileInput.current.files;if(!e||!e[0])return;const t=new FileReader;t.readAsDataURL(e[0]),t.onload=e=>{const t=e.target;this.changeIcon(t.result)}},this.setImageUrl=()=>{const{currentImgUrlInput:e}=this.state;""!==e&&(this.setState({isSetImageUrl:!1}),this.changeIcon(e))},this.formatMessage=e=>this.props.formatMessage(e),this.getPageType=e=>{const{pages:t}=this.props.appConfig;for(const i in t){const o=t[i];if(o.id===e)return o}return{}},this.changeIcon=e=>{(0,i.getAppConfigAction)().editPageProperty(this.props.pageId,"icon",e).exec()},this.state={isSetImageUrl:!1,currentImgUrlInput:""},this.fileInput=t.React.createRef()}getStyle(){return t.css`
    .image-setting-input {
      opacity: 0;
      position: absolute;
      left: 88px;
      width: 70px !important;
      height: 30px !important;
    }
    `}render(){const{isSetImageUrl:e,currentImgUrlInput:i}=this.state;return(0,t.jsx)("div",{className:"setting-pane widget-builder-page-setting widget-setting-image"},(0,t.jsx)(a.SettingSection,null,(0,t.jsx)(o.TextInput,{placeholder:this.formatMessage("noSettingOptions"),disabled:!0,style:{border:0,background:"transparent",userSelect:"none"}}),e&&(0,t.jsx)(a.SettingRow,null,(0,t.jsx)("div",{className:"d-flex flex-row justify-content-around border w-100 align-items-center"},(0,t.jsx)(o.TextInput,{className:"border-0 w-100",value:i,placeholder:`${this.formatMessage("urlIsHere")}...`,onChange:e=>{this.setState({currentImgUrlInput:e.target.value})},onKeyUp:this.setImageUrl}),(0,t.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:this.setImageUrl},(0,t.jsx)($,{className:"float-right"})),(0,t.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:()=>{this.setState({isSetImageUrl:!1})}},(0,t.jsx)(F,{className:"float-right"}))))))}}ee.mapExtraStateProps=e=>({pageId:e.appRuntimeInfo.currentPageId});const te=ee;var ie=m(8640),oe=m(4651),se=m.n(oe),ne=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const ae=e=>{const i=window.SVG,{className:o}=e,s=ne(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:se()},s)):t.React.createElement("svg",Object.assign({className:n},s))};var re=m(2606),le=m.n(re),ce=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const pe=e=>{const i=window.SVG,{className:o}=e,s=ce(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:le()},s)):t.React.createElement("svg",Object.assign({className:n},s))};class de extends t.React.PureComponent{constructor(e){super(e),this.formatMessage=e=>this.props.formatMessage(e),this._enableEditing=e=>{e.stopPropagation(),this.setState({isEditingLabel:!0})},this._handleLabelInputBlur=e=>{const t=e.target.value,{valid:i}=this._checkLabel(t);i?this.setState({isEditingLabel:!1}):this.setState({isEditingLabel:!1,currentLabel:this.props.view.label})},this._handleLabelInputEnter=e=>{if("Enter"===e.key){const e=this.inputRef.value,{valid:t}=this._checkLabel(e);t&&this.setState({isEditingLabel:!1})}},this._onLabelChange=e=>{this.setState({currentLabel:e.target.value})},this._onLabelUpdate=e=>{if(e&&e.trim().length>0){const{view:t}=this.props;(0,i.getAppConfigAction)().editViewProperty(t.id,"label",e).exec()}else this.setState({currentLabel:this.props.view.label})},this._checkLabel=e=>{if(e.includes(","))return{valid:!1,msg:this.props.formatMessage("noCommaInLabel")};const{view:t}=this.props,o=(0,i.getAppConfigAction)().appConfig;return i.appConfigUtils.isLabelDuplicated(o,"view",t.id,e)?{valid:!1,msg:this.props.formatMessage("duplicatedLabel")}:{valid:!0}},this.toggleDropDown=e=>{null==e||e.stopPropagation(),this.setState({isDropDownOpen:!this.state.isDropDownOpen})},this.state={currentLabel:this.props.view.label,isEditingLabel:!1,isDropDownOpen:!1},this.dropDownItems=[(0,t.Immutable)({label:this.formatMessage("rename"),event:this._enableEditing.bind(this),visible:!0,a11yFocusBack:!1}),(0,t.Immutable)({label:this.formatMessage("duplicate"),event:this._duplicateView.bind(this),visible:!0}),(0,t.Immutable)({label:this.formatMessage("sectionDelete"),event:this._removeView.bind(this),visible:!0})],this.readonlyDropDownItems=[this.dropDownItems[0]],this.dropDownItemsWithoutDelete=[this.dropDownItems[0],this.dropDownItems[1]]}componentDidUpdate(e,t){!t.isEditingLabel&&this.state.isEditingLabel&&this._focusInput(),e.view.label!==this.props.view.label&&this.setState({currentLabel:this.props.view.label})}_removeView(){const{view:e,sectionId:t,selected:o}=this.props,s=(0,i.getAppConfigAction)().appConfig.sections[t].views;if(o){const o=s.indexOf(e.id);let n;n=o>0?s[o-1]:s[1],i.builderAppSync.publishSectionNavInfoToApp(t,{currentViewId:n,useProgress:!1})}(0,i.getAppConfigAction)().removeView(e.id,t).exec()}_duplicateView(){if(!this.props.view)return;const e=(0,i.getAppConfigAction)(),o=e.duplicateView(this.props.view.id,this.props.sectionId,!0);e.exec(),t.lodash.defer((()=>{this.props.onSelect(o.id)}))}_focusInput(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())}_getStyle(){return t.css`
    padding: 2px;
    cursor: pointer;
    position: relative;
    .drop-down {
      text-align:right;
      .popover{
        .popover-inner {
          box-shadow: 0 0 0;
        }
      }
    }
    .view-item-drag:hover {
      cursor: pointer !important;
    }
    .label-con {
      max-width: 9rem;
    }
    .label-input {
      max-width: 9rem;
    }
    .view-item-drag {
      z-index: 1;
      background-color: transparent;
      box-shadow: none;
    }
    `}render(){const{editable:e,view:i}=this.props,{isEditingLabel:s,currentLabel:n}=this.state,a=e?this.props.canRemove?this.dropDownItems:this.dropDownItemsWithoutDelete:this.readonlyDropDownItems;return(0,t.jsx)("div",{css:this._getStyle(),className:"d-flex justify-content-between flex-grow-1","data-testid":"viewItem"},(0,t.jsx)("div",{className:"w-100 view-item-drag d-flex justify-content-start"},(0,t.jsx)("div",{className:"align-items-center d-flex",css:t.css`width: 22px;`},i.icon?(0,t.jsx)(o.Icon,{icon:i.icon.svg}):(0,t.jsx)(pe,null)),(0,t.jsx)("div",{className:"d-flex align-items-center"},!s&&(0,t.jsx)("div",{title:n,className:"label-con text-truncate",onDoubleClick:this._enableEditing},n),s&&(0,t.jsx)("div",null,(0,t.jsx)(o.TextInput,{title:n,className:"label-input",type:"text",value:n,ref:e=>{this.inputRef=e},checkValidityOnChange:this._checkLabel,checkValidityOnAccept:this._checkLabel,onChange:this._onLabelChange,onAcceptValue:this._onLabelUpdate,onBlur:this._handleLabelInputBlur,onKeyUp:this._handleLabelInputEnter}))),(0,t.jsx)("div",{className:"drop-down d-flex toc-item-icon ml-auto"},(0,t.jsx)("div",{title:this.formatMessage("options")},(0,t.jsx)(o.Dropdown,{direction:"down",size:"sm",useKeyUpEvent:!0,toggle:this.toggleDropDown,isOpen:this.state.isDropDownOpen},(0,t.jsx)(o.DropdownButton,{arrow:!1,icon:!0,onClick:this.toggleDropDown,type:"tertiary"},(0,t.jsx)(ae,{size:"s"})),(0,t.jsx)(o.DropdownMenu,null,a.map(((e,i)=>(0,t.jsx)(o.DropdownItem,{key:i,onClick:e.event,a11yFocusBack:e.a11yFocusBack},e.label)))))))))}}var ge=m(5809);class he extends t.React.PureComponent{constructor(){super(...arguments),this.getEchoBackground=()=>{var e;const{view:t,appTheme:i}=this.props,s=t.backgroundPosition?t.backgroundPosition.toUpperCase():"";let n,a;n=null==t.backgroundColor&&i?null===(e=null==i?void 0:i.sys.color.surface)||void 0===e?void 0:e.background:""===t.backgroundColor?"rgba(0,0,0,0)":t.backgroundColor?t.backgroundColor:"",t.backgroundIMage&&(a="object"==typeof t.backgroundIMage?t.backgroundIMage:{});return{fillType:s?o.FillType[s]:o.FillType.FIT,color:n,image:a}},this.onBackgroundStyleChange=e=>{this.setState({config:e});const t=e.image?e.image:{},{view:o}=this.props;(0,i.getAppConfigAction)().editViewProperty(o.id,"backgroundPosition",e.fillType).editViewProperty(o.id,"backgroundColor",e.color?e.color:null).editViewProperty(o.id,"backgroundIMage",t).exec()},this.onIconChange=e=>{const{view:t}=this.props;(0,i.getAppConfigAction)().editViewProperty(t.id,"icon",e).exec()},this.onLazyLoadChange=e=>{const{view:t}=this.props;(0,i.getAppConfigAction)().editViewProperty(t.id,"lazyLoad",e.target.checked).exec()}}render(){var e,i;const{view:s}=this.props;if(!s)return null;const n=[{svg:le(),properties:{filename:this.props.formatMessage("view")}}];return(0,t.jsx)("div",{role:"group","aria-label":s.label},(0,t.jsx)(a.SettingSection,null,(0,t.jsx)(a.SettingRow,{role:"group",label:this.props.formatMessage("icon"),"aria-label":this.props.formatMessage("icon")},(0,t.jsx)(ge.IconPicker,{previewOptions:{color:!0},configurableOption:"none",className:"flex-none",icon:null!==(e=s.icon)&&void 0!==e?e:n[0],onChange:this.onIconChange,customIcons:n,setButtonUseColor:!1,hideRemove:!0}))),(0,t.jsx)(a.SettingSection,{title:this.props.formatMessage("background")},(0,t.jsx)(a.SettingRow,{role:"group","aria-label":this.props.formatMessage("background"),className:"background-setting-con",flow:"wrap"},(0,t.jsx)(l.BackgroundSetting,{background:this.getEchoBackground(),onChange:e=>{this.onBackgroundStyleChange(e)}}))),(0,t.jsx)(a.SettingSection,null,(0,t.jsx)(a.SettingRow,null,(0,t.jsx)("div",{className:"d-flex align-items-center w-100"},(0,t.jsx)("label",null,(0,t.jsx)(o.Checkbox,{checked:null!==(i=s.lazyLoad)&&void 0!==i&&i,onChange:this.onLazyLoadChange}),(0,t.jsx)("span",{className:"ml-2"},this.props.formatMessage("lazyLoading"))),(0,t.jsx)(o.Tooltip,{placement:"bottom",showArrow:!0,title:this.props.formatMessage("lazyLoadingTip")},(0,t.jsx)(o.Button,{className:"ml-auto",size:"sm",type:"tertiary",icon:!0},(0,t.jsx)(x,null)))))))}}var ue=m(2491),me=m.n(ue),fe=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const ve=e=>{const i=window.SVG,{className:o}=e,s=fe(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:me()},s)):t.React.createElement("svg",Object.assign({className:n},s))};var xe=m(3593),we=m.n(xe),Ie=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const ye=e=>{const i=window.SVG,{className:o}=e,s=Ie(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:we()},s)):t.React.createElement("svg",Object.assign({className:n},s))};var be=m(9566),Se=m.n(be),Ce=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const Ae=e=>{const i=window.SVG,{className:o}=e,s=Ce(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:Se()},s)):t.React.createElement("svg",Object.assign({className:n},s))};var je=m(8081),Me=m.n(je),Te=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const Ne=e=>{const i=window.SVG,{className:o}=e,s=Te(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:Me()},s)):t.React.createElement("svg",Object.assign({className:n},s))};class Pe extends t.React.PureComponent{constructor(){super(...arguments),this.snapLeft=()=>{this.props.onDirectionChange("l")},this.snapRight=()=>{this.props.onDirectionChange("r")},this.snapTop=()=>{this.props.onDirectionChange("t")},this.snapBottom=()=>{this.props.onDirectionChange("b")}}render(){const{direction:e,formatMessage:i}=this.props;return(0,t.jsx)(o.ButtonGroup,{size:"sm"},(0,t.jsx)(o.Tooltip,{placement:"bottom",title:g.utils.isRTL()?i("right"):i("left")},(0,t.jsx)(o.Button,{icon:!0,active:"l"===e,"aria-pressed":"l"===e,onClick:this.snapLeft},(0,t.jsx)(ve,{size:"s",autoFlip:!0}))),(0,t.jsx)(o.Tooltip,{placement:"bottom",title:i("top")},(0,t.jsx)(o.Button,{icon:!0,active:"t"===e,"aria-pressed":"t"===e,onClick:this.snapTop},(0,t.jsx)(ye,{size:"s"}))),(0,t.jsx)(o.Tooltip,{placement:"bottom",title:g.utils.isRTL()?i("left"):i("right")},(0,t.jsx)(o.Button,{icon:!0,active:"r"===e,"aria-pressed":"r"===e,onClick:this.snapRight},(0,t.jsx)(Ae,{size:"s",autoFlip:!0}))),(0,t.jsx)(o.Tooltip,{placement:"bottom",title:i("bottom")},(0,t.jsx)(o.Button,{icon:!0,active:"b"===e,"aria-pressed":"b"===e,onClick:this.snapBottom},(0,t.jsx)(Ne,{size:"s"}))))}}var ke=m(3662),Re=m.n(ke),Oe=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const Be=e=>{const i=window.SVG,{className:o}=e,s=Oe(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:Re()},s)):t.React.createElement("svg",Object.assign({className:n},s))},Le=[o.DistanceUnits.PIXEL];class De extends t.React.PureComponent{constructor(e){super(e),this._addView=()=>{const{section:e}=this.props,o=(0,i.getAppConfigAction)(),s=o.addView(e.id);o.exec(),t.lodash.defer((()=>{this._selectView(s)}))},this._duplicateView=()=>{const{activeViewId:e,sectionId:o}=this.props,s=(0,i.getAppConfigAction)(),n=s.duplicateView(e,o,!0);s.exec(),t.lodash.defer((()=>{this._selectView(n.id)}))},this._showViewList=()=>{this.setState({isShowViewList:!0})},this._hideViewList=()=>{this.setState({isShowViewList:!1})},this._selectView=(e,t=!1)=>{const{section:o,activeViewId:s}=this.props;s!==e&&i.builderAppSync.publishSectionNavInfoToApp(o.id,{previousViewId:this.props.activeViewId,currentViewId:e,useProgress:!1}),t&&this.setState({showViewSetting:!0})},this.getStyle=()=>t.css`
      .toc-dropzone {
        margin-top: 0.5rem;
      }
      .toc-dropzone .jimu-widget-setting--row.row{
        margin-top: 0;
      }
      .jimu-widget-setting--row-label{
        color:${this.props.theme.ref.palette.neutral[1e3]};
      }
    `,this.hideViewSetting=()=>{this.setState({showViewSetting:!1})},this.onAutoPlayChanged=e=>{const{section:t}=this.props;(0,i.getAppConfigAction)().editSectionProperty(t.id,"autoPlay",e.target.checked).exec()},this.onLoopChanged=e=>{const{section:t}=this.props;(0,i.getAppConfigAction)().editSectionProperty(t.id,"loop",e.target.checked).exec()},this.onIntervalChanged=e=>{const t=+e;if(t>=1){const{section:e}=this.props;(0,i.getAppConfigAction)().editSectionProperty(e.id,"interval",t).exec()}},this.updateNav=(e,t,o)=>{const{section:s}=this.props;(0,i.getAppConfigAction)().editSectionProperty(s.id,`${e}.${t}`,o).exec()},this.viewListRef=t.React.createRef(),this.popperRef=t.React.createRef(),this.state={showViewSetting:!1,isShowViewList:!0}}render(){var e,s,n,r,c,p,d,h,u,m,f,v,x,w,I,y,b,S,C;const{section:A,views:j,theme:M,dispatch:T,activeViewId:N,editable:P,formatMessage:k}=this.props,{showViewSetting:R}=this.state;if(!A)return null;const O=t.css`
      cursor:pointer;
      margin-top: ${t.polished.rem(-8)};

      .toggle-view {
        transform: ${this.state.isShowViewList?null:"rotate(180deg)"};
      }
    `,B=j.find((e=>e.id===N)),L=null!==(s=null===(e=A.dotsNav)||void 0===e?void 0:e.position)&&void 0!==s?s:"b";return(0,t.jsx)("div",{className:"flexbox-layout-setting h-100",css:this.getStyle()},(0,t.jsx)("div",{className:"h-100 w-100"},(0,t.jsx)(a.SettingCollapse,{css:t.css`border-bottom: 1px solid var(--ref-palette-neutral-700)`,label:k("views"),className:"p-4",isOpen:this.state.isShowViewList,onRequestOpen:this._showViewList,onRequestClose:this._hideViewList},(0,t.jsx)(a.SettingRow,{className:"mt-4"},(0,t.jsx)(o.Button,{ref:this.popperRef,css:O,className:"w-100",type:"primary",onClick:this._addView,title:k("newView")},(0,t.jsx)(Be,{className:"mr-0"}),(0,t.jsx)("span",{className:"ml-2"},k("newView")))),(0,t.jsx)("div",{ref:this.viewListRef,className:"toc-dropzone"},(0,t.jsx)(ie.List,{size:"sm",className:"selected-fields-list",itemsJson:Array.from(j).map(((e,t)=>({itemStateDetailContent:e,itemStateChecked:N===e.id,itemKey:`${t}`}))),dndEnabled:!0,onUpdateItem:(e,t)=>{const{itemJsons:o}=t.props,[,s]=o,n=s.map((e=>e.itemStateDetailContent));e.updateType===ie.TreeItemActionType.HandleDidDrop&&(0,i.getAppConfigAction)().editSectionProperty(A.id,"views",n.map((e=>e.id))).exec(),this._selectView(N)},onClickItemBody:(e,t)=>{const{itemJsons:i}=t.props,o=i[0].itemStateDetailContent;this._selectView(o.id,!0)},overrideItemBlockInfo:({itemBlockInfo:e})=>({name:ie.TreeItemActionType.RenderOverrideItem,children:[{name:ie.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:ie.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:ie.TreeItemActionType.RenderOverrideItemBody,children:[{name:ie.TreeItemActionType.RenderOverrideItemDragHandle},{name:ie.TreeItemActionType.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(e,i)=>{const{itemJsons:o}=i.props,s=o[0],n=s.itemStateDetailContent,a=+s.itemKey;return(0,t.jsx)(de,{index:a,canRemove:j.length>1,formatMessage:k,isLastItem:a===j.length-1,dispatch:T,sectionId:A.id,theme:M,view:n,isFirstItem:0===a,onSelect:e=>{this._selectView(e,!0)},selected:N===n.id,editable:P})}}))),(0,t.jsx)(a.SettingSection,{role:"group","aria-label":k("tools"),title:k("tools")},(0,t.jsx)(a.SettingRow,{label:k("arrows")},(0,t.jsx)(o.Switch,{"aria-label":k("arrows"),checked:null===(n=A.arrowsNav)||void 0===n?void 0:n.visible,onChange:()=>{var e,t;this.updateNav("arrowsNav","visible",!(null!==(t=null===(e=A.arrowsNav)||void 0===e?void 0:e.visible)&&void 0!==t&&t))}})),(null===(r=A.arrowsNav)||void 0===r?void 0:r.visible)&&(0,t.jsx)(t.React.Fragment,null,(0,t.jsx)(a.SettingRow,{role:"group",label:k("direction"),"aria-label":k("direction")},(0,t.jsx)(a.DirectionSelector,{size:"sm",vertical:"v"===A.arrowsNav.direction,onChange:e=>{this.updateNav("arrowsNav","direction",e?"v":"h")}})),(0,t.jsx)(a.SettingRow,{role:"group",label:k("size"),"aria-label":k("size"),flow:"wrap"},(0,t.jsx)(o.Slider,{min:5,max:100,step:1,value:null!==(c=A.arrowsNav.size)&&void 0!==c?c:24,css:t.css`width: 50%`,"aria-label":k("size"),onChange:e=>{this.updateNav("arrowsNav","size",e.target.value)}}),(0,t.jsx)(l.InputUnit,{min:5,max:100,units:Le,value:`${null!==(p=A.arrowsNav.size)&&void 0!==p?p:24}px`,onChange:e=>{this.updateNav("arrowsNav","size",e.distance)},css:t.css`width: 40%; margin-left: auto;`})),(0,t.jsx)(a.SettingRow,{role:"group",label:k("offset"),"aria-label":k("offset"),flow:"wrap"},(0,t.jsx)(o.Slider,{min:-100,max:100,step:1,value:null!==(d=A.arrowsNav.offset)&&void 0!==d?d:0,css:t.css`width: 50%`,"aria-label":k("offset"),onChange:e=>{this.updateNav("arrowsNav","offset",e.target.value)}}),(0,t.jsx)(l.InputUnit,{min:-100,max:100,units:Le,value:`${null!==(h=A.arrowsNav.offset)&&void 0!==h?h:0}px`,onChange:e=>{this.updateNav("arrowsNav","offset",e.distance)},css:t.css`width: 40%; margin-left: auto;`}))),(0,t.jsx)(a.SettingRow,{label:k("dots")},(0,t.jsx)(o.Switch,{checked:null===(u=A.dotsNav)||void 0===u?void 0:u.visible,"aria-label":k("dots"),onChange:()=>{var e,t;this.updateNav("dotsNav","visible",!(null!==(t=null===(e=A.dotsNav)||void 0===e?void 0:e.visible)&&void 0!==t&&t))}})),(null===(m=A.dotsNav)||void 0===m?void 0:m.visible)&&(0,t.jsx)(t.React.Fragment,null,(0,t.jsx)(a.SettingRow,{role:"group",label:k("position"),"aria-label":k("position")},(0,t.jsx)(Pe,{direction:L,formatMessage:k,onDirectionChange:e=>{this.updateNav("dotsNav","position",e)}})),(0,t.jsx)(a.SettingRow,{role:"group",label:k("size"),"aria-label":k("size"),flow:"wrap"},(0,t.jsx)(o.Slider,{min:5,max:30,step:1,value:null!==(f=A.dotsNav.size)&&void 0!==f?f:8,css:t.css`width: 50%`,"aria-label":k("size"),onChange:e=>{this.updateNav("dotsNav","size",e.target.value)}}),(0,t.jsx)(l.InputUnit,{min:5,max:30,units:Le,value:`${null!==(v=A.dotsNav.size)&&void 0!==v?v:8}px`,onChange:e=>{this.updateNav("dotsNav","size",e.distance)},css:t.css`width: 40%; margin-left: auto;`})),(0,t.jsx)(a.SettingRow,{role:"group",label:k("offset"),"aria-label":k("offset"),flow:"wrap"},(0,t.jsx)(o.Slider,{min:-100,max:100,step:1,value:null!==(x=A.dotsNav.offset)&&void 0!==x?x:50,css:t.css`width: 50%`,"aria-label":k("offset"),onChange:e=>{this.updateNav("dotsNav","offset",e.target.value)}}),(0,t.jsx)(l.InputUnit,{min:-100,max:100,units:Le,value:`${null!==(w=A.dotsNav.offset)&&void 0!==w?w:50}px`,onChange:e=>{this.updateNav("dotsNav","offset",e.distance)},css:t.css`width: 40%; margin-left: auto;`})),(0,t.jsx)(a.SettingRow,{role:"group",label:k("spacing"),"aria-label":k("spacing"),flow:"wrap"},(0,t.jsx)(o.Slider,{min:0,max:30,step:1,value:null!==(I=A.dotsNav.spacing)&&void 0!==I?I:10,css:t.css`width: 50%`,"aria-label":k("spacing"),onChange:e=>{this.updateNav("dotsNav","spacing",e.target.value)}}),(0,t.jsx)(l.InputUnit,{min:0,max:30,units:Le,value:`${null!==(y=A.dotsNav.spacing)&&void 0!==y?y:10}px`,onChange:e=>{this.updateNav("dotsNav","spacing",e.distance)},css:t.css`width: 40%; margin-left: auto;`})))),(0,t.jsx)(a.SettingSection,{role:"group"},(0,t.jsx)(a.SettingRow,{label:k("autoPlay")},(0,t.jsx)(o.Switch,{"aria-label":k("autoPlay"),checked:A.autoPlay,onChange:this.onAutoPlayChanged})),A.autoPlay&&(0,t.jsx)(a.SettingRow,{label:k("interval")},(0,t.jsx)(o.NumericInput,{size:"sm",css:t.css`width: 4rem`,value:null!==(b=A.interval)&&void 0!==b?b:g.DEFAULT_AUTOPLAY_INTERVAL,min:1,max:3600,"aria-label":k("interval"),onAcceptValue:this.onIntervalChanged})),A.autoPlay&&(0,t.jsx)(a.SettingRow,null,(0,t.jsx)(o.Label,{check:!0},(0,t.jsx)(o.Checkbox,{checked:null===(S=A.loop)||void 0===S||S,onChange:this.onLoopChanged,className:"mr-2"}),k("loop")))),(0,t.jsx)(a.SidePopper,{isOpen:R,position:"right",toggle:this.hideViewSetting,trigger:null===(C=this.viewListRef)||void 0===C?void 0:C.current,title:null==B?void 0:B.label,backToFocusNode:this.popperRef.current},(0,t.jsx)(he,{formatMessage:k,appTheme:this.props.appTheme,view:B}))))}}const Ee=t.ReactRedux.connect(((e,i)=>{var o,s,n,a,r,l,c,p,d,g;const{sectionId:h}=i,{appConfig:u}=e.appStateInBuilder,m=u.sections[h];if(!m)return null;const f=m.views.map((e=>u.views[e])),v=null===(n=null===(s=null===(o=e.appStateInBuilder)||void 0===o?void 0:o.appRuntimeInfo)||void 0===s?void 0:s.sectionNavInfos)||void 0===n?void 0:n[m.id],x=null!==(a=null==v?void 0:v.currentViewId)&&void 0!==a?a:m.views[0],w=null!==(p=null===(c=null===(l=null===(r=e.appStateInBuilder)||void 0===r?void 0:r.appConfig)||void 0===l?void 0:l.forBuilderAttributes)||void 0===c?void 0:c.lockLayout)&&void 0!==p&&p,I=null===(g=null===(d=e.appStateInBuilder)||void 0===d?void 0:d.appRuntimeInfo)||void 0===g?void 0:g.appMode;return{section:m,views:f,activeViewId:x,browserSizeMode:e.appStateInBuilder&&e.appStateInBuilder.browserSizeMode,editable:I===t.AppMode.Design&&!w}}))(De);var ze=m(6884);class _e extends t.React.PureComponent{constructor(e){super(e),this.formatMessage=e=>this.props.formatMessage(e),this._enableEditing=e=>{e.stopPropagation(),this.setState({isEditingLabel:!0})},this._disableEditing=()=>{this._onLabelUpdate(this.inputRef.value),this.setState({isEditingLabel:!1})},this._handleInputEnter=e=>{"Enter"===e.key&&this.setState({isEditingLabel:!1})},this._onLabelUpdate=e=>{const{screen:t}=this.props;e&&`${e}`.trim().length>0?(0,i.getAppConfigAction)().editScreenProperty(t.id,"label",e).exec():this.inputRef.value=t.label},this._onLabelChange=e=>{this.setState({currentLabel:e.target.value})},this.toggleDropDown=e=>{null==e||e.stopPropagation(),this.setState({isDropDownOpen:!this.state.isDropDownOpen})},this.state={isEditingLabel:!1,currentLabel:this.props.screen.label,isDropDownOpen:!1},this.dropDownItems=[(0,t.Immutable)({label:this.formatMessage("rename"),event:this._enableEditing.bind(this),visible:!0,a11yFocusBack:!1}),(0,t.Immutable)({label:this.formatMessage("duplicate"),event:this._duplicateView.bind(this),visible:!0}),(0,t.Immutable)({label:this.formatMessage("sectionDelete"),event:this._removeScreen.bind(this),visible:!0})],this.readonlyDropDownItems=[this.dropDownItems[0]],this.dropDownItemsWithoutDelete=[this.dropDownItems[0],this.dropDownItems[1]]}componentDidUpdate(e,t){!t.isEditingLabel&&this.state.isEditingLabel&&this._focusInput(),e.screen.label!==this.props.screen.label&&this.setState({currentLabel:this.props.screen.label})}_removeScreen(e){e.stopPropagation();const{index:t}=this.props;this.props.onRemove(t)}_duplicateView(){const{index:e}=this.props;this.props.onDuplicate(e)}_focusInput(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())}_getStyle(){const{theme:e}=this.props;return t.css`
      padding: 2px 2px 2px 10px;
      cursor: pointer;
      position: relative;
      height: ${t.polished.rem(32)};

      .drop-down {
        text-align: right;
        .popover {
          .popover-inner {
            box-shadow: 0 0 0;
          }
        }
      }
      .drag-icon {
        visibility: hidden;
        color: ${e.ref.palette.neutral[1e3]};
        cursor: move;
      }
      .screen-item-drag:hover {
        cursor: pointer !important;
      }
      .label-con {
        max-width: 9rem;
      }
      .label-input {
        max-width: 9rem;
      }
      .screen-item-drag {
        z-index: 1;
        background-color: transparent;
        box-shadow: none;
      }
    `}render(){const{index:e,browserSizeMode:i,editable:s}=this.props,{label:n}=this.props.screen,{isEditingLabel:a}=this.state,r=!s||i!==t.BrowserSizeMode.Large?this.readonlyDropDownItems:this.props.canRemove?this.dropDownItems:this.dropDownItemsWithoutDelete;return(0,t.jsx)("div",{css:this._getStyle(),className:"d-flex justify-content-between flex-grow-1","data-testid":"screenItem"},(0,t.jsx)("div",{className:"w-100 screen-item-drag d-flex justify-content-between","data-index":e},(0,t.jsx)("div",{className:"d-flex align-items-center"},!a&&(0,t.jsx)("div",{title:n,className:"label-con text-truncate",onDoubleClick:this._enableEditing},n),a&&(0,t.jsx)("div",null,(0,t.jsx)(o.TextInput,{title:n,className:"label-input",type:"text",value:this.state.currentLabel,ref:e=>{this.inputRef=e},onChange:this._onLabelChange,onAcceptValue:this._disableEditing,onKeyUp:this._handleInputEnter}))),(0,t.jsx)("div",{className:"drop-down d-flex toc-item-icon"},(0,t.jsx)("div",{title:this.formatMessage("options"),css:t.css`
              & > div {
                height: 100%;
              }
            `},(0,t.jsx)(o.Dropdown,{direction:"down",size:"sm",useKeyUpEvent:!0,toggle:this.toggleDropDown,isOpen:this.state.isDropDownOpen},(0,t.jsx)(o.DropdownButton,{arrow:!1,icon:!0,onClick:this.toggleDropDown,type:"tertiary"},(0,t.jsx)(ae,{size:"s"})),(0,t.jsx)(o.DropdownMenu,null,r.map(((e,i)=>(0,t.jsx)(o.DropdownItem,{key:i,onClick:e.event,a11yFocusBack:e.a11yFocusBack},e.label)))))))))}}const Ue=t.ReactRedux.connect(((e,t)=>{const{screenId:i}=t,{appConfig:o}=e.appStateInBuilder;return{screen:o.screens[i]}}))(_e);var We=m(8710),Fe=m.n(We),Ve=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const He=e=>{const i=window.SVG,{className:o}=e,s=Ve(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:Fe()},s)):t.React.createElement("svg",Object.assign({className:n},s))},Ge=[o.DistanceUnits.PIXEL,o.DistanceUnits.PERCENTAGE];class $e extends t.React.PureComponent{constructor(e){super(e),this.onMainBackgroundChange=e=>{const{screen:t}=this.props;(0,i.getAppConfigAction)().editScreenProperty(t.id,"main.background",e).exec()},this.onSideBackgroundChange=e=>{const{screen:t}=this.props;(0,i.getAppConfigAction)().editScreenProperty(t.id,"panel.background",e).exec()},this.setOverlay=e=>{const{screen:t}=this.props,o=(0,i.getAppConfigAction)();o.editScreenProperty(t.id,"panel.overlay",e),e||(o.editScreenProperty(t.id,"panel.offset",0),"center"===t.panel.side&&o.editScreenProperty(t.id,"panel.side","left")),o.exec()},this.updateWidth=e=>{var t,s,n;const{screen:a,viewportSize:r}=this.props,{distance:l,unit:c}=e;let p;if(g.utils.isPercentage(null===(t=a.panel)||void 0===t?void 0:t.size)&&c===o.DistanceUnits.PIXEL){const t=g.utils.fromRatio(null===(s=a.panel)||void 0===s?void 0:s.size,r.width);p=`${Math.round(t)}${e.unit}`}else if(g.utils.isPercentage(null===(n=a.panel)||void 0===n?void 0:n.size)||c!==o.DistanceUnits.PERCENTAGE)p=`${e.distance}${e.unit}`;else{p=`${g.utils.toRatio(l,r.width)}`}(0,i.getAppConfigAction)().editScreenProperty(a.id,"panel.size",p).exec()},this.updateSide=e=>{const{screen:t}=this.props;(0,i.getAppConfigAction)().editScreenProperty(t.id,"panel.side",e).exec()},this.updateOffsetX=e=>{const{screen:t}=this.props;(0,i.getAppConfigAction)().editScreenProperty(t.id,"panel.offset",`${e}px`).exec()},this.updatePadding=e=>{const{screen:t}=this.props;(0,i.getAppConfigAction)().editScreenProperty(t.id,"panel.padding",e).exec()},this.handleGapChange=e=>{const{screen:t}=this.props,o=(0,i.getAppConfigAction)();o.editScreenProperty(t.id,"panel.gap",e.distance),Object.keys(t.panel.layout).map((e=>t.panel.layout[e])).forEach((t=>{o.editLayoutProperty(t,"setting.space",e.distance)})),o.exec()},this._getStyle=()=>{const e=this.props.theme?this.props.theme.ref.palette.neutral[1e3]:"#c5c5c5",i=this.props.theme?this.props.theme.ref.palette.neutral[1e3]:"#a8a8a8";return t.css`
      height: 100%;
      overflow: auto;
      & {
        width: 100%;
      }
      .inner-section {
        border-bottom: none;
        padding-bottom: 0;
      }
      .back-btn-con {
        margin: 1rem 0.25rem 0;
        cursor: pointer;
        align-items: center;
      }
      .screen-group-title {
        margin: 1rem 1rem 0;
      }
      .background-set-back {
        color: ${i};
        font-weight: 500;
      }
      .background-setting-con .form-group {
        margin-bottom: ${t.polished.rem(16)};
      }
      .background-setting-header {
        color: ${e};
        font-weight: 500;
      }
    `},this.isRTL=(0,t.getAppStore)().getState().appContext.isRTL}render(){var e,i,s;const{screen:n,formatMessage:r}=this.props;return n?(0,t.jsx)("div",{css:this._getStyle(),className:"pb-2"},(0,t.jsx)("div",{role:"group","aria-label":r("mainStage")},(0,t.jsx)("div",{className:"screen-group-title"},r("mainStage")),(0,t.jsx)(a.SettingSection,{title:r("background")},(0,t.jsx)(a.SettingRow,{role:"group","aria-label":r("background")},(0,t.jsx)(l.BackgroundSetting,{background:n.main.background,onChange:e=>{this.onMainBackgroundChange(e)}})))),n.panel&&(0,t.jsx)("div",{role:"group","aria-label":r("scrollingPanel")},(0,t.jsx)("div",{className:"screen-group-title"},r("scrollingPanel")),(0,t.jsx)(a.SettingSection,{className:"inner-section",role:"group","aria-label":r("mode"),title:r("mode")},(0,t.jsx)("div",null,(0,t.jsx)(o.Label,{className:"mr-4 d-flex align-items-center"},(0,t.jsx)(o.Radio,{className:"mr-2",onChange:()=>{this.setOverlay(!1)},value:"docked",checked:!(null!==(e=n.panel.overlay)&&void 0!==e&&e)}),r("docked"))),(0,t.jsx)("div",null,(0,t.jsx)(o.Label,{className:"mr-4 d-flex align-items-center"},(0,t.jsx)(o.Radio,{className:"mr-2",onChange:()=>{this.setOverlay(!0)},value:"floating",checked:n.panel.overlay}),r("floatingScreen")))),(0,t.jsx)(a.SettingSection,{className:"inner-section",role:"group","aria-label":r("size"),title:r("size")},(0,t.jsx)(a.SettingRow,{label:r("width")},(0,t.jsx)("div",{style:{width:110}},(0,t.jsx)(l.InputUnit,{"aria-label":r("width"),units:Ge,min:0,max:1/0,value:g.utils.normalizeLinearUnit(n.panel.size),onChange:this.updateWidth})))),(0,t.jsx)(a.SettingSection,{className:"inner-section",role:"group","aria-label":r("position"),title:r("position")},(0,t.jsx)(a.SettingRow,{label:r("align")},(0,t.jsx)(o.ButtonGroup,{size:"sm"},(0,t.jsx)(o.Tooltip,{title:r(this.isRTL?"right":"left"),placement:"bottom"},(0,t.jsx)(o.Button,{icon:!0,"aria-label":r("align"),active:"left"===n.panel.side,"aria-pressed":"left"===n.panel.side,onClick:()=>{this.updateSide("left")}},(0,t.jsx)(ve,{size:"s",autoFlip:!0}))),n.panel.overlay&&(0,t.jsx)(o.Tooltip,{title:r("center"),placement:"bottom"},(0,t.jsx)(o.Button,{icon:!0,"aria-label":r("align"),active:"center"===n.panel.side,"aria-pressed":"center"===n.panel.side,onClick:()=>{this.updateSide("center")}},(0,t.jsx)(He,{size:"s"}))),(0,t.jsx)(o.Tooltip,{title:r(this.isRTL?"left":"right"),placement:"bottom"},(0,t.jsx)(o.Button,{icon:!0,"aria-label":r("align"),active:"right"===n.panel.side,"aria-pressed":"right"===n.panel.side,onClick:()=>{this.updateSide("right")}},(0,t.jsx)(Ae,{size:"s",autoFlip:!0}))))),(null===(i=n.panel)||void 0===i?void 0:i.overlay)&&(0,t.jsx)(a.SettingRow,{label:r("offsetX")},(0,t.jsx)(o.NumericInput,{value:parseInt(null!==(s=n.panel.offset)&&void 0!==s?s:"0"),onChange:this.updateOffsetX,size:"sm",css:t.css`width: 110px`,"aria-label":r("offsetX")}))),(0,t.jsx)(a.SettingSection,{className:"inner-section",title:r("gap")},(0,t.jsx)(a.SettingRow,{role:"group"},(0,t.jsx)(l.InputUnit,{"aria-label":r("gap"),className:"w-100",value:{distance:n.panel.gap>=0?n.panel.gap:10,unit:void 0},min:0,onChange:this.handleGapChange}))),(0,t.jsx)(a.SettingSection,{className:"inner-section",title:r("padding")},(0,t.jsx)(a.SettingRow,{role:"group","aria-label":r("padding")},(0,t.jsx)(l.Padding,{value:n.panel.padding,onChange:this.updatePadding}))),(0,t.jsx)(a.SettingSection,{className:"inner-section",title:r("background")},(0,t.jsx)(a.SettingRow,{role:"group","aria-label":r("background")},(0,t.jsx)(l.BackgroundSetting,{background:n.panel.background,onChange:e=>{this.onSideBackgroundChange(e)}}))))):null}}const Ze=t.ReactRedux.connect(((e,i)=>{const{screenId:o}=i,{appConfig:s}=e.appStateInBuilder,n=t.utils.findViewportSize(s,e.browserSizeMode||t.BrowserSizeMode.Large);return{screen:s.screens[o],viewportSize:n}}))($e);class Je extends t.React.PureComponent{constructor(e){super(e),this.sidePopperTrigger=t.React.createRef(),this.formatMessage=(e,i=!1)=>i?this.props.intl.formatMessage({id:e,defaultMessage:t.defaultMessages[e]}):this.props.formatMessage(e),this._addScreen=e=>{const t=(0,i.getAppConfigAction)(),{screenGroupId:o}=this.props;t.createScreenFromTemplate(e.screenId,e).then((e=>{let s=t.appConfig;s=s.setIn(["screenGroups",o,"screens"],[].concat(s.screenGroups[o].screens,e)).setIn(["screens",e,"parent"],o),i.builderAppSync.publishAppConfigChangeToApp(s),i.builderAppSync.publishScreenGroupNavInfoToApp(o,s.screenGroups[o].screens.length-1)})),this.closeScreenPopper()},this._duplicateScreen=e=>{const{screenGroupId:t}=this.props,o=(0,i.getAppConfigAction)();o.duplicateScreenByIndex(e,t),o.exec(),i.builderAppSync.publishScreenGroupNavInfoToApp(t,e+1)},this._duplicateActiveScreen=()=>{this._duplicateScreen(this.props.activeScreen)},this._selectScreen=e=>{const{screenGroupId:t,activeScreen:o}=this.props;o!==e&&i.builderAppSync.publishScreenGroupNavInfoToApp(t,e),this.setState({showScreenSetting:!0})},this._removeScreen=e=>{const{screenGroupId:t,screens:o,activeScreen:s}=this.props;(0,i.getAppConfigAction)().removeScreen(o[e],t).exec(),(s>e||s===e&&s===o.length-1)&&i.builderAppSync.publishScreenGroupNavInfoToApp(t,s-1)},this.getStyle=()=>t.css`
      .screen-list {
        padding: 0 1rem;
      }

      .setting-header {
        margin-bottom: 1rem;
      }

      .screen-group-title {
        font-size: 14px;
        color: var(--ref-palette-neutral-1200);
      }
    `,this.hideScreenSetting=()=>{this.setState({showScreenSetting:!1})},this.toggleScreenPopper=()=>{if(this.props.hasPanel)this.setState({showPopper:!this.state.showPopper});else{const e=(0,ze.getScreenTemplates)().find((e=>"nopanel"===e.name));e&&this._addScreen(e)}},this.closeScreenPopper=()=>{this.setState({showPopper:!1})},this.popperRef=t.React.createRef(),this.state={showPopper:!1,showScreenSetting:!1}}showEditButtons(){const{editable:e,browserSizeMode:i}=this.props,o=i===t.BrowserSizeMode.Large;return e&&o}render(){var e;const{screenGroupId:s,screens:n,theme:r,dispatch:l,activeScreen:c,browserSizeMode:p,editable:d}=this.props,{showScreenSetting:g}=this.state;if(!n)return null;const h=t.css`
      cursor: pointer;
      margin-top: ${t.polished.rem(-8)};
    `;return(0,t.jsx)("div",{className:"screen-group-setting mb-5",css:this.getStyle(),role:"group","aria-label":this.formatMessage("screen")},(0,t.jsx)("div",{className:"h-100 screen-list",ref:this.sidePopperTrigger},(0,t.jsx)("div",{className:"d-flex align-items-center setting-header"},(0,t.jsx)("div",{title:this.formatMessage("screen"),className:"screen-group-title"},this.formatMessage("screen"))),this.showEditButtons()&&(0,t.jsx)(t.React.Fragment,null,(0,t.jsx)("div",{className:"mt-4"},(0,t.jsx)(o.Button,{ref:this.popperRef,"aria-label":this.formatMessage("newScreen"),css:h,type:"primary",onClick:this.toggleScreenPopper,className:"w-100"},(0,t.jsx)(Be,{className:"mr-0"}),(0,t.jsx)("span",{className:"ml-2"},this.formatMessage("newScreen")))),this.state.showPopper&&(0,t.jsx)(a.TemplateSelector,{templates:(0,ze.getScreenTemplates)(),referenceElement:this.popperRef.current,onItemSelect:this._addScreen,onClose:this.closeScreenPopper})),(0,t.jsx)(ie.List,{size:"sm",className:"selected-fields-list mt-4",itemsJson:Array.from(n).map(((e,t)=>({itemStateDetailContent:e,itemStateChecked:n[c]===e,itemKey:`${t}`}))),dndEnabled:!0,onUpdateItem:(e,t)=>{const{itemJsons:o}=t.props,[,a]=o,r=a.map((e=>e.itemStateDetailContent)),l=n[c],p=r.indexOf(l);(0,i.getAppConfigAction)().editScreenGroupProperty(s,"screens",r).exec(),this._selectScreen(p)},onClickItemBody:(e,t)=>{const{itemJsons:i}=t.props,o=+i[0].itemKey;this._selectScreen(o)},overrideItemBlockInfo:({itemBlockInfo:e})=>({name:ie.TreeItemActionType.RenderOverrideItem,children:[{name:ie.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:ie.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:ie.TreeItemActionType.RenderOverrideItemBody,children:[{name:ie.TreeItemActionType.RenderOverrideItemDragHandle},{name:ie.TreeItemActionType.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(e,i)=>{const{itemJsons:o}=i.props,a=o[0],g=a.itemStateDetailContent,h=+a.itemKey;return(0,t.jsx)(Ue,{key:g,index:h,screenGroupId:s,screenId:g,canRemove:n.length>1,formatMessage:this.formatMessage,dispatch:l,theme:r,editable:d,onRemove:this._removeScreen,onDuplicate:this._duplicateScreen,selected:n[c]===g,browserSizeMode:p})}})),(0,t.jsx)(a.SidePopper,{isOpen:g,position:"right",toggle:this.hideScreenSetting,trigger:null===(e=this.sidePopperTrigger)||void 0===e?void 0:e.current,title:this.props.activeScreenLabel,backToFocusNode:this.popperRef.current},(0,t.jsx)(Ze,{formatMessage:this.formatMessage,theme:this.props.theme,screenId:n[c],hideBackgroundWidget:this.hideScreenSetting})))}}const Qe=t.ReactRedux.connect(((e,i)=>{var o,s,n,a,r,l,c,p,d,g,h,u;const{screenGroupId:m}=i,{appConfig:f}=e.appStateInBuilder,v=f.screenGroups[m];if(!v)return null;const x=f.screens[v.screens[0]],w=null!==(a=null===(n=null===(s=null===(o=e.appStateInBuilder)||void 0===o?void 0:o.appConfig)||void 0===s?void 0:s.forBuilderAttributes)||void 0===n?void 0:n.lockLayout)&&void 0!==a&&a,I=null===(l=null===(r=e.appStateInBuilder)||void 0===r?void 0:r.appRuntimeInfo)||void 0===l?void 0:l.appMode,y=v.screens,b=null!==(h=null===(g=null===(d=null===(p=null===(c=e.appStateInBuilder)||void 0===c?void 0:c.appRuntimeInfo)||void 0===p?void 0:p.screenGroupNavInfos)||void 0===d?void 0:d[m])||void 0===g?void 0:g.activeIndex)&&void 0!==h?h:0,S=y[b];return{screens:y,activeScreen:b,activeScreenLabel:null===(u=f.screens[S])||void 0===u?void 0:u.label,browserSizeMode:e.appStateInBuilder.browserSizeMode,hasPanel:null!=x.panel,editable:I===t.AppMode.Design&&!w}}))(Je);class Ye extends t.React.PureComponent{constructor(){super(...arguments),this.renderItemSetting=()=>{let e=null;if(this.props.layoutType===t.LayoutType.FixedLayout){let i=!1;const o=(0,t.getAppStore)().getState().appStateInBuilder.appConfig,s=o.layouts[this.props.layoutId];if(s.parent.type===t.LayoutParentType.Widget){const e=s.parent.id;"widgets/common/controller/"===o.widgets[e].uri&&(i=!0)}i||(e=d.FixedLayoutItemSetting)}else if(this.props.layoutType===t.LayoutType.FlowLayout)e=d.FlowLayoutItemSetting;else if(this.props.layoutType===t.LayoutType.ColumnLayout)e=d.ColumnLayoutItemSetting;else if(this.props.layoutType===t.LayoutType.RowLayout)e=d.RowLayoutItemSetting;else if(this.props.layoutType===t.LayoutType.GridLayout)e=d.GridLayoutItemSetting;else{const{containerWidgetId:t,hasLayoutSetting:o}=this.props;o&&(e=i.WidgetSettingManager.getInstance().getItemSettingClass(t))}return e?(0,t.jsx)(t.ErrorBoundary,null,(0,t.jsx)(e,{layoutId:this.props.layoutId,layoutItem:this.props.layoutItem,isLockLayout:this.props.isLockLayout,supportAutoSize:this.props.supportAutoSize,style:this.props.style,onSettingChange:this.props.onSettingChanged,onStyleChange:this.props.onStyleChange,onPosChange:this.props.onPosChanged,formatMessage:this.props.formatMessage})):(0,t.jsx)(a.SettingSection,null,(0,t.jsx)("div",{className:"w-100 justify-content-center d-flex"},this.props.formatMessage("noStyle")))}}componentDidUpdate(){this.loadItemSettingClass()}componentDidMount(){this.loadItemSettingClass()}loadItemSettingClass(){const{containerWidgetId:e,hasLayoutSetting:t}=this.props;e&&t&&!i.WidgetSettingManager.getInstance().getItemSettingClass(e)&&i.WidgetSettingManager.getInstance().loadItemSettingClass(e)}getStyle(){return t.css`
      &.single-setting {
        border-top: 1px solid var(--ref-palette-neutral-700);
      }
    `}render(){const{isSingle:e=!1}=this.props;return(0,t.jsx)("div",{className:(0,t.classNames)("setting-container",{"single-setting":e}),css:this.getStyle()},this.renderItemSetting())}}const Ke=t.ReactRedux.connect(((e,i)=>{var o,s,n,a,r,l,c,p,d,h,u,m;const{layoutId:f,layoutItemId:v}=i,x=null===(o=e.appStateInBuilder)||void 0===o?void 0:o.appConfig.layouts,w=null==x?void 0:x[f];let I=null,y=!0;if(!w)return null;const b=g.searchUtils.findLayoutItem(e.appStateInBuilder.appConfig,{layoutId:f,layoutItemId:v}),S=g.searchUtils.getWidgetIdThatUseTheLayoutId(e.appStateInBuilder.appConfig,f);let C=!1;if(S){C=null!==(a=null===(n=null===(s=e.appStateInBuilder.appConfig.widgets[S].manifest)||void 0===s?void 0:s.properties)||void 0===n?void 0:n.hasLayoutItemSettingPage)&&void 0!==a&&a}const A=null==b?void 0:b.type;if(A===t.LayoutItemType.Widget)if(b.widgetId){const t=e.appStateInBuilder.appConfig.widgets[b.widgetId];I=t.style,y=null===(c=null===(l=null===(r=t.manifest)||void 0===r?void 0:r.properties)||void 0===l?void 0:l.supportAutoSize)||void 0===c||c}else I=null===(p=b.setting)||void 0===p?void 0:p.placeholderStyle,y=!1;else A===t.LayoutItemType.Section&&(I=e.appStateInBuilder.appConfig.sections[b.sectionId].style,y=!1);return{containerWidgetId:S,hasLayoutSetting:C,style:I,supportAutoSize:y,layoutType:w.type,layoutItem:b,runtimeInfo:e.builder.widgetsSettingRuntimeInfo[S],isLockLayout:null!==(m=null===(u=null===(h=null===(d=e.appStateInBuilder)||void 0===d?void 0:d.appConfig)||void 0===h?void 0:h.forBuilderAttributes)||void 0===u?void 0:u.lockLayout)&&void 0!==m&&m}}))(Ye);var Xe=m(6300),qe=m.n(Xe),et=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const tt=e=>{const i=window.SVG,{className:o}=e,s=et(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:qe()},s)):t.React.createElement("svg",Object.assign({className:n},s))};var it;!function(e){e.MessageChoose="MESSAGECHOOSE",e.TargetChoose="TARGETCHOOSE",e.ActionChoose="ACTIONCHOOSE",e.ActionSetting="ACTIONSETTING"}(it||(it={}));class ot extends t.React.PureComponent{getStyle(e){var i,o;return t.css`
      .setting-header {
        padding: ${t.polished.rem(16)} ${t.polished.rem(16)} ${t.polished.rem(0)} ${t.polished.rem(16)}
      }
      .panel-header {
        overflow: hidden;
      }
      .setting-title {
        font-size: ${t.polished.rem(16)};
        color: ${null===(o=null===(i=null==e?void 0:e.ref.palette)||void 0===i?void 0:i.neutral)||void 0===o?void 0:o[1e3]}
      }
      .back-setting {
        padding: 0;
        &:hover {
          svg {
            color: var(--ref-palette-black) !important;
          }
        }
      }
    `}render(){var e;return(0,t.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},(0,t.jsx)("div",{className:"w-100 d-flex align-items-center justify-content-between setting-header border-0"},(null===(e=this.props.Routes)||void 0===e?void 0:e.length)>1&&!this.props.hideBackArrow&&(0,t.jsx)(o.Button,{type:"tertiary",size:"sm",className:"d-flex align-items-center h-100 back-setting",style:{cursor:"pointer"},title:this.props.title,onClick:this.props.onBack},(0,t.jsx)(tt,{autoFlip:!0})),(0,t.jsx)(o.PanelHeader,{level:1,className:"flex-grow-1",showClose:!0,onClose:this.props.onClose,title:this.props.title})),this.props.children)}}const st=(0,z.withTheme)(ot);var nt=m(170),at=m.n(nt),rt=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const lt=e=>{const i=window.SVG,{className:o}=e,s=rt(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:at()},s)):t.React.createElement("svg",Object.assign({className:n},s))};var ct=m(6117);const pt=(e,o)=>{var s,n;const a=(0,i.getAppConfigAction)().appConfig.widgets[e].manifest.publishMessages,r=t.i18n.getIntl(),l=[];if(a)for(let e=0;e<a.length;e++){let i=!1;if(o)for(let t=0;t<o.length;t++){const r=(null===(s=a[e])||void 0===s?void 0:s.messageType)?null===(n=a[e])||void 0===n?void 0:n.messageType:a[e];if(o[t].messageType===r){i=!0;break}}if(!i){const i=a[e],o=(null==i?void 0:i.messageType)||i;l.push({messageType:o,messageLabel:(0,t.getMessageTypeLabel)(o,r)})}}return(0,t.Immutable)(l)},dt=(e,t)=>{const o=[],s=[],n=[],a=(0,i.getAppConfigAction)().appConfig,r=i.AppMessageManager.getInstance().getFilteredActions(e,t);for(let e=0;e<r.length;e++)if(!n.includes(r[e].widgetId))if(n.push(r[e].widgetId),r[e].widgetId){const i=a.widgets[r[e].widgetId];if(i){if(i.id===t)continue;o.push(i)}}else s.push({uri:r[e].id,label:"Framework"});return{widgetTargets:o,frameWorkTargets:s}},gt=(e,t,o)=>{const s=[],n=[];e.id;const a=i.AppMessageManager.getInstance().getFilteredActions(o,t);for(let t=0;t<a.length;t++)n.includes(a[t].name)||a[t].widgetId!==e.id||(n.push(a[t].name),s.push(a[t]));return s},ht=(e,o)=>{const s=(0,i.getAppConfigAction)().appConfig;return{id:t.appConfigUtils.getUniqueId(s,"messageConfig"),widgetId:o,messageType:e,actions:[]}},ut=(e,i,o,s)=>{let n;return e.id,n=e.id?(0,t.getAppStore)().getState().appStateInBuilder?(0,t.getAppStore)().getState().appStateInBuilder.appConfig.widgets[e.id].manifest.version:null:t.version,{actionId:i.id+"-"+(new Date).getTime().toString(),widgetId:e.id,messageWidgetId:o,actionName:i.name,description:null,config:mt(i,s,o)?null:void 0,version:n}},mt=(e,t,o)=>!!i.AppMessageManager.getInstance().getActionSettingComponentUri(e,t,o);const ft=(e,i,o)=>{const s=e.actionId,n=e.config;if(function(e,t){var i;const o=wt(e,t)||[],s=wt(t,e)||[];return(null===(i=o.concat(s))||void 0===i?void 0:i.length)>0}(null==o?void 0:o.config,n)&&s===(null==o?void 0:o.actionId)){const e=Object.assign([],i.actions);let a=null;for(let i=0;i<e.length;i++)if(e[i].actionId===s&&e[i].widgetId===o.widgetId){let o;o=Array.isArray(n)?xt((0,t.Immutable)(n)):vt(n),e[i]=e[i].set("config",n).set("useDataSources",o),a=e[i];break}return{action:a,message:i=i.set("actions",e)}}},vt=e=>{const i=[],o=null==e?void 0:e.actionUseDataSource,s=null==e?void 0:e.messageUseDataSource;if(s&&i.push(s),o){const s=(null==e?void 0:e.sqlExprObj)||null,n=(0,ct.getJimuFieldNamesBySqlExpression)((0,t.Immutable)(s))||[],a=(null==o?void 0:o.fields)||[],r=(0,t.Immutable)(o).set("fields",Array.from(new Set(a.concat(n))));i.push(r)}return i},xt=e=>{e=null==e?void 0:e.asMutable({deep:!0});const t={};return e.forEach((e=>{vt(e).forEach((e=>{if(null==t?void 0:t[e.dataSourceId]){let i=t[e.dataSourceId].fields||[];i=i.concat((null==e?void 0:e.fields)||[]),i=Array.from(new Set(i)),t[e.dataSourceId].fields=i}else t[e.dataSourceId]=e}))})),Object.keys(t).map((e=>t[e]))},wt=(e,t)=>{const i=[],o=(e,t,s)=>{for(const n in e){const a=e[n],r=null==t?void 0:t[n],l=s?`${s}.${n}`:n;"object"==typeof a&&"object"==typeof r?o(a,r,l):a!==r&&i.push(l)}};return o(e,t,""),i};class It extends t.React.PureComponent{constructor(){super(...arguments),this.searchItems=e=>{},this.onSelectMessageType=e=>{const i=ht(e,this.props.widgetId);this.props.onSelected((0,t.Immutable)(i))}}getStyle(e){return t.css`
      height: calc(100% - 3.125rem);
      overflow-y: auto;

      .choose-message-list {
        .list-item {
          color: ${e.ref.palette.black};
        }
        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
          background-color: ${t.polished.rgba(e.ref.palette.white,1)};
          color: ${e.ref.palette.neutral[800]} !important;
        }

        .list{
          .list-item{
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: 1px solid transparent;
            cursor: pointer;
            background-color: ${e.ref.palette.neutral[500]};
            user-select: none;
            font-size: ${t.polished.rem(13)};
          }
          .list-item:hover{
            background-color: ${e.ref.palette.neutral[600]};
          }
          .list-item:active.list-item:hover{
            background-color: ${e.ref.palette.white};
          }
        }
      }
    `}render(){const{widgetId:e,messages:i}=this.props,s=pt(e,i);return(0,t.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},(0,t.jsx)("div",{className:"w-100 choose-message-list"},(0,t.jsx)(a.SettingSection,null,(0,t.jsx)(a.SettingRow,null,(0,t.jsx)("div",{className:"w-100",style:{display:"none"}},(0,t.jsx)(o.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchTrigger"),onChange:this.searchItems,value:""}),(0,t.jsx)(lt,{className:"p-0 searchIcon"})),(0,t.jsx)("div",{className:"w-100 list"},0===s.length&&(0,t.jsx)("div",{className:"d-flex mb-2 p-1 text-break"},this.props.formatMessage("noMessage")),s.length>0&&s.map(((e,i)=>(0,t.jsx)(o.Button,{type:"tertiary",className:"text-left list-item mb-2 pt-1 pb-1 pl-2 pr-2 w-100 align-items-center",key:i,onClick:()=>{this.onSelectMessageType(e.messageType)},title:e.messageLabel},e.messageLabel))))))))}}const yt=(0,z.withTheme)((0,t.injectIntl)(It));class bt extends t.React.PureComponent{constructor(){super(...arguments),this.searchItems=e=>{},this.onSelectAction=e=>{let i=this.props.message;const{target:o,widgetId:s}=this.props,n=ut(o,e,s,i.messageType);i=i.set("actions",i.actions.concat(n)),this.props.onSelected(i,(0,t.Immutable)(n))}}getStyle(e){return t.css`
      height: calc(100% - 3.125rem);
      overflow-y: auto;

      .action-choose-list {

        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
          background-color: ${t.polished.rgba(e.ref.palette.white,1)};
        }

        .list{
          .list-item{
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: 1px solid transparent;
            cursor: pointer;
            background-color: ${e.ref.palette.neutral[500]};
            user-select: none;
            font-size: ${t.polished.rem(13)};
          }
          .list-item:hover{
            background-color: ${e.ref.palette.neutral[600]};
          }
          .list-item:active.list-item:hover{
            background-color: ${e.ref.palette.white};
          }
        }
      }
    `}render(){const{target:e,widgetId:i,message:s}=this.props,n=gt(e,i,s.messageType);return(0,t.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},(0,t.jsx)("div",{className:"w-100 action-choose-list"},(0,t.jsx)(a.SettingSection,null,(0,t.jsx)(a.SettingRow,null,(0,t.jsx)("div",{className:"w-100",style:{display:"none"}},(0,t.jsx)(o.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchAction"),onChange:this.searchItems,value:""}),(0,t.jsx)(lt,{className:"p-0 searchIcon"})),(0,t.jsx)("div",{className:"w-100 list"},0===n.length&&(0,t.jsx)("div",{className:"d-flex mb-2 p-1 text-break"},this.props.formatMessage("noAction")),n.length>0&&n.map(((e,i)=>(0,t.jsx)(o.Button,{className:"text-truncate text-left list-item mb-2 pt-1 pb-1 pl-2 pr-2 w-100 align-items-center",key:i,title:e.label,onClick:()=>{this.onSelectAction(e)}},e.label))))))))}}const St=(0,z.withTheme)(bt);var Ct=m(8485),At=m.n(Ct),jt=m(9027),Mt=m.n(jt),Tt=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const Nt=e=>{const i=window.SVG,{className:o}=e,s=Tt(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component has-rtl-svg",o);return i?t.React.createElement(i,Object.assign({className:n,src:At(),srcRTL:Mt()},s)):t.React.createElement("svg",Object.assign({className:n},s))};class Pt extends t.React.PureComponent{constructor(){super(...arguments),this.searchItems=e=>{},this.onSelectTarget=e=>{this.props.onSelected(e)}}getStyle(e){return t.css`
      height: calc(100% - 3.125rem);
      overflow-y: auto;

      .target-choose-list {

        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
          background-color: ${t.polished.rgba(e.ref.palette.white,1)};
        }

        .seperateline-mt {
          margin-top: ${t.polished.rem(5)};
        }

        .seperateline-mb {
          margin-bottom: ${t.polished.rem(1)};
        }

        .seperateline {
          border-top: 1px solid ${e.ref.palette.neutral[500]};
        }

        .widgets-title {
          font-weight: 600;
          font-size: ${t.polished.rem(14)};
          color: ${e.ref.palette.neutral[900]};
        }

        .nodata {
          font-size: ${t.polished.rem(13)};
        }

        button {
          color: ${e.ref.palette.black};
        }

        .list{
          .list-item{
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: 1px solid transparent;
            cursor: pointer;
            background-color: ${e.ref.palette.neutral[500]};
            user-select: none;
            font-size: ${t.polished.rem(13)};
          }
          .list-item:hover{
            background-color: ${e.ref.palette.neutral[600]};
          }
          .list-item:active.list-item:hover{
            background-color: ${e.ref.palette.white};
          }
        }
      }
    `}render(){const{message:e}=this.props,i=dt(e.messageType,e.widgetId),s=i.frameWorkTargets,n=i.widgetTargets;return(0,t.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},(0,t.jsx)("div",{className:"w-100 target-choose-list"},(0,t.jsx)(a.SettingSection,null,(0,t.jsx)(a.SettingRow,null,(0,t.jsx)("div",{className:"w-100",style:{display:"none"}},(0,t.jsx)(o.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchTarget"),onChange:this.searchItems,value:""}),(0,t.jsx)(lt,{autoFlip:!0,className:"p-0 searchIcon",size:"m"})),(0,t.jsx)("div",{className:"w-100 list"},0===s.length&&0===n.length&&(0,t.jsx)("div",{className:"d-flex justify-content-center nodata text-break"},this.props.formatMessage("noTargetWidgets")),s.map(((e,i)=>(0,t.jsx)(o.Button,{type:"tertiary",className:"d-flex list-item pt-1 pb-1 pl-2 pr-2 w-100 align-items-center",title:this.props.formatMessage("actionFramework"),key:i,onClick:()=>{this.onSelectTarget(e)}},(0,t.jsx)(Nt,{className:"mr-0",size:"m",autoFlip:!0}),(0,t.jsx)("div",{className:"ml-2 text-truncate"},this.props.formatMessage("actionFramework"))))),s.length>0&&0===n.length&&(0,t.jsx)("div",{className:"w-100"},(0,t.jsx)("div",{className:"w-100 seperateline-mt seperateline-mb",style:{position:"relative",height:"20px"}},(0,t.jsx)("div",{className:"seperateline w-100",style:{top:"10px",position:"absolute"}})),(0,t.jsx)("div",{className:"w-100 widgets-title"},this.props.formatMessage("targetWidgets")),(0,t.jsx)("div",{className:"d-flex mt-2 nodata text-break"},this.props.formatMessage("noTargetWidgets"))),n.length>0&&(0,t.jsx)("div",{className:"w-100"},s.length>0&&(0,t.jsx)("div",{className:"w-100 seperateline-mb",style:{position:"relative",height:"20px"}},(0,t.jsx)("div",{className:"seperateline w-100",style:{top:"10px",position:"absolute"}})),(0,t.jsx)("div",{className:"w-100 widgets-title"},this.props.formatMessage("targetWidgets")),n.map(((e,i)=>{let s;const n=e.icon;return s=n&&n.svg?n:{svg:n},(0,t.jsx)(o.Button,{type:"tertiary",className:"d-flex list-item mt-2 p-1 w-100 align-items-center",title:e.label,key:i,onClick:()=>{this.onSelectTarget(e)}},(0,t.jsx)(o.Icon,{className:"mr-0",autoFlip:!0,width:16,height:16,icon:s.svg,color:s.properties&&s.properties.color}),(0,t.jsx)("div",{className:"ml-2 text-truncate"},e.label))}))))))))}}const kt=(0,z.withTheme)(Pt);function Rt(e){let t=null;t=e.widgetId?(0,i.getAppConfigAction)().appConfig.widgets[e.widgetId]:{label:"Framework"};let o=e.actionName;if(t.manifest)if(t.manifest.i18nMessages[`_action_${e.actionName}_label`])o=t.manifest.i18nMessages[`_action_${e.actionName}_label`];else{const i=t.manifest.messageActions;if(i)for(let t=0;t<i.length;t++)if(i[t].name===e.actionName){o=i[t].label;break}}else if("Framework"===t.label){const t=i.AppMessageManager.getInstance().getAllActions();for(let i=0;i<t.length;i++)if(e.actionId.includes(t[i].id)){o=t[i].label;break}}return o}class Ot extends t.React.PureComponent{constructor(){super(...arguments),this.searchItems=e=>{},this.onEditAction=e=>{e.config&&this.props.onClickEditAction(this.props.message,e)},this.onRemoveAction=(e,t)=>{e.stopPropagation();let o=this.props.message;const s=Object.assign([],o.actions),n=[];for(let e=0;e<s.length;e++)s[e].actionName===t.actionName&&n.push(s[e]);for(let e=0;e<s.length;e++)if(s[e].actionId===t.actionId&&s[e].widgetId===t.widgetId){const n=Object.assign([],s);n.splice(e,1),o=o.set("actions",n);const a=i.AppMessageManager.getInstance().getAction(t.widgetId,t.actionName);a&&a.onRemoveListen(o.messageType,o.widgetId);break}this.props.onMessageChanged(o)},this.onActionOrderChanged=e=>{let t=this.props.message;t=t.set("actions",e),this.props.onMessageChanged(t)},this.createActionItem=(e,s)=>{let n=null;return n=e.widgetId?(0,i.getAppConfigAction)().appConfig.widgets[e.widgetId]:{label:"Framework"},(0,t.jsx)("div",{className:"action-item flex-grow-1",css:this.getStyle(),onClick:()=>{this.onEditAction(e)}},(0,t.jsx)("div",{className:"d-flex w-100 justify-content-between align-items-start widget-name-con"},"Framework"===n.label&&(0,t.jsx)("div",{className:"widget-name text-truncate",title:this.props.formatMessage(`action${n.label}`)},this.props.formatMessage(`action${n.label}`)),"Framework"!==n.label&&(0,t.jsx)("div",{className:"widget-name text-truncate",title:n.label},n.label),(0,t.jsx)(o.Button,{className:"delete-item-button",type:"tertiary",size:"sm",icon:!0,onClick:t=>{this.onRemoveAction(t,e)},title:this.props.formatMessage("actionDelete")},(0,t.jsx)(F,{size:"s",className:"p-0 deleteIcon"}))),(0,t.jsx)("div",{className:"hint-paper w-100 align-items-center action-name"},(0,t.jsx)("div",{className:"w-100",title:Rt(e)},Rt(e))))},this.getActionList=()=>(0,t.jsx)("div",{style:{position:"relative"}},(0,t.jsx)(ie.List,{size:"sm",className:"setting-ui-unit-list",itemsJson:this.props.message.actions.asMutable().map(((e,t)=>{var i,o;return{itemStateDetailContent:e,itemStateChecked:(null===(o=null===(i=null==this?void 0:this.props)||void 0===i?void 0:i.action)||void 0===o?void 0:o.actionId)===e.actionId,itemKey:`${t}`}})),dndEnabled:!0,onUpdateItem:(e,t)=>{if(e.updateType===ie.TreeItemActionType.HandleDidDrop){const{itemJsons:[,e]}=t.props;this.onActionOrderChanged(e.map((e=>e.itemStateDetailContent)))}},overrideItemBlockInfo:({itemBlockInfo:e})=>({name:ie.TreeItemActionType.RenderOverrideItem,children:[{name:ie.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:ie.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:ie.TreeItemActionType.RenderOverrideItemBody,children:[{name:ie.TreeItemActionType.RenderOverrideItemDragHandle},{name:ie.TreeItemActionType.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(e,t)=>{const{itemJsons:i}=t.props,o=i[0],s=null==o?void 0:o.itemKey;return this.createActionItem(o.itemStateDetailContent,s)}}))}getStyle(){return t.css`
      & {
        position: relative;
        flex: 1;
      }
      .widget-name-con {
        .widget-name {
          max-width: ${t.polished.rem(150)};
        }
      }
      .drag-icon-con {
        position: absolute;
        top: ${t.polished.rem(23)};
        left: 0
      }
    `}getContainerStyle(){return t.css`
      .jimu-tree-item__body.jimu-tree-item_selectable_true:hover{
        background: var(--sys-color-secondary-main) !important;
      }
    `}render(){const e=(0,t.getMessageTypeLabel)(this.props.message.messageType,this.props.intl);return(0,t.jsx)("div",{className:"w-100",css:this.getContainerStyle()},(0,t.jsx)("div",{className:(0,t.classNames)("w-100 message-item message-item-container mb-4",this.props.isActive?"active-border":"")},(0,t.jsx)("div",{className:"w-100 d-flex justify-content-between align-items-center"},(0,t.jsx)("h2",{className:"message-item-title",title:e},e),(0,t.jsx)(o.Button,{className:"close-message-button",type:"tertiary",size:"sm",onClick:()=>{this.props.onMessageRemoved(this.props.message)},title:this.props.formatMessage("sectionDelete")},(0,t.jsx)(F,{size:14,className:"p-0 deleteIcon"}))),this.props.message.actions&&this.props.message.actions.length>0&&this.getActionList(),(0,t.jsx)(o.Button,{className:"mt-2 item-add-action text-truncate w-100",onClick:()=>{this.props.onClickAddAction(this.props.message)},type:"tertiary",title:this.props.formatMessage("addAction")},`+ ${this.props.formatMessage("addAction")}`)))}}const Bt=(0,t.injectIntl)(Ot);class Lt extends t.React.PureComponent{constructor(e){super(e),this.getActionSettingClass=()=>{const e=this.getActionSettingClassUri();i.AppMessageManager.getInstance().loadActionSettingClass(this.props.action,e).then((e=>{this.setState({settingClass:e})}))},this.onSettingChange=e=>{const t=ft(e,this.props.message,this.state.cacheActionJson);if(t){const{action:e,message:i}=t;(null==e?void 0:e.config)&&(this.setState({cacheActionJson:this.state.cacheActionJson.set("config",e.config)}),this.props.onUpdateAction(i,e,!1))}},this.onDisableDoneBtn=e=>{this.setState({isDisableDoneBtn:e})},this.renderActionSetting=()=>{const e=this.state.settingClass;return e?t.React.createElement(t.ErrorBoundary,null,t.React.createElement(e,{actionId:this.state.cacheActionJson.actionId,widgetId:this.props.action.widgetId,messageWidgetId:this.props.widgetId,config:this.state.cacheActionJson.config?this.state.cacheActionJson.config:void 0,messageType:this.props.message.messageType,onSettingChange:this.onSettingChange,onDisableDoneBtn:this.onDisableDoneBtn})):t.React.createElement("div",null,this.props.formatMessage("actionSettingLoading"))},this.getActionSettingClassUri=()=>{const e=i.AppMessageManager.getInstance().getAllActions();let t=null,o=null;for(let i=0;i<e.length;i++)if(this.props.action.actionId.includes(e[i].id)){t=e[i];break}return t&&(o=i.AppMessageManager.getInstance().getActionSettingComponentUri(t,this.props.message.messageType,this.props.action.messageWidgetId)),o},this.state={settingClass:null,cacheActionJson:this.props.action,isDisableDoneBtn:!1}}componentDidMount(){this.getActionSettingClass()}componentDidUpdate(e){this.getActionSettingClass(),this.props.action!==e.action&&this.setState({cacheActionJson:this.props.action})}render(){const e=this.getActionSettingClassUri();return t.React.createElement("div",{className:"setting-container h-100",style:{overflowY:"auto"}},e?this.renderActionSetting():t.React.createElement("div",null,"\xa0\xa0No widget"),t.React.createElement("div",{className:"w-100",style:{height:"50px"}}))}}var Dt=m(1027),Et=m.n(Dt),zt=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const _t=e=>{const i=window.SVG,{className:o}=e,s=zt(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:Et()},s)):t.React.createElement("svg",Object.assign({className:n},s))};class Ut extends t.React.PureComponent{constructor(e){super(e),this.sidePopperTrigger=t.React.createRef(),this.popperFocusNode=t.React.createRef(),this.resetState=()=>{this.setState({currentTriggeredMessage:null,currentTriggeredTarget:null,currentTriggeredAction:null,panelRoutes:[]})},this.updateLocalState=(e,t)=>{const o=(0,i.getAppConfigAction)().appConfig;if(e.messageConfigs&&e.messageConfigs!==t.messageConfigs){let t=null,i=null,s=null;if(this.state.currentTriggeredMessage&&this.state.currentTriggeredMessage.messageType){const n=Object.keys(e.messageConfigs);for(let i=0;i<n.length;i++)if(e.messageConfigs[n[i]].messageType===this.state.currentTriggeredMessage.messageType&&e.messageConfigs[n[i]].widgetId===this.state.currentTriggeredMessage.widgetId){t=e.messageConfigs[n[i]];break}if(t&&this.state.currentTriggeredTarget)if(this.state.currentTriggeredTarget.id){const e=this.state.currentTriggeredTarget;if(this.state.panelRoutes&&this.state.panelRoutes.length>0&&this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===it.ActionChoose)i=o.widgets[e.id];else for(let s=0;s<t.actions.length;s++)if(t.actions[s].widgetId===e.id){i=o.widgets[e.id];break}}else{const e=this.state.currentTriggeredTarget;if(this.state.panelRoutes&&this.state.panelRoutes.length>0&&this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===it.ActionChoose)i=e;else for(let o=0;o<t.actions.length;o++)if(!t.actions[o].widgetId){i=e;break}}if(t&&this.state.currentTriggeredAction&&this.state.currentTriggeredAction.actionName)for(let e=0;e<t.actions.length;e++)if(t.actions[e].actionId===this.state.currentTriggeredAction.actionId&&t.actions[e].widgetId===this.state.currentTriggeredAction.widgetId&&t.actions[e].actionName===this.state.currentTriggeredAction.actionName){s=t.actions[e];break}}this.setState({currentTriggeredMessage:t,currentTriggeredTarget:i,currentTriggeredAction:s})}},this.getMessages=()=>{const e=this.props.messageConfigs,t=[],i=Object.keys(e);if(i.length>0)for(let o=0;o<i.length;o++)e[i[o]]&&e[i[o]].widgetId===this.props.widgetId&&t.push(e[i[o]]);return t},this.onShowMessageChooseList=()=>{const e=[{pathType:it.MessageChoose,message:null}];this.setState({panelRoutes:e})},this.onMessageRemoved=e=>{e.actions.forEach((t=>{const o=i.AppMessageManager.getInstance().getAction(t.widgetId,t.actionName);o&&o.onRemoveListen(e.messageType,e.widgetId)})),(0,i.getAppConfigAction)().removeMessage(e).exec()},this.onMessageChanged=e=>{this.setState({currentTriggeredMessage:e},(()=>{(0,i.getAppConfigAction)().editMessage(e).exec()}))},this.onShowTargetChooseList=e=>{const t=[{pathType:it.TargetChoose,message:e}];this.setState({currentTriggeredMessage:e,currentTriggeredAction:null,panelRoutes:t})},this.onShowActionSettingPage=(e,t)=>{const i=[{pathType:it.ActionSetting,message:e}];this.setState({currentTriggeredMessage:e,currentTriggeredAction:t,panelRoutes:i})},this.backForwardPanel=()=>{const e=Object.assign([],this.state.panelRoutes);if(e.splice(e.length-1,1),e[e.length-1].message){const t=e[e.length-1].message;this.setState({panelRoutes:e,currentTriggeredMessage:e[e.length-1].message},(()=>{(0,i.getAppConfigAction)().editMessage(t).exec()}))}else{const t=this.state.panelRoutes[this.state.panelRoutes.length-1].message;this.setState({panelRoutes:e,currentTriggeredMessage:null},(()=>{(0,i.getAppConfigAction)().removeMessage(t).exec()}))}},this.closePanel=()=>{var e,t;(null==this?void 0:this.popperFocusNode)&&(null===(t=null===(e=this.popperFocusNode)||void 0===e?void 0:e.current)||void 0===t||t.focus()),this.setState({panelRoutes:[]})},this.onMessageChooseListSelected=e=>{const t=Object.assign([],this.state.panelRoutes);t.push({pathType:it.TargetChoose,message:e}),this.setState({currentTriggeredMessage:e,panelRoutes:t},(()=>{(0,i.getAppConfigAction)().addMessage(e).exec()}))},this.onTargetChooseListSelected=e=>{const t=Object.assign([],this.state.panelRoutes);t.push({pathType:it.ActionChoose,message:this.state.currentTriggeredMessage}),this.setState({currentTriggeredTarget:e,panelRoutes:t})},this.onActionChooseListSelected=(e,o)=>{if(null===o.config){const s=Object.assign([],this.state.panelRoutes);s.push({pathType:it.ActionSetting,message:e}),this.setState({currentTriggeredMessage:e,currentTriggeredAction:(0,t.Immutable)(o),panelRoutes:s},(()=>{(0,i.getAppConfigAction)().editMessage(e).exec()}))}else this.setState({currentTriggeredMessage:e,currentTriggeredAction:null,panelRoutes:[]},(()=>{(0,i.getAppConfigAction)().editMessage(e).exec()}))},this.onUpdateAction=(e,t,o)=>{o?this.setState({currentTriggeredMessage:e,currentTriggeredAction:t,panelRoutes:[]},(()=>{(0,i.getAppConfigAction)().editMessage(e).exec()})):this.setState({currentTriggeredMessage:e,currentTriggeredAction:t},(()=>{(0,i.getAppConfigAction)().editMessage(e).exec()}))},this.modalStyle=t.css`
      position: absolute;
      top: 0;
      bottom: 0;
      width: 259px;
      height: 100%;
      padding-bottom: 1px;
      border-right: 1px solid ${this.props.theme.ref.palette.white};
      border-bottom: 1px solid ${this.props.theme.ref.palette.white};
    `,this.state={currentTriggeredMessage:null,currentTriggeredTarget:null,currentTriggeredAction:null,panelRoutes:[]}}componentDidUpdate(e){this.props.widgetId!==e.widgetId?this.resetState():this.updateLocalState(this.props,e)}render(){var e,i,s,n;const{formatMessage:r}=this.props,l=this.getMessages();return(0,t.jsx)("div",{className:"d-flex h-100 flex-column"},(0,t.jsx)("div",{ref:this.sidePopperTrigger},(0,t.jsx)(a.SettingSection,null,(0,t.jsx)(a.SettingRow,{flow:"wrap"},(0,t.jsx)("div",{className:"w-100 justify-content-center d-flex"},(0,t.jsx)(o.Button,{className:"w-100",type:"primary",onClick:this.onShowMessageChooseList,"aria-describedby":"trigger-empty-tip",ref:this.popperFocusNode},(0,t.jsx)("div",{className:"w-100 text-truncate"},r("addTrigger"))))),(0,t.jsx)(a.SettingRow,{flow:"wrap"},l.map(((e,i)=>(0,t.jsx)(Bt,{key:i,message:e,onMessageRemoved:this.onMessageRemoved,isActive:e===this.state.currentTriggeredMessage&&this.state.panelRoutes.length>0,onMessageChanged:this.onMessageChanged,onClickAddAction:this.onShowTargetChooseList,onClickEditAction:this.onShowActionSettingPage,formatMessage:r,action:this.state.panelRoutes.length>0&&this.state.currentTriggeredAction})))),this.state.panelRoutes.length>0&&!this.props.pageId&&(0,t.jsx)("div",null,this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===it.MessageChoose&&(0,t.jsx)(a.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(e=this.sidePopperTrigger)||void 0===e?void 0:e.current},(0,t.jsx)("div",{className:"bg-default border-color-gray-400",css:this.modalStyle},(0,t.jsx)(st,{formatMessage:r,Routes:this.state.panelRoutes,title:r("selectTrigger"),onBack:this.backForwardPanel,onClose:this.closePanel},(0,t.jsx)(yt,{widgetId:this.props.widgetId,onSelected:this.onMessageChooseListSelected,messages:l,formatMessage:r})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===it.TargetChoose&&this.state.currentTriggeredMessage&&(0,t.jsx)(a.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(i=this.sidePopperTrigger)||void 0===i?void 0:i.current},(0,t.jsx)("div",{className:"bg-default border-color-gray-400",css:this.modalStyle},(0,t.jsx)(st,{formatMessage:r,Routes:this.state.panelRoutes,title:r("selectTarget"),onBack:this.backForwardPanel,onClose:this.closePanel},(0,t.jsx)(kt,{onSelected:this.onTargetChooseListSelected,message:this.state.currentTriggeredMessage,formatMessage:r})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===it.ActionChoose&&this.state.currentTriggeredMessage&&this.state.currentTriggeredTarget&&(0,t.jsx)(a.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(s=this.sidePopperTrigger)||void 0===s?void 0:s.current},(0,t.jsx)("div",{className:"bg-default border-color-gray-400",css:this.modalStyle},(0,t.jsx)(st,{formatMessage:r,Routes:this.state.panelRoutes,title:r("selectAction"),onBack:this.backForwardPanel,onClose:this.closePanel},(0,t.jsx)(St,{widgetId:this.props.widgetId,onSelected:this.onActionChooseListSelected,message:this.state.currentTriggeredMessage,target:this.state.currentTriggeredTarget,formatMessage:r})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===it.ActionSetting&&this.state.currentTriggeredMessage&&this.state.currentTriggeredAction&&(0,t.jsx)(a.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(n=this.sidePopperTrigger)||void 0===n?void 0:n.current},(0,t.jsx)("div",{className:"bg-default border-color-gray-400",css:this.modalStyle},(0,t.jsx)(st,{hideBackArrow:!0,formatMessage:r,Routes:this.state.panelRoutes,title:`${r("actionSet")}`,onBack:this.backForwardPanel,onClose:this.closePanel},(0,t.jsx)(Lt,{widgetId:this.props.widgetId,message:this.state.currentTriggeredMessage,action:this.state.currentTriggeredAction,onUpdateAction:this.onUpdateAction,formatMessage:r}))))))),0===l.length&&(0,t.jsx)("div",{className:"flex-grow-1 text-center no-trigger-tip position-relative"},(0,t.jsx)("div",{className:"position-absolute"},(0,t.jsx)(_t,{size:48}),(0,t.jsx)("p",{className:"trigger-tip",id:"trigger-empty-tip"},r("noTriggerTip",{ButtonString:r("addTrigger")})))))}}var Wt=m(655),Ft=m.n(Wt),Vt=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const Ht=e=>{const i=window.SVG,{className:o}=e,s=Vt(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:Ft()},s)):t.React.createElement("svg",Object.assign({className:n},s))};function Gt(e){const{enabled:i,isOpen:s,icon:n,label:a,onEnableToggled:r,onOpenToggled:l,formatMessage:c,hideCollapseIcon:p}=e;return(0,t.jsx)("div",{className:"d-flex align-items-center pl-2 pr-1 h-100"},(0,t.jsx)(o.Label,{className:"d-flex align-items-center mb-0",css:t.css`max-width: 85%;`},(0,t.jsx)(o.Checkbox,{checked:i,onChange:r}),"string"==typeof n?(0,t.jsx)(o.Icon,{className:"ml-2",icon:n}):n,(0,t.jsx)("span",{className:"ml-2 text-truncate",title:a},a)),!p&&(0,t.jsx)(o.Button,{className:"ml-auto p-0",size:"sm",type:"tertiary",icon:!0,onClick:l,disabled:!i,"aria-label":c(s?"collapse":"expand")},(0,t.jsx)(Ht,{size:"s",css:t.css`transform: rotateZ(${s&&i?180:0}deg);`})))}function $t(e){const{widgetId:s,enabled:n,items:r,dataActions:l=(0,t.Immutable)({}),formatMessage:c,onEnableToggled:p}=e,[d,g]=t.React.useState(!1),h=r[0],u=t.hooks.useTranslation(o.defaultMessages),m=t.React.useCallback((()=>{g(!d)}),[d,g]),f=[];r.forEach((e=>{var t,i,o,s;(null===(s=null===(o=(null!==(i=null===(t=null==l?void 0:l[e.name])||void 0===t?void 0:t.actions)&&void 0!==i?i:{})[e.widgetId])||void 0===o?void 0:o.enabled)||void 0===s||s)&&f.push(e.widgetId)}));const v=t.React.useCallback((e=>u("numSelected",{number:e.length})),[u]),x=t.React.useCallback((()=>r.map((e=>{var s,n,a;const r=null!==(a=(null!==(n=null===(s=null==l?void 0:l[e.name])||void 0===s?void 0:s.actions)&&void 0!==n?n:{})[e.widgetId])&&void 0!==a?a:(0,t.Immutable)({}),c=(0,i.getAppConfigAction)().appConfig.widgets[e.widgetId];return{value:e.widgetId,label:c.label,render:(e,i)=>{var s;return(0,t.jsx)(o.Label,{className:"d-flex w-100 h-100 align-items-center mb-0"},(0,t.jsx)(o.Checkbox,{checked:null===(s=r.enabled)||void 0===s||s}),(0,t.jsx)("span",{className:"ml-2"},c.label))}}}))),[r,l]),w=t.React.useCallback(((e,o)=>{var n,a,r,c;const p=null===(c=null===(r=(null!==(a=null===(n=null==l?void 0:l[h.name])||void 0===n?void 0:n.actions)&&void 0!==a?a:(0,t.Immutable)({}))[o])||void 0===r?void 0:r.enabled)||void 0===c||c;(0,i.getAppConfigAction)().editWidgetProperty(s,"dataActions",l.setIn([h.name,"actions",o,"enabled"],!p)).exec()}),[l,s,h.name]),I=!d||!n||h.hideCollapseIcon;return(0,t.jsx)(a.SettingSection,{title:(0,t.jsx)(Gt,{enabled:n,icon:h.icon,label:h.label,isOpen:d,onEnableToggled:p,onOpenToggled:m,formatMessage:c,hideCollapseIcon:h.hideCollapseIcon}),className:(0,t.classNames)("p-0 data-action-item",{[`data-action-${h.name}`]:!0}),css:t.css`
        border-top: ${I?"none !important":"2px solid var(--primary-600)"};
        border-bottom: none !important;
        background-color: var(--ref-palette-neutral-500);
        margin-top: 8px;
        .jimu-widget-setting--section-header {
          height: 32px;
        }
      `,role:"group","aria-label":h.label},!h.hideCollapseIcon&&(0,t.jsx)(o.Collapse,{isOpen:d&&n,className:"mt-0 px-2"},(0,t.jsx)(a.SettingRow,{flow:"wrap",label:c("selectWidgets"),className:"py-2"},(0,t.jsx)(o.MultiSelect,{fluid:!0,"aria-label":c("selectWidgets"),items:(0,t.Immutable)(x()),onClickItem:w,values:(0,t.Immutable)(f),displayByValues:v,size:"sm"})),e.children))}var Zt=m(6420),Jt=m.n(Zt),Qt=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const Yt=e=>{const i=window.SVG,{className:o}=e,s=Qt(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:Jt()},s)):t.React.createElement("svg",Object.assign({className:n},s))};var Kt=m(5356),Xt=m.n(Kt),qt=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const ei=e=>{const i=window.SVG,{className:o}=e,s=qt(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:Xt()},s)):t.React.createElement("svg",Object.assign({className:n},s))};var ti=function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function a(e){try{l(o.next(e))}catch(e){n(e)}}function r(e){try{l(o.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};class ii extends t.React.PureComponent{constructor(e){super(e),this.handleEnableDataActionChanged=e=>{const t=(0,i.getAppConfigAction)().appConfig.widgets[this.props.widgetId];(0,i.getAppConfigAction)().editWidget(t.set("enableDataAction",e.target.checked)).exec()},this.state={settingClasses:{}}}componentDidMount(){const e=i.AppDataActionManager.getInstance().loadAllActionSettingClasses(),t=Object.keys(null!=e?e:{});if(t.length>0){const i=t.map((t=>ti(this,void 0,void 0,(function*(){return yield e[t]}))));Promise.allSettled(i).then((e=>{const i={};e.forEach(((e,o)=>{"fulfilled"===e.status?i[t[o]]=e.value:console.error(e.reason)})),this.setState({settingClasses:i})})).catch((e=>{console.error(e)}))}}getAvailableActions(){var e;const o={},s={},n=(0,i.getAppConfigAction)(),a=null===(e=n.appConfig.widgets[this.props.widgetId].manifest)||void 0===e?void 0:e.excludeDataActions,r=t.DataActionManager.getInstance(),l=this.props.appMode===t.AppMode.Design,c=this.props.appMode===t.AppMode.Design;this.getAllWidgetsInSameRootContainer(n.appConfig,this.props.widgetId,this.props.sizeMode,l,c).forEach((e=>{var i;if(e===this.props.widgetId)return;const s=n.appConfig.widgets[e],l=null===(i=s.manifest)||void 0===i?void 0:i.dataActions;(null==l?void 0:l.length)>0&&l.forEach((i=>{var n,l;const c=`${null===(n=s.manifest)||void 0===n?void 0:n.name}.${i.name}`;if(r.isActionExcluded(c,a))return;o[i.name]||(o[i.name]=[]);const p=t.urlUtils.isAbsoluteUrl(s.uri)?`${s.uri}dist/${i.icon}`:`${t.moduleLoader.resolveModuleFullPath("widgets/")}../${s.uri}dist/${i.icon}`;o[i.name].push({name:i.name,icon:p,label:null!==(l=s.manifest.i18nMessages[`_action_${i.name}_label`])&&void 0!==l?l:i.label,widgetId:e,settingUri:`${s.uri}dist/${i.settingUri}`})}))}));return t.DataActionManager.getInstance().getActions().forEach((e=>{e.widgetId||e.name.includes("export")||(null==a?void 0:a.includes(e.name))||(s[e.name]||(s[e.name]=[]),s[e.name].push({name:e.name,icon:e.icon,label:e.label,hideCollapseIcon:!0}))})),{widgetActions:o,frameworkActions:s}}getAllWidgetsInSameRootContainer(e,i,o,s,n){const a=g.searchUtils.getContentRootContainerInfo(e,i,t.LayoutItemType.Widget,o,s),r=this.props.currentPageId;return g.searchUtils.getContentsInContainerRecursiveAdv(e,a,t.LayoutItemType.Widget,o,{includePending:s,includeOtherSizeMode:n,currentPageId:r})}updateActionStatus(e,o){var s;const{widgetId:n}=this.props,a=(0,i.getAppConfigAction)(),r=null!==(s=a.appConfig.widgets[n].dataActions)&&void 0!==s?s:(0,t.Immutable)({});a.editWidgetProperty(n,"dataActions",r.setIn([e,"enabled"],o)).exec()}createActionItemSetting(e,i){const o=this.state.settingClasses[e.settingUri];return o?(0,t.jsx)(a.SettingRow,null,(0,t.jsx)(o,{widgetId:this.props.widgetId,actionName:e.name,config:i,onSettingChange:t=>{this.updateActionItemSetting(e.name,t)}})):null}updateActionItemSetting(e,o){var s;const{widgetId:n}=this.props,a=(0,i.getAppConfigAction)(),r=null!==(s=a.appConfig.widgets[n].dataActions)&&void 0!==s?s:(0,t.Immutable)({});a.editWidgetProperty(n,"dataActions",r.setIn([e,"config"],o)).exec()}createActionItem(e,i,o){var s,n,a;const{dataActions:r}=this.props,l=null===(n=null===(s=null==r?void 0:r[e])||void 0===s?void 0:s.enabled)||void 0===n||n,c=i[0];return(0,t.jsx)($t,{key:o,widgetId:this.props.widgetId,enabled:l,items:i,dataActions:r,formatMessage:this.props.formatMessage,onEnableToggled:()=>{this.updateActionStatus(e,!l)}},l&&c.settingUri&&this.createActionItemSetting(c,null===(a=null==r?void 0:r[e])||void 0===a?void 0:a.config))}createExportNotes(){return(0,t.jsx)("div",{className:"d-flex mt-4 pl-2 pr-1 w-100 pr-1 align-items-center title2 hint-paper",css:t.css`
          color: var(--ref-palette-neutral-1000);
          height: 32px;
          background: var(--ref-palette-neutral-500);
        `},(0,t.jsx)(Yt,{color:"var(--dark-50)"}),(0,t.jsx)("span",{className:"ml-2"},this.props.formatMessage("export")),(0,t.jsx)(o.Tooltip,{placement:"bottom",css:t.css`max-width: 300px; margin-left: auto;`,showArrow:!0,title:this.props.formatMessage("exportNotes")},(0,t.jsx)(o.Button,{className:"ml-auto p-0",type:"tertiary",icon:!0},(0,t.jsx)(x,{className:"mr-1",color:"var(--dark-50)"}))))}createEnableBtn(e){const{formatMessage:i,enableDataAction:s}=this.props,n="enableDataAction";return(0,t.jsx)("div",{className:"w-100 d-flex justify-content-between align-items-center px-1"},(0,t.jsx)("div",{className:"title d-flex align-items-center",css:t.css`max-width: 80%; color: var(--ref-palette-neutral-1100)`},(0,t.jsx)("div",{className:"text-truncate title2 hint-paper",title:i(n)},i(n)),(0,t.jsx)(o.Tooltip,{placement:"left",css:t.css`max-width: 300px;`,showArrow:!0,title:i("dataActionTooltip")},(0,t.jsx)(o.Button,{className:"ml-2",icon:!0,size:"sm",type:"tertiary"},(0,t.jsx)(x,null)))),(0,t.jsx)(o.Switch,{"aria-label":i(n),"aria-describedby":e?"noDataActionDesc":void 0,checked:s,onChange:this.handleEnableDataActionChanged}))}render(){const{enableDataAction:e}=this.props,{widgetActions:i,frameworkActions:o}=this.getAvailableActions(),s=t.lodash.merge({},i,o),n=Object.keys(o).sort(),r=Object.keys(i).sort();return 0===n.length&&0===r.length?(0,t.jsx)(a.SettingSection,{className:(0,t.classNames)({"h-100":e,"d-flex":!0,"flex-column":!0,"data-action-list":!0})},this.createEnableBtn(!0),e&&(0,t.jsx)("div",{className:"d-flex flex-column align-items-center flex-grow-1 mt-4"},this.createExportNotes(),(0,t.jsx)("div",{className:"d-flex flex-column justify-content-center align-items-center flex-grow-1"},(0,t.jsx)(ei,{size:42,color:"var(--dark-200)"}),(0,t.jsx)("p",{id:"noDataActionDesc",className:"p-2",css:t.css`color: var(--ref-palette-neutral-1000); text-align: center;`},this.props.formatMessage("noDataAction"))))):(0,t.jsx)(a.SettingSection,{className:(0,t.classNames)({"h-100":e,"data-action-list":!0})},this.createEnableBtn(!1),e&&(0,t.jsx)(t.React.Fragment,null,this.createExportNotes(),(0,t.jsx)("div",{className:"framework-actions pb-1"},n.map(((e,t)=>this.createActionItem(e,s[e],t)))),(0,t.jsx)("div",{className:"widget-actions"},r.map(((e,t)=>this.createActionItem(e,s[e],t))))))}}const oi=t.ReactRedux.connect(((e,t)=>{var i,o,s,n,a,r;const l=null===(o=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===o?void 0:o.widgets[t.widgetId];return{dataActions:null==l?void 0:l.dataActions,sizeMode:null===(s=e.appStateInBuilder)||void 0===s?void 0:s.browserSizeMode,appMode:null===(n=e.appStateInBuilder)||void 0===n?void 0:n.appRuntimeInfo.appMode,enableDataAction:null===(a=null==l?void 0:l.enableDataAction)||void 0===a||a,currentPageId:null===(r=e.appStateInBuilder)||void 0===r?void 0:r.appRuntimeInfo.currentPageId}}))(ii);class si extends t.React.PureComponent{getStyle(e){return t.css`
      .jimu-widget-setting--row {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      .message-setting {

        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
        }

        .listItem {
          cursor: pointer;
          padding: 5px 0px;
        }

        .listItem.active {
          background-color: ${e.sys.color.primary.light};
          border: 0;
        }

        .listItem:hover {
          background-color: ${t.polished.rgba(e.sys.color.primary.light,.4)};
        }

        .active-border {
          border-left: 2px solid var(--sys-color-primary-dark) !important;
        }

        .message-item-container {
          background-color: var(--ref-palette-neutral-500);
          border: 1px solid ${e.ref.palette.neutral[500]};
        }

        .message-item {

          .widget-name {
            font-size: ${t.polished.rem(14)};
            font-weight: 400;
          }

          .action-name {
            font-size: ${t.polished.rem(13)};
            margin-top: ${t.polished.rem(13)};
          }

          padding: 0 ${t.polished.rem(12)} ${t.polished.rem(6)} ${t.polished.rem(12)};

          .action-item {
            padding: ${t.polished.rem(8)} ${t.polished.rem(10)} ${t.polished.rem(10)} ${t.polished.rem(5)};
            .delete-item-button {
              visibility: hidden;
              padding: 0;
              color: var(--ref-palette-neutral-1000);
            }
          }

          .action-item:hover {
            .delete-item-button {
              visibility: unset;
            }
          }

          .drag-item {
            &:hover {
              .action-item {
                border: 1px solid ${e.sys.color.primary.dark};
              }
              .action-name {
                background-color: ${e.sys.color.secondary.light};
              }
            }
          }

          .message-item-title {
            font-size: ${t.polished.rem(14)};
            line-height: 1.3;
            margin: 0;
            padding: ${t.polished.rem(8)} 0;
            width: 190px;
            overflow: hidden;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            display: -webkit-box;
          }

          .close-message-button {
            padding: 0;
            svg {
              margin: 0;
            }
          }

          .deleteIcon-disable {
            opacity: .3;
          }

          .deleteIcon {
            cursor: pointer;
            opacity: .8;
          }

          .deleteIcon:hover {
            opacity: 1;
          }

          .item-add-action {
            cursor: pointer;
            color: ${e.sys.color.primary.light};
            padding: 0;
            border: 1px dashed var(--ref-palette-neutral-700);
            height: ${t.polished.rem(26)};
            &:hover {
              color: ${t.polished.rgba(e.sys.color.primary.light,.8)};
            }
          }
        }

        .jimu-widget-setting--section {
          padding-left: 0;
          padding-right: 0;
        }
        .jimu-widget-setting--row {
          padding-left: 1rem;
          padding-right: 1rem;
        }
        .no-trigger-tip {
          &>div {
            top: 50%;
            transform: translateY(-50%);
            color: ${e.ref.palette.neutral[800]};
          }
          p {
            color: ${e.ref.palette.neutral[1e3]};
            font-size: ${t.polished.rem(14)};
            margin: ${t.polished.rem(16)} auto 0;
            line-height: ${t.polished.rem(19)};
            width: ${t.polished.rem(228)};
          }
        }
      }
    `}createMessageActionSetting(){const{pageId:e,widgetId:i,theme:o,messageConfigs:s}=this.props;return(0,t.jsx)(Ut,{pageId:e,widgetId:i,theme:o,messageConfigs:s,formatMessage:this.props.formatMessage})}createDataActionSetting(){const{canConsumeDataAction:e}=this.props;if(e)return(0,t.jsx)(oi,{widgetId:this.props.widgetId,formatMessage:this.props.formatMessage})}render(){const{supportMessageAction:e,canConsumeDataAction:i,formatMessage:s}=this.props;return e&&!i?(0,t.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},(0,t.jsx)("div",{className:"jimu-widget message-setting px-4"},this.createMessageActionSetting())):!e&&i?(0,t.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},this.createDataActionSetting()):(0,t.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},(0,t.jsx)("div",{className:"jimu-widget message-setting"},(0,t.jsx)(o.Tabs,{type:"pills",fill:!0,className:"p-4 h-100",defaultValue:"message"},(0,t.jsx)(o.Tab,{id:"message",title:s("messageAction")},this.createMessageActionSetting()),(0,t.jsx)(o.Tab,{id:"data",title:s("dataAction")},this.createDataActionSetting()))))}}const ni=t.ReactRedux.connect(((e,t)=>{var i,o;return{messageConfigs:null===(o=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===o?void 0:o.messageConfigs}}))((0,z.withTheme)(si));var ai=m(3303),ri=m.n(ai),li=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const ci=e=>{const i=window.SVG,{className:o}=e,s=li(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:ri()},s)):t.React.createElement("svg",Object.assign({className:n},s))},pi={pageSetting:"Page settings",dialogSetting:"Dialog settings",openWithWindow:"Open with Window",openWithWindowTip:"Only fixed windows are supported (except splash).",folderSetting:"Folder settings",linkSetting:"Link settings",noSelection:"No selection",customWidth:"Fixed width",fitToWindow:"Fit to window",fitToWidthOnly:"Full width",fitToContainer:"Fit to container",keepAspectRatio:"Keep aspect ratio",aspectRatio:"Aspect ratio",fixedHeight:"Fixed height",content:"Content",dynamicSettingStyle:"Style",action:"Action",donotSupportDataAction:"The widget does not support any data actions.",daynamicLayout:"Layout",displayMode:"Display mode",dynamicWidth:"Width",dynamicHeight:"Height",dynamicLoading:"Loading",heightMode:"Height mode",body:"Body",header:"Header",footer:"Footer",urlIsHere:"Type URL here.",sectionDelete:"Delete",noWidget:"No widget",docked:"Docked",floatingScreen:"Floating",verticalSpacing:"Vertical spacing",triggerPosition:"Trigger position",upper:"Upper",lower:"Lower",dsDuplicateView:"Duplicate view",dsDuplicateScreen:"Duplicate screen",newView:"New view",noSettingOptions:"No setting options",contentWidth:"Content width",dsCustom:"Custom",dsAuto:"Auto",size:"Size",lockParent:"Kept within the parent container",margin:"Margin",noStyle:"This widget does not support style settings.",addTrigger:"Add a trigger",noTrigger:"The widget does not generate any triggers.",selectTrigger:"Select a trigger",selectTarget:"Select a target",selectAction:"Select an action",actionBack:"Back",actionSet:"Action settings",actionSettings:"Settings",actionDelete:"Delete",addAction:"Add action",targetWidgets:"Widgets",noMessage:"No message",noTargetWidgets:"No widget",messageAction:"Message action",dataAction:"Data action",noAction:"No action",chooseSearchTrigger:"Select or search a trigger",chooseSearchTarget:"Select or search a target",chooseSearchAction:"Select or search an action",actionDone:"Done",actionFramework:"Framework",actionSettingLoading:"Loading...",turnTo:"Switch to:",dsFill:"Fill",keepFixedOnScroll:"Stays at the top of the page when scrolling",titleBackground:"Background",copyPage:"Copy",mode:"Mode",fixedMode:"Fixed",anchoredMode:"Anchored",fixedModeTip:"Display in a fixed position.",anchoredModeTip:"Appears next to the linked widget.",splashDlgWarning:"Splash cannot be set to Anchored.",pageDlgWarning:"Window opened with pages cannot be set to Anchored.",keepLeft:"Keep left",keepRight:"Keep right",keepCenter:"Keep center",keepTop:"Keep top",keepBottom:"Keep bottom",closeOptions:"Close options",blockPage:"Block page",clickOutside:"Click outside to close Window",interaction:"Interaction",interactionStyle1:"Checkbox only",interactionStyle2:"Button in the same line",interactionStyle3:"Button in a different line",confirmation:"Confirmation",confirmationRequiredText:"Check to proceed",confirmationButtonTextHolder:"Required",closeIcon:"Close icon",closeIconPosition:"Position",closeIconPositionTL:"Top left",closeIconPositionTR:"Top right",preventDisplayAgain:'"Don\'t show this again" option',checkboxText:"Checkbox text",checkboxButtonText:"Button text",alwaysShow:"Always show this window",arrows:"Arrows",dots:"Dots",interval:"Interval (Second)",loop:"Loop",toggleViewList:"Toggle view list",spacing:"Spacing",scrollToSwitch:"Scroll to switch",dataActions:"Data actions",enableDataAction:"Enable data action",enableBatchDataAction:"Enable batch data action",selectWidgets:"Select widgets",dataActionTooltip:"Show data action button on the widget. The widget will not have any data actions, if no action is configured, or the data type does not support data action.",batchDataActionTooltip:"Show batch data action button on the widget. The widget will not have any batch data actions, if no action is configured, or the data type does not support data action.",noDataAction:"To see data action options, please add a widget that provides data action onto the same page.",noBatchDataAction:"To see batch data action options, please add a widget that provides batch data action onto the same page.",noTriggerTip:'Click the "{ButtonString}" button to add and configure actions.',exportNotes:"Note: Export is configured in the Data panel.",lazyLoading:"Lazy loading",lazyLoadingTip:"Load content when switched for the first time.",cookieBannerSettingTitle:"Cookie Banner",bannerButtonSettings:"Banner button settings",closeButton:"Close button",acceptAllButton:"Accept all button",declineAllButton:"Decline all button",cookieSettingsButton:"Cookie settings button",cookieSettingsWindow:"Cookie settings window"};var di=function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function a(e){try{l(o.next(e))}catch(e){n(e)}}function r(e){try{l(o.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};const{useState:gi,useEffect:hi,useRef:ui}=t.React,mi=e=>{const s=t.hooks.useTranslation(pi,o.defaultMessages),n=ui({}),{widgetId:r,message:l,settingClassUri:c,sidePopperTrigger:p,actionId:d,closePanel:g,onMessageChanged:h}=e,[u,m]=gi({}),[f,v]=gi(null);hi((()=>{if(d&&l){const e=l.actions||[],t=null==e?void 0:e.filter((e=>e.actionId===d))[0];v(t)}}),[l,d]),hi((()=>{c&&(null==f?void 0:f.actionId)&&x(f,c)}),[c,f]);const x=(e,t)=>di(void 0,void 0,void 0,(function*(){!n.current[t]&&t&&i.AppMessageManager.getInstance().loadActionSettingClass(e,t).then((e=>{n.current[t]=e,m(n.current)}))})),w=t.hooks.useEventCallback((e=>{const t=ft(e,l,f);if(t){const{action:e,message:i}=t;(null==e?void 0:e.config)&&(v(e),h(i))}}));return(0,t.jsx)("div",null,(()=>{const e=u[c];return e&&f&&d?(0,t.jsx)(a.SidePopper,{isOpen:!(!u[c]||!c),position:"right",toggle:g,trigger:p},(0,t.jsx)("div",{className:"bg-default border-color-gray-400"},(0,t.jsx)(st,{formatMessage:s,hideBackArrow:!0,title:s("actionSet"),onClose:g},(0,t.jsx)(e,{actionId:f.actionId,widgetId:f.widgetId,messageWidgetId:r,config:f.config,messageType:l.messageType,onSettingChange:w})))):null})())},{useState:fi,useEffect:vi,useRef:xi}=t.React,wi=e=>{const s=t.hooks.useTranslation(pi,o.defaultMessages),n=xi(null),r=xi(!1),{widgetId:l,publishMessageItem:c,messages:p,sidePopperTrigger:d}=e,[g,h]=fi(null),[u,m]=fi(null),[f,v]=fi({}),[x,w]=fi(null),[I,y]=fi(!1);vi((()=>{const e=dt(c.messageType,l),{widgetTargets:t,frameWorkTargets:i}=e;h(t),m(i)}),[c.messageType,l]),vi((()=>{const e=S(p,c.messageType);w((0,t.Immutable)(e)),n.current=(0,t.Immutable)(e)}),[p,c]),vi((()=>{if(!r.current){const e=(null==x?void 0:x.actions)||[];y((null==e?void 0:e.length)>0)}r.current=!1}),[x]);const b=e=>{(0,i.getAppConfigAction)().addMessage(e).exec()},S=(e,t)=>{let i;return Object.keys(e).forEach((o=>{var s,n;(null===(s=e[o])||void 0===s?void 0:s.messageType)===t&&(i=null===(n=e[o])||void 0===n?void 0:n.asMutable({deep:!0}))})),i},C=t.hooks.useEventCallback((e=>{var t;const i=(null===(t=n.current)||void 0===t?void 0:t.actions)||[];return(null==i?void 0:i.filter((t=>t.actionName===e)))[0]})),A=()=>{v(null)},j=t.hooks.useEventCallback(((e,t,i,o)=>{const s=(null==f?void 0:f.actionSettingUri)?null:e,n=(null==f?void 0:f.actionId)?null:t,a=(null==f?void 0:f.action)?null:i;v({actionSettingUri:s,actionId:n,action:a}),o&&o.preventDefault()})),M=(e,i=0)=>{const n=gt(e,l,c.messageType);return 0===n.length?null:(0,t.jsx)(a.SettingRow,{label:(null==e?void 0:e.id)?null==e?void 0:e.label:s("actionFramework"),className:"w-100",key:i,flow:"wrap"},(0,t.jsx)(o.Dropdown,{className:"w-100",fluid:!0,activeIcon:!0,autoWidth:!0,menuItemCheckMode:"singleCheck",supportInsideNodesAccessible:!0},(0,t.jsx)(o.DropdownButton,{className:"text-left action-item-dropdown-button",size:"sm"},(e=>{let t;return null==e||e.forEach((e=>{var i;(null===(i=C(e.name))||void 0===i?void 0:i.actionId)&&(t=t?`${t}, ${e.label}`:e.label)})),t||s("none")})(n)),(0,t.jsx)(o.DropdownMenu,null,null==n?void 0:n.map(((t,i)=>T(t,i,e))))))},T=t.hooks.useEventCallback(((e,a,p)=>{const d=(e=>i.AppMessageManager.getInstance().getActionSettingComponentUri(e,c.messageType,l))(e),g=C(e.name),h=d&&(null==g?void 0:g.actionId);return(0,t.jsx)(o.DropdownItem,{className:"d-flex align-items-center",tag:"div",key:`${e.label}-${a}`},(0,t.jsx)("div",{className:"flex-grow-1 d-flex align-items-center",onClick:()=>{((e,i,o)=>{var s;let a,p=null===(s=n.current)||void 0===s?void 0:s.asMutable({deep:!0});if(p||(p=ht(c.messageType,l),n.current=(0,t.Immutable)(p)),C(i.name)){A();let e=(null==p?void 0:p.actions)||[];e=null==e?void 0:e.filter((e=>e.actionName!==i.name)),p.actions=e}else a=ut(e,i,l,c.messageType),p.actions.push(a);b((0,t.Immutable)(p)),a&&o&&j(o,a.actionId,i),r.current=!0})(p,e,d)}},(0,t.jsx)(o.Checkbox,{className:"mr-3",checked:null==g?void 0:g.actionId}),(0,t.jsx)("div",{className:"flex-grow-1 text-left"},e.label)),h&&(0,t.jsx)(o.Button,{type:"tertiary",size:"sm",icon:!0,className:"px-2 settings-icon py-0",title:s("settings"),onClick:t=>{j(d,null==g?void 0:g.actionId,e,t)}},(0,t.jsx)(ci,{size:"s"})))})),N=(e,t)=>{if(t)y(!0);else{let e=n.current;e=e.set("actions",[]),b(e)}};return(0,t.jsx)("div",{className:"w-100 h-100"},((e,t)=>((null==e?void 0:e.length)||0)+((null==t?void 0:t.length)||0)>0)(u,g)&&(0,t.jsx)("div",{className:"w-100 h-100"},(0,t.jsx)("div",{className:"top-line-con"},(0,t.jsx)(a.SettingRow,{bottomLine:!0})),(0,t.jsx)(a.SettingSection,{title:(e=>(0,t.jsx)("div",{className:"d-flex align-items-center"},(0,t.jsx)("div",{className:"flex-grow-1"},c.messageLabel),(0,t.jsx)(o.Switch,{checked:e,onChange:N})))(I),className:(0,t.classNames)("w-100 h-100",{"clear-padding-bottom":!I})},I&&(0,t.jsx)("div",{className:"w-100 h-100"},(null==u?void 0:u.length)>0&&(null==u?void 0:u.map(((e,t)=>M(e,t)))),(null==g?void 0:g.length)>0&&(null==g?void 0:g.map(((e,t)=>M(e,t))))),(0,t.jsx)(mi,{widgetId:l,action:null==f?void 0:f.action,actionId:null==f?void 0:f.actionId,settingClassUri:null==f?void 0:f.actionSettingUri,onMessageChanged:b,sidePopperTrigger:d,message:x,closePanel:A}))))},{useState:Ii,useEffect:yi}=t.React,bi=e=>{const i=(0,z.getTheme)(),o=t.hooks.useTranslation(pi),s=t.ReactRedux.useSelector((e=>{var t;return null===(t=e.appStateInBuilder.appConfig)||void 0===t?void 0:t.messageConfigs})),{sidePopperTrigger:n,widgetId:r,supportMessageAction:l}=e,[c,p]=Ii(null),[d,g]=Ii(null),h=t.css`
    .message-actio-con {
      border-top: 1px solid ${i.sys.color.divider.tertiary};
      border-bottom: none;
    }
    .top-line-con {
      padding: 0 ${t.polished.rem(16)};
      .bottom-line {
        margin: 0;
        padding: 0;
      }
    }
    .clear-padding-top {
      padding-top: 0;
    }
    .clear-padding-bottom {
      padding-bottom: 0;
    }
    .clear-top-padding {
      padding-top: 0;
      padding-bottom: 0;
    }
    .action-item-dropdown-button {
      background: ${i.ref.palette.secondary[200]};
      border: none;
    }
  `;return yi((()=>{const e=((e,t)=>{const i=[],o=Object.keys(e);if(o.length>0)for(let s=0;s<o.length;s++)e[o[s]]&&e[o[s]].widgetId===t&&i.push(e[o[s]]);return i})(s,r);p(e)}),[s,r]),yi((()=>{const e=pt(r);g(e)}),[r]),(0,t.jsx)("div",{className:"w-100 h-100",css:h},l&&(0,t.jsx)("div",{className:"w-100 h-100 message-actio-con"},(0,t.jsx)(a.SettingSection,{title:o("messageAction"),className:"w-100 message-actio-con"}),(0,t.jsx)("div",{className:"jimu-widget message-setting"},null==d?void 0:d.map(((e,o)=>(0,t.jsx)(wi,{key:o,widgetId:r,theme:i,messages:c,publishMessageItem:e,sidePopperTrigger:n}))))))};var Si=m(5549),Ci=m.n(Si),Ai=m(7528),ji=m.n(Ai),Mi=m(6745),Ti=m.n(Mi),Ni=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const Pi=e=>{const i=window.SVG,{className:o}=e,s=Ni(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:Ti()},s)):t.React.createElement("svg",Object.assign({className:n},s))};function ki(e,t){var o,s;let n=(0,i.getAppConfigAction)().appConfig;n.cookieBanner||(n=n.set("cookieBanner",{}));let a=null;a="string"==typeof e?null===(o=n.cookieBanner)||void 0===o?void 0:o.set(e,t):null===(s=n.cookieBanner)||void 0===s?void 0:s.setIn(e,t),(0,i.getAppConfigAction)().updateCookieBannerConfig(a).exec()}var Ri=m(2046),Oi=m.n(Ri),Bi=m(7408),Li=m.n(Bi),Di=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const Ei=e=>{const i=window.SVG,{className:o}=e,s=Di(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:Li()},s)):t.React.createElement("svg",Object.assign({className:n},s))};var zi;!function(e){e.InAppAppStateChanged="IN_APP_APP_STATE_CHANGED",e.InBuilderAppConfigChanged="IN_BUILDER_APP_CONFIG_CHANGED"}(zi||(zi={}));var _i;!function(e){e.InBuilderPutAppConfigIntoHistory="IN_BUILDER_PUT_APPCONFIG_INTO_HISTORY",e.InBuilderRemoveLastAppConfigFromHistory="IN_BUILDER_REMOVE_LAST_APPCONFIG_FROM_HISTORY",e.InBuilderReplaceLastAppConfigInHistory="IN_BUILDER_REPLACE_LAST_APPCONFIG_IN_HISTORY",e.InBuilderAppConfigUndo="IN_BUILDER_APPCONFIG_UNDO",e.InBuilderAppConfigRedo="IN_BUILDER_APPCONFIG_REDO",e.InBuilderAppConfigRedoClear="IN_BUILDER_APPCONFIG_REDOCLEAR",e.InBuilderAppConfigClear="IN_BUILDER_APPCONFIG_CLEAR"}(_i||(_i={}));var Ui;!function(e){e.SelectTemplate="SELECT_TEMPLATE",e.OpenChooseWidgetPopup="OPEN_CHOOSE_WIDGET_POPUP",e.CloseChooseWidgetPopup="CLOSE_CHOOSE_WIDGET_POPUP",e.WidgetSettingClassLoaded="WIDGET_SETTING_CLASS_LOADED",e.WidgetsRemoved="WIDGETS_REMOVED",e.WidgetsAdded="WIDGETS_ADDED",e.ChangeCurrentApp="CHANGE_CURRENT_APP",e.RefreshAppList="REFRSH_APPLIST",e.SetLayoutTools="SET_LAYOUT_TOOLS",e.StartGuide="START_GUIDE",e.StopGuide="STOP_GUIDE",e.WidgetSettingI18nMessageLoaded="WIDGET_SETTING_I18N_MESSAGE_LOADED",e.ConfirmDeleteContentChanged="CONFIRM_DELETE_CONTENT_CHANGED"}(Ui||(Ui={}));var Wi,Fi,Vi;!function(e){e.AppConfigChanged="app_config_changed",e.AppInfoChanged="app_info_changed",e.PortalSelfChanged="portal_self_changed",e.DialogInfosChanged="dialog_infos_changed",e.UserSignIn="user_sign_in",e.SetMainPortal="set_main_portal",e.ChangeAppMode="change_app_mode",e.ChangePage="change_page",e.ChangeDialog="change_dialog",e.ChangeSelection="change_selection",e.ChangeWidgetStateProp="change_widget_state_prop",e.ChangeWidgetMutableStateProp="change_widget_mutable_state_prop",e.ChangeZoomScale="change_zoom_scale",e.BuilderTriggerKeyboard="builder_trigger_keyboard",e.ChangeBrowserSizeMode="change_browser_size_mode",e.BuilderSessionChanged="builder_session_changed",e.BuilderNoPermissionResourceInfoListChanged="builder_no_permission_resource_info_list_changed",e.ActivePagePartChanged="active_page_part_changed",e.AnimationPreview="animation_preview",e.HoverPreview="hover_preview",e.SectionNavInfoChanged="section_navinfo_changed",e.ScreenGroupNavInfoChanged="screengroup_navinfo_changed",e.TocHoverInfoChanged="toc_hover_info_changed",e.SetClientIdAlertIsCancelled="set_client_id_alert_is_cancelled",e.UtilityStateChanged="utility_state_changed",e.OpenCookieBanner="open_cookie_banner",e.OpenCookieBannerByPrivacyPanel="open_cookie_banner_by_privacy_panel",e.OpenCookieSettingsWindow="open_cookie_settings_window"}(Wi||(Wi={})),function(e){e.AppStateChanged="app_state_changed",e.AppSessionChanged="app_session_changed",e.AppNoPermissionResourceInfoListChanged="app_no_permission_resource_info_list_changed",e.NeedToCheck498Error="need_to_check_498_error",e.PopupChooseWidget="popup_choose_widget",e.AppAddResource="app_add_resource",e.AppClearResources="app_clear_resources",e.AppTriggerKeyboard="app_trigger_keyboard",e.SetLayoutTools="app_set_layout_tools",e.ClearLastAppConfigFromHistory="clear_last_app_config_from_history",e.SetIsBusy="app_set_isbusy",e.AppIsLoaded="app_is_loaded",e.ConfirmDelete="confirm_delete",e.NeedToRegisterClinetId="need_to_register_client_id",e.SetSidePanel="app_side_panel",e.CloseBannerInLiveView="close_banner_in_live_view"}(Fi||(Fi={})),function(e){e.AddResource="ADD_RESOURCE",e.UpdateResource="UPDATE_RESOURCE",e.ClearResources="CLEAR_RESOURCES"}(Vi||(Vi={}));var Hi,Gi,$i;!function(e){e.AGOL="AGOL",e.Portal="Portal",e.Other="Other"}(Hi||(Hi={})),function(e){e.TemplateType="Web Experience Template",e.ExperienceType="Web Experience"}(Gi||(Gi={})),function(e){e.Published="Published",e.Draft="Draft",e.Changed="Changed"}($i||($i={}));var Zi=function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function a(e){try{l(o.next(e))}catch(e){n(e)}}function r(e){try{l(o.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};function Ji(e){return Zi(this,arguments,void 0,(function*(e,t={params:{f:"json"}},i="POST"){if("GET"===i){const i=e+function(e){if(!e)return"";const t=Object.keys(e);return t.length?"?"+t.map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&"):""}(t.params);return yield fetch(i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>Zi(this,void 0,void 0,(function*(){return yield e.json()})))).then((e=>Zi(this,void 0,void 0,(function*(){return yield Promise.resolve(e)}))))}return"POST"===i?t.params&&"FormData"===t.params.constructor.name?yield fetch(e,{method:"POST",body:t.params}).then((e=>Zi(this,void 0,void 0,(function*(){return yield e.json()})))).then((e=>Zi(this,void 0,void 0,(function*(){return yield Promise.resolve(e)})))):yield fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.params)}).then((e=>Zi(this,void 0,void 0,(function*(){return yield e.json()})))).then((e=>Zi(this,void 0,void 0,(function*(){return yield Promise.resolve(e)})))):yield Promise.reject(null)}))}function Qi(e=!1){var i;if(e)return t.urlUtils.getArcgisOnlineUrl();{const e=(null===(i=window.jimuConfig.mountPath)||void 0===i?void 0:i.slice(0,-1))||"";return`${window.location.origin}${e}`}}t.esri.restRequest.request;function Yi(e=!1){return e?"/sharing/rest/content/":"/sharing/rest/content/users/"}var Ki=function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function a(e){try{l(o.next(e))}catch(e){n(e)}}function r(e){try{l(o.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};function Xi(e,t){return Ki(this,void 0,void 0,(function*(){const i=`${Qi()}${Yi()}importItem`;if(!(null==e?void 0:e.appZip))return Promise.reject("No app files");t.params=Object.assign(Object.assign({},t.params),e);const o=Object.keys(t.params),s=new FormData;for(let e=0;e<o.length;e++)s.append(o[e],t.params[o[e]]);return t.params=s,yield Ji(i,t)}))}function qi(e,t){return Ki(this,void 0,void 0,(function*(){const i=`${Qi()}${Yi()}checkItemVersion`;if(!(null==e?void 0:e.appZip))return Promise.reject("No app files");t.params=Object.assign(Object.assign({},t.params),e);const o=Object.keys(t.params),s=new FormData;for(let e=0;e<o.length;e++)s.append(o[e],t.params[o[e]]);return t.params=s,yield Ji(i,t)}))}t.SessionManager.getInstance().isTrustedServer((0,t.getAppStore)().getState().portalUrl);const{importItem:eo,checkItemVersion:to}=e;t.esri.restRequest.request;function io(e,i){return Object.values(null!=i?i:{}).forEach((i=>{e=function(e,i){var o;const s=e.layouts[i];return s?(delete s.parent,Object.keys(null!==(o=s.content)&&void 0!==o?o:{}).forEach((i=>{const o=s.content[i];switch(o.type){case t.LayoutItemType.Widget:{const t=e.widgets[o.widgetId];t&&(delete t.parent,t.layouts&&Object.values(t.layouts).forEach((t=>{e=io(e,t)})));break}case t.LayoutItemType.Section:{const t=e.sections[o.sectionId];delete t.parent,t.views.forEach((t=>{const i=e.views[t];delete i.parent,e=io(e,i.layout)}));break}case t.LayoutItemType.ScreenGroup:{const t=e.screenGroups[o.screenGroupId];delete t.parent,t.screens.forEach((t=>{var i;const o=e.screens[t];delete o.parent,e=io(e,o.main.layout),(null===(i=o.panel)||void 0===i?void 0:i.layout)&&(e=io(e,o.panel.layout))}));break}}})),e):e}(e,i)})),e}const{getUniqueId:oo,getUniqueLabel:so,parseUniqueLabel:no,getSizeModeOfALayout:ao}=t.appConfigUtils;window._getCleanAppConfig=function(e){let i=e.asMutable({deep:!0});var o;return Object.keys(i.widgets).forEach((e=>{var t,o,s;const n=i.widgets[e];n.label===(null===(t=n.manifest)||void 0===t?void 0:t.name)&&delete n.label,n.icon===n.context.folderUrl+"icon.svg"&&delete n.icon,"object"==typeof n.icon&&(n.icon.svg!==n.context.folderUrl+"icon.svg"||"#fff"!==(null===(o=n.icon.properties)||void 0===o?void 0:o.color)&&(null===(s=n.icon.properties)||void 0===s?void 0:s.color)||delete n.icon),delete n.context,delete n.manifest,delete n._originManifest})),i.layouts=(o=i.layouts,Object.keys(o).forEach((e=>{const t=o[e];delete t.id,t.content&&Object.keys(t.content).forEach((e=>{delete t.content[e].id}))})),o),i=t.appConfigUtils.cleanPortalInfoFromResource(i),i=function(e){var t,i,o,s;return Object.values(null!==(t=e.pages)&&void 0!==t?t:{}).forEach((t=>{e=io(e,t.layout)})),Object.values(null!==(i=e.dialogs)&&void 0!==i?i:{}).forEach((t=>{e=io(e,t.layout)})),(null===(o=e.header)||void 0===o?void 0:o.layout)&&(e=io(e,e.header.layout)),(null===(s=e.footer)||void 0===s?void 0:s.layout)&&(e=io(e,e.footer.layout)),e}(i),i};var ro;!function(e){e.Config="config/config.json",e.Image="images/image-resources-list.json",e.Icon="images/icon-resources-list.json"}(ro||(ro={}));function lo(e,t){window._builderPubsub.publishSync(e,t)}var co=m(6371),po=m.n(co),go=function(e,t){var i={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(i[o[s]]=e[o[s]])}return i};const ho=e=>{const i=window.SVG,{className:o}=e,s=go(e,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",o);return i?t.React.createElement(i,Object.assign({className:n,src:po()},s)):t.React.createElement("svg",Object.assign({className:n},s))},uo=(0,z.styled)(o.CollapsablePanel)`
  .collapse-header {
    .collapse-label {
      font-size: 13px;
    }
  }
`,mo=(0,z.styled)(o.CollapsableCheckbox)`
  .collapse-header {
    .collapse-label {
      font-size: 13px;
    }
  }
`,fo=e=>{var s,n,r,c,p,d,g,h,u,f;const{formatMessage:v,theme:x,browserSizeMode:w}=e,I=t.ReactRedux.useSelector((e=>{var t,i;return null===(i=null===(t=null==e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===i?void 0:i.cookieBanner})),y=t.ReactRedux.useSelector((e=>{var t,i,o;return null===(o=null===(i=null===(t=null==e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===i?void 0:i.analytics)||void 0===o?void 0:o.enable})),b=t.ReactRedux.useSelector((e=>{var t,i,o;return null===(o=null===(i=null===(t=null==e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appRuntimeInfo)||void 0===i?void 0:i.cookieBanner)||void 0===o?void 0:o.isCookieSettingsWindowOpen})),[C,j]=t.React.useState(null!==(s=null==I?void 0:I.acceptAllButton)&&void 0!==s?s:(0,t.Immutable)({})),[T,N]=t.React.useState(null!==(n=null==I?void 0:I.closeButton)&&void 0!==n?n:(0,t.Immutable)({})),[P,k]=t.React.useState(null!==(r=null==I?void 0:I.declineAllButton)&&void 0!==r?r:(0,t.Immutable)({})),[R,O]=t.React.useState(null!==(c=null==I?void 0:I.cookieSettingsButton)&&void 0!==c?c:(0,t.Immutable)({})),[B,L]=t.React.useState(null!==(d=null===(p=null==I?void 0:I.positionSize)||void 0===p?void 0:p[w])&&void 0!==d?d:o.DEFAULT_FIXED_POSITION_SIZE_JSON),[D,E]=t.React.useState((null==I?void 0:I.layout)||t.ECookieBannerLayout.Vertical);const z=t.React.useCallback((e=>{(0,i.getAppConfigAction)().editCookieBannerConfig("backgroundStyle",e).exec()}),[]),_=t.React.useCallback((e=>{(0,i.getAppConfigAction)().editCookieBannerConfig("border",e).exec()}),[]),U=t.React.useCallback((e=>{(0,i.getAppConfigAction)().editCookieBannerConfig("borderRadius",e).exec()}),[]),W=t.React.useCallback((e=>{(0,i.getAppConfigAction)().editCookieBannerConfig("boxShadow",e).exec()}),[]);return t.React.useEffect((()=>{var e,i;L((null===(e=null==I?void 0:I.positionSize)||void 0===e?void 0:e[w])||(null===(i=null==I?void 0:I.positionSize)||void 0===i?void 0:i[t.BrowserSizeMode.Large])||o.DEFAULT_FIXED_POSITION_SIZE_JSON)}),[w,null==I?void 0:I.positionSize]),(0,t.jsx)("div",{className:"cookie-banner-setting-panel h-100",style:{overflow:"scroll"}},(0,t.jsx)(a.SettingSection,{className:"cookie-banner-setting-header"},(0,t.jsx)(a.SettingRow,null,(0,t.jsx)(o.Label,null,(0,t.jsx)(ho,null),(0,t.jsx)("span",{className:"ml-2"},v("cookieBannerSettingTitle"))))),(0,t.jsx)(a.SettingSection,{title:`${v("layout")}`},(0,t.jsx)("div",{className:"banner-layout-setting d-flex justify-content-around"},(0,t.jsx)(o.Button,{icon:!0,active:D===t.ECookieBannerLayout.Vertical,className:"banner-layout-item",style:{padding:0},onClick:()=>{E(t.ECookieBannerLayout.Vertical),ki("layout",t.ECookieBannerLayout.Vertical)}},(0,t.jsx)(o.Icon,{autoFlip:!0,icon:m(2384),style:{width:"108px",height:"80px",background:"var(--ref-palette-neutral-300)"}})),(0,t.jsx)(o.Button,{icon:!0,active:D===t.ECookieBannerLayout.Horizontal,className:"banner-layout-item",style:{padding:0},onClick:()=>{E(t.ECookieBannerLayout.Horizontal),ki("layout",t.ECookieBannerLayout.Horizontal)}},(0,t.jsx)(o.Icon,{autoFlip:!0,icon:m(4142),style:{width:"108px",height:"80px",background:"var(--ref-palette-neutral-300)"}})))),(0,t.jsx)(a.SettingSection,{"aria-label":`${v("position")} & ${v("size")}`},(0,t.jsx)("div",{className:"d-flex mb-4"},(0,t.jsx)("h6",{className:"flex-lg-grow-1 mb-0 text-truncate title2 hint-paper"},`${v("position")} & ${v("size")}`),(()=>{var e,i;const s=!(null===(e=null==I?void 0:I.positionSize)||void 0===e?void 0:e[t.BrowserSizeMode.Medium]),n=!(null===(i=null==I?void 0:I.positionSize)||void 0===i?void 0:i[t.BrowserSizeMode.Small]),a=w===t.BrowserSizeMode.Large||s&&n,r=w===t.BrowserSizeMode.Large&&s||w===t.BrowserSizeMode.Medium||w===t.BrowserSizeMode.Small&&s&&n,l=w===t.BrowserSizeMode.Large&&n||w===t.BrowserSizeMode.Medium&&s&&n||w===t.BrowserSizeMode.Small,c=x.ref.palette.neutral[800],p=v("applyToLargeScreen"),d=v("applyToMediumScreen"),g=v("applyToSmallScreen");return(0,t.jsx)("div",{className:"d-flex justify-content-between align-items-center"},a&&(0,t.jsx)(o.Tooltip,{title:p},(0,t.jsx)(o.Button,{icon:!0,size:"sm",type:"tertiary",className:"p-0 border-0"},(0,t.jsx)(o.Icon,{size:12,icon:S(),color:c,className:"border-0"}))),r&&(0,t.jsx)(o.Tooltip,{title:d},(0,t.jsx)(o.Button,{icon:!0,size:"sm",type:"tertiary",className:"p-0 border-0"},(0,t.jsx)(o.Icon,{size:12,icon:A(),color:c,className:"border-0"}))),l&&(0,t.jsx)(o.Tooltip,{title:g},(0,t.jsx)(o.Button,{icon:!0,size:"sm",type:"tertiary",className:"p-0 border-0"},(0,t.jsx)(o.Icon,{size:12,icon:M(),color:c,className:"border-0"}))))})()),(0,t.jsx)(a.SettingRow,null,(0,t.jsx)(l.FixedPositionSize,{fixedPositionSizeJson:B,onChange:e=>{L(e),ki(["positionSize",w],e)}}))),(0,t.jsx)(a.SettingSection,{title:v("bannerButtonSettings")},y&&(0,t.jsx)(a.SettingRow,{className:"accept-button-setting"},(0,t.jsx)(uo,{label:v("acceptAllButton"),rightIcon:Oi()},(0,t.jsx)(a.SettingRow,{className:"mt-2",label:v("text")}),(0,t.jsx)(o.TextInput,{className:"w-100 mt-2",defaultValue:(null==C?void 0:C.label)||v("acceptAll"),onAcceptValue:e=>{const t=C.set("label",e);j(t),ki("acceptAllButton",t)}}),(0,t.jsx)(a.SettingRow,{className:"mt-2",label:v("icon")},(0,t.jsx)(ge.IconPicker,{configurableOption:"none",icon:null===(g=null==C?void 0:C.icon)||void 0===g?void 0:g.asMutable({deep:!0}),setButtonUseColor:!1,previewOptions:{color:!0},onChange:e=>{const t=C.set("icon",e);j(t),ki("acceptAllButton",t)}})))),!y&&(0,t.jsx)(a.SettingRow,{className:"close-button-setting"},(0,t.jsx)(uo,{label:v("closeButton"),rightIcon:Oi()},(0,t.jsx)(a.SettingRow,{className:"mt-2",label:v("text")}),(0,t.jsx)(o.TextInput,{className:"w-100 mt-2",defaultValue:(null==T?void 0:T.label)||v("close"),onAcceptValue:e=>{const t=T.set("label",e);N(t),ki("closeButton",t)}}),(0,t.jsx)(a.SettingRow,{className:"mt-2",label:v("icon")},(0,t.jsx)(ge.IconPicker,{configurableOption:"none",icon:null===(h=null==T?void 0:T.icon)||void 0===h?void 0:h.asMutable({deep:!0}),setButtonUseColor:!1,previewOptions:{color:!0},onChange:e=>{const t=T.set("icon",e);N(t),ki("closeButton",t)}})))),y&&(0,t.jsx)(a.SettingRow,{className:"decline-button-setting"},(0,t.jsx)(mo,{openForCheck:!0,closeForUncheck:!0,disableActionForUnchecked:!0,label:v("declineAllButton"),rightIcon:Oi(),checked:(null==P?void 0:P.enable)||!1,onCheckedChange:e=>{const t=P.set("enable",e);k(t),ki("declineAllButton",t)}},(0,t.jsx)(a.SettingRow,{className:"mt-2",label:v("text")}),(0,t.jsx)(o.TextInput,{className:"w-100 mt-2",defaultValue:(null==P?void 0:P.label)||v("declineAll"),onAcceptValue:e=>{const t=P.set("label",e);k(t),ki("declineAllButton",t)}}),(0,t.jsx)(a.SettingRow,{className:"mt-2",label:v("icon")},(0,t.jsx)(ge.IconPicker,{configurableOption:"none",icon:null===(u=null==P?void 0:P.icon)||void 0===u?void 0:u.asMutable({deep:!0}),setButtonUseColor:!1,previewOptions:{color:!0},onChange:e=>{const t=P.set("icon",e);k(t),ki("declineAllButton",t)}})))),y&&(0,t.jsx)(a.SettingRow,{className:"cookie-settings-button-setting"},(0,t.jsx)(mo,{openForCheck:!0,closeForUncheck:!0,disableActionForUnchecked:!0,label:v("cookieSettingsButton"),rightIcon:Oi(),checked:(null==R?void 0:R.enable)||!1,onCheckedChange:e=>{const t=R.set("enable",e);O(t),ki("cookieSettingsButton",t)}},(0,t.jsx)(a.SettingRow,{className:"mt-2",label:v("text")}),(0,t.jsx)(o.TextInput,{className:"w-100 mt-2",defaultValue:(null==R?void 0:R.label)||v("preferences"),onAcceptValue:e=>{const t=R.set("label",e);O(t),ki("cookieSettingsButton",t)}}),(0,t.jsx)(a.SettingRow,{className:"mt-2",label:v("icon")},(0,t.jsx)(ge.IconPicker,{configurableOption:"none",icon:null===(f=null==R?void 0:R.icon)||void 0===f?void 0:f.asMutable({deep:!0}),setButtonUseColor:!1,previewOptions:{color:!0},onChange:e=>{const t=R.set("icon",e);O(t),ki("cookieSettingsButton",t)}})),(0,t.jsx)(a.SettingRow,{label:v("cookieSettingsWindow")},(0,t.jsx)(o.Button,{icon:!0,active:b,onClick:()=>{var e;e=!b,lo(`to_app.${Wi.OpenCookieSettingsWindow}`,{isOpen:e})}},(0,t.jsx)(Ei,null)))))),(0,t.jsx)(a.SettingSection,{role:"group",title:v("animation"),"aria-label":v("animation")},(0,t.jsx)(a.SettingRow,null,(0,t.jsx)(l.AnimationSettingComponent,{contentId:"cookie-banner",effectSetting:null==I?void 0:I.effect,onSettingChange:function(e,o){(0,i.getAppConfigAction)().editCookieBannerConfig("effect",o).exec(),i.builderAppSync.publishAnimationPreviewToApp({dialogId:"cookie-banner",playMode:e,id:(0,t.getNextAnimationId)()})},previewEnabled:!0,supportAsOne:!0,onPreviewClicked:function(e){I.effect&&i.builderAppSync.publishAnimationPreviewToApp({dialogId:"cookie-banner",playMode:e,id:(0,t.getNextAnimationId)()})},formatMessage:v}))),(0,t.jsx)(l.ThemeBackgroundSection,{background:(null==I?void 0:I.backgroundStyle)||{fillType:o.FillType.FILL},onChange:z}),(0,t.jsx)(l.ThemeBorderSection,{border:null==I?void 0:I.border,borderRadius:null==I?void 0:I.borderRadius,onBorderChange:_,onBorderRasiusChange:U}),(0,t.jsx)(l.ThemeBoxShadowSection,{value:null==I?void 0:I.boxShadow,onChange:W}))};var vo=function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function a(e){try{l(o.next(e))}catch(e){n(e)}}function r(e){try{l(o.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((o=o.apply(e,t||[])).next())}))};const{useState:xo,useEffect:wo}=t.React,Io={svg:Ci()},yo={svg:ji()},bo=Object.assign({},pi,o.defaultMessages,{previousView:"Previous view",nextView:"Next view",originTL:"Top left as origin",originTR:"Top right as origin",originBL:"Bottom left as origin",originBR:"Bottom right as origin",alignLeft:"Align left",alignRight:"Align right",alignTop:"Align top",alignCenter:"Align center",alignHCenter:"Horizontal center",alignVCenter:"Vertical center",alignBottom:"Align bottom",alignStretch:"Align stretch",sendBackward:"Send backward",bringForward:"Bring forward",sendToBack:"Send to back",bringToFront:"Bring to front",zoomoutFixed:"Zoom out fixed",order:"Order",moveToLeft:"Move to left",moveToRight:"Move to right",moveToTop:"Move to top",moveToBottom:"Move to bottom",addView:"New view",duplicateScreen:"Duplicate screen",deleteScreen:"Delete screen",applyToFirstPanel:"Apply to the first panel",deleteView:"Delete view",duplicateView:"Duplicate view",insertABlock:"Insert block",insertAScreenGroup:"Insert screen group",moveup:"Move up",movedown:"Move down",chooseTemplate:"Choose a {type} template",chooseHeaderTemplate:"Choose a header template",chooseFooterTemplate:"Choose a footer template",dropWidgetToAdd:"Or drag a widget here",snapToLeft:"Snap to left",snapToTop:"Snap to top",snapToBottom:"Snap to bottom",snapToRight:"Snap to right",fullWidth:"Full width",fullHeight:"Full height",fullSize:"Full size",restoreSize:"Restore size",pendingTip:"Move to the pending list",setting:"Settings",dragToMove:"Drag to move {label}",lockLayout:"Lock position and size",unlockLayout:"Unlock position and size",editHeader:"Edit header",editFooter:"Edit footer",transform:"Transform",rotation:"Rotation",angle:"Angle",floating:"Pin",sinking:"Unpin",floatingArea:"Floating area",changeToAuto:"Change to auto",changeToCustom:"Change to custom",positionType:"Position type",sticky:"Sticky",fixed:"Fixed",flow:"Flow",stack:"Stack",fixedAtTop:"Floating at the top when scrolling",actNormal:"Act as normal widget",hideInDesignView:"Hide in design view",showInDesignView:"Show in design view",unlockGridItem:"Unlock this widget to reorganize its internal widgets.",lockGridItem:"Lock this widget.",splitHorizontally:"Split horizontally",splitVertically:"Split vertically"},t.defaultMessages);const So=e=>{const[s,n]=xo("#"),{id:a,type:r,theme:l,intl:c,linkTitle:p,ariaLabel:d}=e;return wo((()=>{((e,o)=>vo(void 0,void 0,void 0,(function*(){var s,n,a,r,l;const c=null===(n=null===(s=(0,t.getAppStore)().getState())||void 0===s?void 0:s.appStateInBuilder)||void 0===n?void 0:n.appConfig;let p;if("page"===o||"dialog"===o)return yield i.helpUtils.getBuildAppsHelpLink(`add-a-${o}`);if("screen"===o)return yield i.helpUtils.getBuildAppsHelpLink("add-screen-groups");if("section"===o)p="section";else if("placeholder"===o)p="placeholder";else if(p=null===(l=null===(r=null===(a=null==c?void 0:c.widgets)||void 0===a?void 0:a[e])||void 0===r?void 0:r.manifest)||void 0===l?void 0:l.name,!p)return yield Promise.resolve(null);return yield i.helpUtils.getWidgetHelpLink(p)})))(a,r).then((e=>{n(e)}))}),[a,r]),(0,t.jsx)(o.Link,{icon:!0,to:s,target:"_blank",title:p,css:t.css`
        padding: 0 !important;
        .svg-component{
          margin-right: 0;
          color: ${l.ref.palette.neutral[1e3]};
        }
        :hover {
          .svg-component{
            color: ${l.ref.palette.black};
          }
        }
      `,"aria-label":d},(0,t.jsx)(Pi,{autoFlip:!t.i18n.isSameLanguage(null==c?void 0:c.locale,"he")}))},Co=e=>{var s;const{hideColorSelector:n,headTitle:a,icon:r,customIcon:l,id:c,type:p,needIconFlip:d,theme:g,intl:h,handleIconChange:u,handleTitleChange:m,handleKeydown:f,headTitleInput:v,defaultLabel:x}=e,[w,I]=xo("");let y,b="";const S="string"==typeof l?[{svg:l}]:[l],C=JSON.parse(JSON.stringify(r));if(null==C?void 0:C.svg){const e=null===(s=null==C?void 0:C.properties)||void 0===s?void 0:s.filename;e?(null==e?void 0:e.indexOf(".svg"))>0&&(b=x):C.properties={filename:x},y=C}else y={svg:r,properties:{filename:x}};wo((()=>{I(a)}),[a]);const A=e=>h.formatMessage({id:e,defaultMessage:bo[e]}),j=e=>{if("page"===p||"dialog"===p){const t=(0,i.getAppConfigAction)();if(i.appConfigUtils.isLabelDuplicated(t.appConfig,p,c,e))return{valid:!1,msg:A("duplicatedLabel")}}return{valid:!0}};return(0,t.jsx)("div",{className:"jimu-widget-setting--header d-flex align-items-center justify-content-between"},(0,t.jsx)("div",{className:"d-flex align-items-center"},(0,t.jsx)(ge.IconPicker,{previewOptions:{autoFlip:d,color:!0},configurableOption:n?"none":"color",className:"flex-none",icon:y,customLabel:b,customIcons:S,onChange:u,hideRemove:!0,onKeyDown:e=>{if("Tab"===e.key&&e.shiftKey&&(0,t.getAppStore)().getState().appStateInBuilder.appRuntimeInfo.appMode===t.AppMode.Design){e.preventDefault();const i=document.querySelector(`iframe[name="${t.APP_FRAME_NAME_IN_BUILDER}"]`);((null==i?void 0:i.contentDocument)||(null==i?void 0:i.contentWindow.document)).body.focus()}},setButtonUseColor:!1}),(0,t.jsx)("div",{className:"d-flex mx-1",css:t.css`max-width: 170px;`},(0,t.jsx)(o.TextInput,{className:"header-title-input w-100 h5",ref:v,size:"sm",title:w,value:w||"",onChange:e=>{I(e.target.value)},onAcceptValue:e=>m(c,e,p),checkValidityOnChange:j,checkValidityOnAccept:j,onBlur:e=>{(e=>{if(""===e.trim()){const t=(0,i.getAppConfigAction)();"widget"===p?e=t.appConfig.widgets[c].label:"section"===p?e=t.appConfig.sections[c].label:"screen"===p?e=t.appConfig.screenGroups[c].label:"page"===p&&(e=t.appConfig.pages[c].label),I(e)}})(e.target.value)},onKeyDown:f,borderless:!0}))),(0,t.jsx)(So,{id:c,type:p,theme:g,intl:h,linkTitle:A("help")}))};class Ao extends t.React.PureComponent{constructor(e){super(e),this.spanText=t.React.createRef(),this.headTitleInput=t.React.createRef(),this.sidePopperTrigger=t.React.createRef(),this.getCss=e=>{const{theme:i}=this.props,o=window.isExpressBuilder;return t.css`
      height: 100%;
      overflow: hidden;
      overflow-x: hidden;

      .jimu-widget-setting--header {
        ${o&&!e&&`border-bottom: 1px solid ${i.ref.palette.neutral[700]};`}
      }
      .jimu-widget-setting {
        overflow-x: hidden;
      }
      .widget-setting-tab{
        position: absolute;
        background-color: ${i.sys.color.surface.background};
      }

      .widget-setting, .section-setting {
        height: calc(100% - ${t.polished.rem(2)});
      }

      .jimu-widget-setting--row {
        label {
          user-select: none;
        }
      }
      .jimu-widget-setting--section-header {
        user-select: none;
      }
      .tab-content {
        height: calc(100% - ${t.polished.rem(40)});
      }
      .tab-pane{
        width: 100%;
      }

      .tab-title-item{
        width: 30%;
      }

      .edit-label-input {
        width: 50%;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
      }

      .title-span-hide {
        &.h5 {
          font-weight: ${i.ref.typeface.fontWeightBold};
          font-size: 1rem;
        }
      }

      .header-title-input {
        .input-wrapper {
          height: 100%;
          background-color: transparent;
        }
        &.h5 {
          input {
            width: 100%;
            font-weight: ${i.ref.typeface.fontWeightMedium};
            font-size: ${t.polished.rem(16)};
            color: var(--ref-palette-neutral-1000);
          }
        }
      }

      .setting-container {
        overflow-y: auto;
        overflow-x: hidden;
        ${!o&&"height: 100%;"}
      }

      .single-setting {
        border-top: 1px solid ${i.ref.palette.neutral[700]};
      }

      .help-btn {
        color: ${i.ref.palette.neutral[700]};
      }
      .help-btn:hover {
        color: ${i.ref.palette.black};
      }
    `},this.onLayoutItemSettingChanged=(e,t)=>{(0,i.getAppConfigAction)().editLayoutItemProperty(e,"setting",t).exec()},this.onLayoutItemStyleChanged=(e,o)=>{const s=(0,i.getAppConfigAction)(),{layoutId:n,layoutItemId:a}=e,r=s.appConfig.layouts[n].content[a];r.type===t.LayoutItemType.Widget?r.widgetId?s.editWidgetProperty(r.widgetId,"style",o).exec():s.editLayoutItemProperty(e,"setting.placeholderStyle",o).exec():r.type===t.LayoutItemType.Section&&s.editSectionProperty(r.sectionId,"style",o).exec()},this.onLayoutPosChanged=(e,t)=>{(0,i.getAppConfigAction)().editLayoutItemProperty(e,"bbox",t).exec()},this.getPageType=(e,t)=>{for(const i in t){const o=t[i];if(o.id===e)return o}return{}},this.formatMessage=(e,t)=>this.props.intl.formatMessage({id:e,defaultMessage:bo[e]},t),this.editTitle=(e,t,o)=>{const s=(0,i.getAppConfigAction)();t?"widget"===o||"block"===o?s.editWidgetProperty(e,"label",t).exec():"section"===o?s.editSectionProperty(e,"label",t).exec():"screen"===o?s.editScreenGroupProperty(e,"label",t).exec():"page"===o?s.editPageProperty(e,"label",t).exec():"dialog"===o&&s.editDialogProperty(e,"label",t).exec():"widget"===o?t=s.appConfig.widgets[e].label:"section"===o?t=s.appConfig.sections[e].label:"screen"===o?t=s.appConfig.screenGroups[e].label:"page"===o&&(t=s.appConfig.pages[e].label)},this.handleKeydown=e=>{"Enter"===e.key&&this.headTitleInput.current&&this.headTitleInput.current.blur()},this.handleIconChange=e=>{const t=this.getDisplay(),{selection:o,currentPageId:s,currentDialogId:n}=this.props,a=(0,i.getAppConfigAction)(),r=a.appConfig;if(t.page)a.editPageProperty(s,"icon",e).exec();else if(t.dialog)a.editDialogProperty(n,"icon",e).exec();else if(t.widget){const t=g.searchUtils.findLayoutItem(r,o);t&&a.editWidgetProperty(t.widgetId,"icon",e).exec()}else if(t.section){const t=g.searchUtils.findLayoutItem(r,o);t&&a.editSectionProperty(t.sectionId,"icon",e).exec()}else if(t.screen){const t=g.searchUtils.findLayoutItem(r,o);t&&a.editScreenGroupProperty(t.screenGroupId,"icon",e).exec()}},this.focusEditTitle=e=>{this.headTitleInput.current&&(this.headTitleInput.current.select(),this.headTitleInput.current.focus())},this.getDisplay=()=>{var e;const{selection:i}=this.props,o=this.getAppConfig(),s={widget:!1,section:!1,screen:!1,layoutItem:!1,placeholder:!1,page:!1,link:!1,folder:!1,dialog:!1,noSelection:!1,cookieBanner:!1};if(i){const n=g.searchUtils.findLayoutItem(o,i);n?n.type===t.LayoutItemType.Widget?n.widgetId?s.widget=!0:(s.layoutItem=!0,s.placeholder=!0):n.type===t.LayoutItemType.Section&&!1!==(null===(e=i.additionalInfo)||void 0===e?void 0:e.commonSection)?s.section=!0:n.type===t.LayoutItemType.ScreenGroup?s.screen=!0:s.layoutItem=!0:s.noSelection=!0}else this.props.currentDialogId?s.dialog=!0:this.props.currentPageId?(s.page=!0,s.link=this.getPageType(this.props.currentPageId,o.pages).type===t.PageType.Link,s.folder=this.getPageType(this.props.currentPageId,o.pages).type===t.PageType.Folder):s.noSelection=!0;return this.props.isCookieBannerOpen&&(s.cookieBanner=!0),s};const o={titleText:"",headTitleText:"",helpLink:""},{selection:s,appConfig:n,currentPageId:a}=e;if(s){const e=g.searchUtils.findLayoutItem(n,s);e&&(e.type===t.LayoutItemType.Widget?e.widgetId&&(o.headTitleText=n.widgets[e.widgetId].label):e.type===t.LayoutItemType.Section&&(o.headTitleText=n.sections[e.sectionId].label))}else a&&(o.headTitleText=n.pages[a].label);this.state=o}getAppConfig(){return(0,t.getAppStore)().getState().appStateInBuilder&&(0,t.getAppStore)().getState().appStateInBuilder.appConfig}getDefaultWidgetIcon(e,i,o){var s;let n,a,r;"widget"===e?(r=o,n=t.urlUtils.getAbsoluteRootUrl()+i.uri+"icon.svg",a=`${null===(s=null==i?void 0:i.manifest)||void 0===s?void 0:s.name}.svg`):(r=this.formatMessage("block"),n=Ci().toString(),a=`${e}.svg`);return{svg:n,properties:{filename:r,inlineSvg:!0,originalName:`default/${a}`,path:`default/${a}`}}}getDefaultIcon(e,t){if("page"===e)return i.utils.getDefaultTocPageIcon(t,this.formatMessage);let o,s;"section"===e?(o=i.utils.getDefaultSectionIcon().toString(),s=this.formatMessage("section")):"screen"===e?(o=ji().toString(),s=this.formatMessage("screenGroup")):"dialog"===e&&(o=i.utils.getDefaultTocDialogIcon().toString(),s=this.formatMessage("dialog"));const n=`${e}.svg`;return{svg:o,properties:{filename:s,inlineSvg:!0,originalName:`default/${n}`,path:`default/${n}`}}}onTabChange(e,i,o){i(t.appActions.widgetStatePropChange(o,"settingPanelChange",e))}widgetSettingsWithSimpleAction(e,i){var o,s,a;const{dispatch:r,widgetsSettingRuntimeInfo:l}=this.props,c=i.widgets[e].manifest,p=(null===(o=null==c?void 0:c.publishMessages)||void 0===o?void 0:o.length)>0,d=null!==(a=null===(s=null==c?void 0:c.properties)||void 0===s?void 0:s.canConsumeDataAction)&&void 0!==a&&a;return(0,t.jsx)("div",{ref:this.sidePopperTrigger},(0,t.jsx)(n,{widgetId:e,dispatch:r,formatMessage:this.formatMessage,widgetsSettingRuntimeInfo:l}),(0,t.jsx)("div",null,(0,t.jsx)(bi,{widgetId:e,supportMessageAction:p,canConsumeDataAction:d,pageId:t.urlUtils.getAppIdPageIdFromUrl().pageId,sidePopperTrigger:this.sidePopperTrigger})))}renderWidgetSettings(e,i,s,a,r){var l,c,p,d,h,u;let m;const{currentSelectionIcon:f,currentSelectionTitle:v,dispatch:x,selection:w}=this.props,I=null==s?void 0:s.layouts[null==a?void 0:a.layoutId],y=g.searchUtils.findLayoutItem(s,a).widgetId,b=s.widgets[y],S=b.manifest,C=(null===(l=null==S?void 0:S.publishMessages)||void 0===l?void 0:l.length)>0,A=null!==(p=null===(c=null==S?void 0:S.properties)||void 0===c?void 0:c.canConsumeDataAction)&&void 0!==p&&p,j=null===(d=null==S?void 0:S.i18nMessages)||void 0===d?void 0:d._widgetLabel,M=I.type===t.LayoutType.FlowLayout?"block":"widget",T=window.isExpressBuilder;return m=(null==S?void 0:S.properties.hasConfig)&&(null==S?void 0:S.properties.hasConfigInSettingPage)?T?this.widgetSettingsWithSimpleAction(y,s):(0,t.jsx)(o.Tabs,{type:"underline",key:"widget-setting",className:"widget-setting flex-grow-1 w-100",fill:!0,defaultValue:"content",onChange:e=>{this.onTabChange(e,x,b.id)}},(0,t.jsx)(o.Tab,{id:"content",title:this.formatMessage("content"),className:"tab-title-item"},(0,t.jsx)(n,{formatMessage:this.formatMessage,dispatch:this.props.dispatch,widgetId:y,widgetsSettingRuntimeInfo:this.props.widgetsSettingRuntimeInfo})),(0,t.jsx)(o.Tab,{id:"dynamicSettingStyle",title:this.formatMessage("dynamicSettingStyle"),className:"tab-title-item"},(0,t.jsx)("div",{className:"setting-container"},(0,t.jsx)(Ke,{layoutId:a.layoutId,layoutItemId:a.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged}))),(C||A)&&(0,t.jsx)(o.Tab,{id:"action",title:this.formatMessage("action"),className:"tab-title-item"},(0,t.jsx)("div",{className:"setting-container"},(0,t.jsx)(ni,{widgetId:y,supportMessageAction:C,canConsumeDataAction:A,formatMessage:this.formatMessage,pageId:t.urlUtils.getAppIdPageIdFromUrl().pageId})))):(0,t.jsx)("div",{className:"h-100"},(0,t.jsx)(Ke,{layoutId:a.layoutId,layoutItemId:a.layoutItemId,formatMessage:this.formatMessage,isSingle:!0,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})),m=(0,t.jsx)("div",{css:r&&t.css`z-index: -1`,className:"w-100 h-100 d-flex flex-column widget-setting-tab","data-is-parent":!!r||void 0},w.layoutId===a.layoutId&&(0,t.jsx)(Co,{headTitle:v,icon:f,customIcon:this.getDefaultWidgetIcon(M,b,j),id:b.id,type:M,needIconFlip:null===(u=null===(h=null==b?void 0:b.manifest)||void 0===h?void 0:h.properties)||void 0===u?void 0:u.flipIcon,theme:e,intl:i,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:j}),(0,t.jsx)("div",{style:{flex:1,overflow:"auto"}},m)),m}render(){var e;const i=this.getAppConfig(),{selection:s,browserSizeMode:n,theme:a,intl:r,currentSelectionIcon:l,currentSelectionTitle:c}=this.props;if(!i)return(0,t.jsx)("div",{css:this.getCss(!0),className:"builder-dynamic-setting bg-default"},(0,t.jsx)(y,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,theme:this.props.theme,pageId:"empty",browserSizeMode:this.props.browserSizeMode,appTheme:this.props.theme2}));const p=this.getDisplay();let h;if(p.widget){const o=g.searchUtils.findLayoutItem(i,s);if(i.widgets[null==o?void 0:o.widgetId]){const l=o.widgetId,c=g.searchUtils.getParentWidgetIdOfContent(i,l,t.LayoutItemType.Widget,n),p=i.widgets[c];if(c&&(null===(e=null==p?void 0:p.manifest)||void 0===e?void 0:e.widgetType)!==t.WidgetType.Layout){const e=g.searchUtils.getLayoutInfosHoldcontent(i,t.LayoutItemType.Widget,c,n)[0];h=(0,t.jsx)(t.React.Fragment,null,e&&this.renderWidgetSettings(a,r,i,e,!0),this.renderWidgetSettings(a,r,i,s))}else h=(0,t.jsx)(t.React.Fragment,null,this.renderWidgetSettings(a,r,i,s))}else h=(0,t.jsx)("div",null,this.formatMessage("noSelection"))}if(p.layoutItem){let e=p.placeholder?this.formatMessage("placeholder"):this.formatMessage("daynamicLayout");if(s){const o=i.layouts[s.layoutId];(null==o?void 0:o.type)===t.LayoutType.GridLayout&&(e=(0,d.getLabelOfGridTab)(i,s,this.formatMessage))}h=(0,t.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,t.jsx)("h4",{className:"jimu-widget-setting--header d-flex align-items-center justify-content-between"},(0,t.jsx)("div",null,e),p.placeholder&&(0,t.jsx)(So,{type:"placeholder",theme:a,intl:r,linkTitle:this.formatMessage("help"),ariaLabel:e})),(0,t.jsx)("div",{className:"flex-grow-1 setting-container"},(0,t.jsx)(Ke,{layoutId:s.layoutId,layoutItemId:s.layoutItemId,formatMessage:this.formatMessage,isSingle:!0,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})))}if(p.section){const e=g.searchUtils.findLayoutItem(i,s),n=i.sections[e.sectionId];h=(0,t.jsx)(o.Tabs,{type:"underline",className:"flex-grow-1 section-setting",fill:!0,defaultValue:"content"},(0,t.jsx)(o.Tab,{id:"content",key:"section-setting",title:this.formatMessage("content")},(0,t.jsx)(Ee,{intl:this.props.intl,formatMessage:this.formatMessage,theme:this.props.theme,appTheme:this.props.theme2,dispatch:this.props.dispatch,sectionId:n.id})),(0,t.jsx)(o.Tab,{id:"dynamicSettingStyle",title:this.formatMessage("dynamicSettingStyle")},(0,t.jsx)("div",{className:"h-100 setting-container"},(0,t.jsx)(Ke,{layoutId:s.layoutId,layoutItemId:s.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})))),h=(0,t.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,t.jsx)(Co,{headTitle:c,icon:l,customIcon:this.getDefaultIcon("section"),id:n.id,type:"section",theme:a,intl:r,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:c}),(0,t.jsx)("div",{className:"h-100 setting-container"},h))}if(p.screen){const e=g.searchUtils.findLayoutItem(i,s);h=(0,t.jsx)(Qe,{intl:this.props.intl,formatMessage:this.formatMessage,theme:this.props.theme,dispatch:this.props.dispatch,screenGroupId:e.screenGroupId}),h=(0,t.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,t.jsx)(Co,{headTitle:c,icon:l,customIcon:this.getDefaultIcon("screen"),id:e.screenGroupId,type:"screen",theme:a,intl:r,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:c}),(0,t.jsx)("div",{className:"h-100 setting-container"},h))}if(p.page){h=(0,t.jsx)(y,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,pageId:this.props.currentPageId,pageMode:this.props.pageMode,maxWidth:this.props.maxPageWidth,browserSizeMode:this.props.browserSizeMode,theme:this.props.theme,appTheme:this.props.theme2}),p.link?h=(0,t.jsx)(q,{dispatch:this.props.dispatch,appConfig:i,formatMessage:this.formatMessage,pageId:this.props.currentPageId}):p.folder&&(h=(0,t.jsx)(te,{dispatch:this.props.dispatch,appConfig:i,formatMessage:this.formatMessage,pageId:this.props.currentPageId}));const{currentPageId:e}=this.props,o=i.pages[e];h=o?(0,t.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,t.jsx)(Co,{hideColorSelector:!0,headTitle:c,icon:l,customIcon:this.getDefaultIcon("page",o),id:o.id,type:"page",theme:a,intl:r,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:c}),(0,t.jsx)("div",{className:"h-100 setting-container single-setting"},h)):null}if(p.dialog){const{currentDialogId:e}=this.props;h=(0,t.jsx)(E,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,dialogId:e,browserSizeMode:this.props.browserSizeMode,theme:this.props.theme,appTheme:this.props.theme2});const o=i.dialogs[e];h=(0,t.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,t.jsx)(Co,{hideColorSelector:!0,headTitle:c,icon:l,customIcon:this.getDefaultIcon("dialog"),id:o.id,type:"dialog",theme:a,intl:r,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:c}),(0,t.jsx)("div",{className:"h-100 setting-container single-setting"},h))}p.cookieBanner&&(h=(0,t.jsx)(fo,{browserSizeMode:this.props.browserSizeMode,theme:this.props.theme,dispatch:this.props.dispatch,appConfig:i,formatMessage:this.formatMessage})),p.noSelection&&(h=(0,t.jsx)("div",{className:"h-100"},this.formatMessage("noSelection")));const u=!!p.page;return(0,t.jsx)("div",{css:this.getCss(u),className:"builder-dynamic-setting bg-default"},(0,t.jsx)("span",{ref:this.spanText,className:"title-span-hide px-1 border h5",style:{width:"auto",position:"absolute",opacity:0,whiteSpace:"nowrap",zIndex:-1}},this.state.headTitleText||""),h)}}Ao.mapExtraStateProps=(e,o)=>{var s,n,a,r,l,c,p,d,h,u,m;const f=null===(s=e.appStateInBuilder)||void 0===s?void 0:s.appRuntimeInfo.currentPageId,v=null===(n=e.appStateInBuilder)||void 0===n?void 0:n.appRuntimeInfo.currentDialogId,x=null===(l=null===(r=null===(a=e.appStateInBuilder)||void 0===a?void 0:a.appRuntimeInfo)||void 0===r?void 0:r.cookieBanner)||void 0===l?void 0:l.isCookieBannerOpenByPrivacyPanel,w=null===(c=e.appStateInBuilder)||void 0===c?void 0:c.appConfig;let I,y;f&&(I=null===(d=null===(p=null==w?void 0:w.pages)||void 0===p?void 0:p[f])||void 0===d?void 0:d.mode,y=null===(u=null===(h=null==w?void 0:w.pages)||void 0===h?void 0:h[f])||void 0===u?void 0:u.maxWidth);const b=null===(m=e.appStateInBuilder)||void 0===m?void 0:m.appRuntimeInfo.selection,{icon:S,title:C}=function(e,o,s,n,a){var r,l;let c,p;if(e){const o=g.searchUtils.findLayoutItem(n,e);if(o)if(o.type===t.LayoutItemType.Widget){if(o.widgetId){const i=n.widgets[o.widgetId],s=n.layouts[e.layoutId];p=i&&i.label,c=s.type!==t.LayoutType.FlowLayout||(null===(r=o.setting)||void 0===r?void 0:r.isFloating)?i&&i.icon:"string"!=typeof(null==i?void 0:i.icon)&&(null==i?void 0:i.icon)||Io}}else if(o.type===t.LayoutItemType.Section){if(o.sectionId){const e=n.sections[o.sectionId];p=null==e?void 0:e.label,c=(null==e?void 0:e.icon)||i.utils.getDefaultSectionIcon().toString()}}else if(o.type===t.LayoutItemType.ScreenGroup&&o.screenGroupId){const e=n.screenGroups[o.screenGroupId];p=null==e?void 0:e.label,c=null!==(l=null==e?void 0:e.icon)&&void 0!==l?l:yo}}else if(n)if(o){const e=n.dialogs[o];e&&(p=e.label,c=e.icon||i.utils.getDefaultTocDialogIcon())}else if(s){const e=n.pages[s];e&&(p=e.label,c=e.icon||i.utils.getDefaultTocPageIcon(e,null,a))}return{icon:c,title:p}}(b,v,f,w,o.i18nMessages.page);return{currentPageId:f,pageMode:I,maxPageWidth:y,widgetsSettingRuntimeInfo:e.builder.widgetsSettingRuntimeInfo,currentDialogId:v,selection:b,browserSizeMode:e.appStateInBuilder&&e.appStateInBuilder.browserSizeMode,currentSelectionIcon:S,currentSelectionTitle:C,isCookieBannerOpen:x}};const jo=Ao;function Mo(e){m.p=e}})(),f})())}}}));